!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).window=e()}}(function(){return function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var l=r[s]={exports:{}};t[s][0].call(l.exports,function(e){var r=t[s][1][e];return i(r||e)},l,l.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){(function(e){function r(e){this._db=e,this._operations=[],this._written=!1}r.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},r.prototype.put=function(e,t){this._checkWritten();var r=this._db._checkKeyValue(e,"key",this._db._isBuffer);if(r)throw r;if(r=this._db._checkKeyValue(t,"value",this._db._isBuffer))throw r;return this._db._isBuffer(e)||(e=String(e)),this._db._isBuffer(t)||(t=String(t)),"function"==typeof this._put?this._put(e,t):this._operations.push({type:"put",key:e,value:t}),this},r.prototype.del=function(e){this._checkWritten();var t=this._db._checkKeyValue(e,"key",this._db._isBuffer);if(t)throw t;return this._db._isBuffer(e)||(e=String(e)),"function"==typeof this._del?this._del(e):this._operations.push({type:"del",key:e}),this},r.prototype.clear=function(){return this._checkWritten(),this._operations=[],"function"==typeof this._clear&&this._clear(),this},r.prototype.write=function(t,r){if(this._checkWritten(),"function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("write() requires a callback argument");return"object"!=typeof t&&(t={}),this._written=!0,"function"==typeof this._write?this._write(r):"function"==typeof this._db._batch?this._db._batch(this._operations,t,r):void e.nextTick(r)},t.exports=r}).call(this,e("_process"))},{_process:130}],2:[function(e,t,r){(function(e){function r(e){this.db=e,this._ended=!1,this._nexting=!1}r.prototype.next=function(t){var r=this;if("function"!=typeof t)throw new Error("next() requires a callback argument");return r._ended?t(new Error("cannot call next() after end()")):r._nexting?t(new Error("cannot call next() before previous next() has completed")):(r._nexting=!0,"function"==typeof r._next?r._next(function(){r._nexting=!1,t.apply(null,arguments)}):void e.nextTick(function(){r._nexting=!1,t()}))},r.prototype.end=function(t){if("function"!=typeof t)throw new Error("end() requires a callback argument");return this._ended?t(new Error("end() already called on iterator")):(this._ended=!0,"function"==typeof this._end?this._end(t):void e.nextTick(t))},t.exports=r}).call(this,e("_process"))},{_process:130}],3:[function(e,t,r){(function(r,n){function i(e){if(!arguments.length||void 0===e)throw new Error("constructor requires at least a location argument");if("string"!=typeof e)throw new Error("constructor requires a location string argument");this.location=e}var o=e("xtend"),s=e("./abstract-iterator"),a=e("./abstract-chained-batch");i.prototype.open=function(e,t){if("function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("open() requires a callback argument");if("object"!=typeof e&&(e={}),"function"==typeof this._open)return this._open(e,t);n.nextTick(t)},i.prototype.close=function(e){if("function"!=typeof e)throw new Error("close() requires a callback argument");if("function"==typeof this._close)return this._close(e);n.nextTick(e)},i.prototype.get=function(e,t,r){var i;if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("get() requires a callback argument");return(i=this._checkKeyValue(e,"key",this._isBuffer))?r(i):(this._isBuffer(e)||(e=String(e)),"object"!=typeof t&&(t={}),"function"==typeof this._get?this._get(e,t,r):void n.nextTick(function(){r(new Error("NotFound"))}))},i.prototype.put=function(e,t,r,i){var o;if("function"==typeof r&&(i=r),"function"!=typeof i)throw new Error("put() requires a callback argument");return(o=this._checkKeyValue(e,"key",this._isBuffer))?i(o):(o=this._checkKeyValue(t,"value",this._isBuffer))?i(o):(this._isBuffer(e)||(e=String(e)),this._isBuffer(t)||n.browser||(t=String(t)),"object"!=typeof r&&(r={}),"function"==typeof this._put?this._put(e,t,r,i):void n.nextTick(i))},i.prototype.del=function(e,t,r){var i;if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("del() requires a callback argument");return(i=this._checkKeyValue(e,"key",this._isBuffer))?r(i):(this._isBuffer(e)||(e=String(e)),"object"!=typeof t&&(t={}),"function"==typeof this._del?this._del(e,t,r):void n.nextTick(r))},i.prototype.batch=function(e,t,r){if(!arguments.length)return this._chainedBatch();if("function"==typeof t&&(r=t),"function"!=typeof r)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return r(new Error("batch(array) requires an array argument"));"object"!=typeof t&&(t={});for(var i,o,s=0,a=e.length;s<a;s++)if("object"==typeof(i=e[s])){if(o=this._checkKeyValue(i.type,"type",this._isBuffer))return r(o);if(o=this._checkKeyValue(i.key,"key",this._isBuffer))return r(o);if("put"==i.type&&(o=this._checkKeyValue(i.value,"value",this._isBuffer)))return r(o)}if("function"==typeof this._batch)return this._batch(e,t,r);n.nextTick(r)},i.prototype.approximateSize=function(e,t,r){if(null==e||null==t||"function"==typeof e||"function"==typeof t)throw new Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof r)throw new Error("approximateSize() requires a callback argument");if(this._isBuffer(e)||(e=String(e)),this._isBuffer(t)||(t=String(t)),"function"==typeof this._approximateSize)return this._approximateSize(e,t,r);n.nextTick(function(){r(null,0)})},i.prototype._setupIteratorOptions=function(e){var t=this;return e=o(e),["start","end","gt","gte","lt","lte"].forEach(function(r){e[r]&&t._isBuffer(e[r])&&0===e[r].length&&delete e[r]}),e.reverse=!!e.reverse,e.reverse&&e.lt&&(e.start=e.lt),e.reverse&&e.lte&&(e.start=e.lte),!e.reverse&&e.gt&&(e.start=e.gt),!e.reverse&&e.gte&&(e.start=e.gte),(e.reverse&&e.lt&&!e.lte||!e.reverse&&e.gt&&!e.gte)&&(e.exclusiveStart=!0),e},i.prototype.iterator=function(e){return"object"!=typeof e&&(e={}),e=this._setupIteratorOptions(e),"function"==typeof this._iterator?this._iterator(e):new s(this)},i.prototype._chainedBatch=function(){return new a(this)},i.prototype._isBuffer=function(e){return r.isBuffer(e)},i.prototype._checkKeyValue=function(e,t){if(null===e||void 0===e)return new Error(t+" cannot be `null` or `undefined`");if(this._isBuffer(e)){if(0===e.length)return new Error(t+" cannot be an empty Buffer")}else if(""===String(e))return new Error(t+" cannot be an empty String")},t.exports.AbstractLevelDOWN=i,t.exports.AbstractIterator=s,t.exports.AbstractChainedBatch=a}).call(this,{isBuffer:e("../is-buffer/index.js")},e("_process"))},{"../is-buffer/index.js":40,"./abstract-chained-batch":1,"./abstract-iterator":2,_process:130,xtend:4}],4:[function(e,t,r){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}return e}},{}],5:[function(e,t,r){(function(r){"use strict";function n(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}function i(e){return r.Buffer&&"function"==typeof r.Buffer.isBuffer?r.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function o(e){return Object.prototype.toString.call(e)}function s(e){return!i(e)&&("function"==typeof r.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function a(e){if(v.isFunction(e)){if(k)return e.name;var t=e.toString().match(S);return t&&t[1]}}function u(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function f(e){if(k||!v.isFunction(e))return v.inspect(e);var t=a(e);return"[Function"+(t?": "+t:"")+"]"}function l(e){return u(f(e.actual),128)+" "+e.operator+" "+u(f(e.expected),128)}function c(e,t,r,n,i){throw new x.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}function h(e,t){e||c(e,!0,t,"==",x.ok)}function d(e,t,r,a){if(e===t)return!0;if(i(e)&&i(t))return 0===n(e,t);if(v.isDate(e)&&v.isDate(t))return e.getTime()===t.getTime();if(v.isRegExp(e)&&v.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(s(e)&&s(t)&&o(e)===o(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===n(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(i(e)!==i(t))return!1;var u=(a=a||{actual:[],expected:[]}).actual.indexOf(e);return-1!==u&&u===a.expected.indexOf(t)||(a.actual.push(e),a.expected.push(t),g(e,t,r,a))}return r?e===t:e==t}function p(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function g(e,t,r,n){if(null===e||void 0===e||null===t||void 0===t)return!1;if(v.isPrimitive(e)||v.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=p(e),o=p(t);if(i&&!o||!i&&o)return!1;if(i)return e=E.call(e),t=E.call(t),d(e,t,r);var s,a,u=T(e),f=T(t);if(u.length!==f.length)return!1;for(u.sort(),f.sort(),a=u.length-1;a>=0;a--)if(u[a]!==f[a])return!1;for(a=u.length-1;a>=0;a--)if(s=u[a],!d(e[s],t[s],r,n))return!1;return!0}function b(e,t,r){d(e,t,!0)&&c(e,t,r,"notDeepStrictEqual",b)}function _(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function y(e){var t;try{e()}catch(e){t=e}return t}function m(e,t,r,n){var i;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=y(t),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&c(i,r,"Missing expected exception"+n);var o="string"==typeof n,s=!e&&v.isError(i),a=!e&&i&&!r;if((s&&o&&_(i,r)||a)&&c(i,r,"Got unwanted exception"+n),e&&i&&r&&!_(i,r)||!e&&i)throw i}var v=e("util/"),w=Object.prototype.hasOwnProperty,E=Array.prototype.slice,k="foo"===function(){}.name,x=t.exports=h,S=/\s*function\s+([^\(\s]*)\s*/;x.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=l(this),this.generatedMessage=!0);var t=e.stackStartFunction||c;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,i=a(t),o=n.indexOf("\n"+i);if(o>=0){var s=n.indexOf("\n",o+1);n=n.substring(s+1)}this.stack=n}}},v.inherits(x.AssertionError,Error),x.fail=c,x.ok=h,x.equal=function(e,t,r){e!=t&&c(e,t,r,"==",x.equal)},x.notEqual=function(e,t,r){e==t&&c(e,t,r,"!=",x.notEqual)},x.deepEqual=function(e,t,r){d(e,t,!1)||c(e,t,r,"deepEqual",x.deepEqual)},x.deepStrictEqual=function(e,t,r){d(e,t,!0)||c(e,t,r,"deepStrictEqual",x.deepStrictEqual)},x.notDeepEqual=function(e,t,r){d(e,t,!1)&&c(e,t,r,"notDeepEqual",x.notDeepEqual)},x.notDeepStrictEqual=b,x.strictEqual=function(e,t,r){e!==t&&c(e,t,r,"===",x.strictEqual)},x.notStrictEqual=function(e,t,r){e===t&&c(e,t,r,"!==",x.notStrictEqual)},x.throws=function(e,t,r){m(!0,e,t,r)},x.doesNotThrow=function(e,t,r){m(!1,e,t,r)},x.ifError=function(e){if(e)throw e};var T=Object.keys||function(e){var t=[];for(var r in e)w.call(e,r)&&t.push(r);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"util/":156}],6:[function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}function o(e,t,r){for(var n,o=[],s=t;s<r;s+=3)n=(e[s]<<16)+(e[s+1]<<8)+e[s+2],o.push(i(n));return o.join("")}r.byteLength=function(e){return 3*e.length/4-n(e)},r.toByteArray=function(e){var t,r,i,o,s,f=e.length;o=n(e),s=new u(3*f/4-o),r=o>0?f-4:f;var l=0;for(t=0;t<r;t+=4)i=a[e.charCodeAt(t)]<<18|a[e.charCodeAt(t+1)]<<12|a[e.charCodeAt(t+2)]<<6|a[e.charCodeAt(t+3)],s[l++]=i>>16&255,s[l++]=i>>8&255,s[l++]=255&i;return 2===o?(i=a[e.charCodeAt(t)]<<2|a[e.charCodeAt(t+1)]>>4,s[l++]=255&i):1===o&&(i=a[e.charCodeAt(t)]<<10|a[e.charCodeAt(t+1)]<<4|a[e.charCodeAt(t+2)]>>2,s[l++]=i>>8&255,s[l++]=255&i),s},r.fromByteArray=function(e){for(var t,r=e.length,n=r%3,i="",a=[],u=0,f=r-n;u<f;u+=16383)a.push(o(e,u,u+16383>f?f:u+16383));return 1===n?(t=e[r-1],i+=s[t>>2],i+=s[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=s[t>>10],i+=s[t>>4&63],i+=s[t<<2&63],i+="="),a.push(i),a.join("")};for(var s=[],a=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,c=f.length;l<c;++l)s[l]=f[l],a[f.charCodeAt(l)]=l;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},{}],7:[function(e,t,r){(function(r){function n(e){if(!(this instanceof n))return new n(e);if(this._bufs=[],this.length=0,"function"==typeof e){this._callback=e;var t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",function(e){e.on("error",t)}),this.on("unpipe",function(e){e.removeListener("error",t)})}else r.isBuffer(e)?this.append(e):Array.isArray(e)&&e.forEach(function(e){r.isBuffer(e)&&this.append(e)}.bind(this));i.call(this)}var i=e("readable-stream").Duplex;e("util").inherits(n,i),n.prototype._offset=function(e){for(var t,r=0,n=0;n<this._bufs.length;n++){if(t=r+this._bufs[n].length,e<t)return[n,e-r];r=t}},n.prototype.append=function(e){return this._bufs.push(r.isBuffer(e)?e:new r(e)),this.length+=e.length,this},n.prototype._write=function(e,t,r){this.append(e),r&&r()},n.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},n.prototype.end=function(e){i.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},n.prototype.get=function(e){return this.slice(e,e+1)[0]},n.prototype.slice=function(e,t){return this.copy(null,0,e,t)},n.prototype.copy=function(e,t,n,i){if(("number"!=typeof n||n<0)&&(n=0),("number"!=typeof i||i>this.length)&&(i=this.length),n>=this.length)return e||new r(0);if(i<=0)return e||new r(0);var o,s,a=!!e,u=this._offset(n),f=i-n,l=f,c=a&&t||0,h=u[1];if(0===n&&i==this.length){if(!a)return r.concat(this._bufs);for(s=0;s<this._bufs.length;s++)this._bufs[s].copy(e,c),c+=this._bufs[s].length;return e}if(l<=this._bufs[u[0]].length-h)return a?this._bufs[u[0]].copy(e,t,h,h+l):this._bufs[u[0]].slice(h,h+l);for(a||(e=new r(f)),s=u[0];s<this._bufs.length;s++){if(o=this._bufs[s].length-h,!(l>o)){this._bufs[s].copy(e,c,h,h+l);break}this._bufs[s].copy(e,c,h),c+=o,l-=o,h&&(h=0)}return e},n.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},n.prototype.consume=function(e){for(;this._bufs.length;){if(!(e>this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},n.prototype.duplicate=function(){for(var e=0,t=new n;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},n.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var t in e)!function(t){n.prototype[t]=function(r){return this.slice(r,r+e[t])[t](0)}}(t)}(),t.exports=n}).call(this,e("buffer").Buffer)},{buffer:18,"readable-stream":13,util:156}],8:[function(e,t,r){(function(r){function n(e){if(!(this instanceof n))return new n(e);a.call(this,e),u.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||r.nextTick(this.end.bind(this))}t.exports=n;var o=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},s=e("core-util-is");s.inherits=e("inherits");var a=e("./_stream_readable"),u=e("./_stream_writable");s.inherits(n,a),function(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}(o(u.prototype),function(e){n.prototype[e]||(n.prototype[e]=u.prototype[e])})}).call(this,e("_process"))},{"./_stream_readable":10,"./_stream_writable":12,_process:130,"core-util-is":21,inherits:39}],9:[function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);i.call(this,e)}t.exports=n;var i=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":11,"core-util-is":21,inherits:39}],10:[function(e,t,r){(function(r){function n(t,r){var n=(t=t||{}).highWaterMark;this.highWaterMark=n||0===n?n:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(R||(R=e("string_decoder/").StringDecoder),this.decoder=new R(t.encoding),this.encoding=t.encoding)}function i(e){if(!(this instanceof i))return new i(e);this._readableState=new n(e,this),this.readable=!0,T.call(this)}function o(e,t,r,n,i){var o=f(t,r);if(o)e.emit("error",o);else if(null===r||void 0===r)t.reading=!1,t.ended||l(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||i||n||(r=t.decoder.write(r)),t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):(t.reading=!1,t.buffer.push(r)),t.needReadable&&c(e),d(e,t);else i||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){if(e>=I)e=I;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}function u(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function f(e,t){var r=null;return x.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function l(e,t){if(t.decoder&&!t.ended){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.length>0?c(e):v(e)}function c(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?r.nextTick(function(){h(e)}):h(e))}function h(e){e.emit("readable")}function d(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(function(){p(e,t)}))}function p(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function g(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&b(e)}}function b(e){function t(e,t,i){!1===e.write(r)&&n.awaitDrain++}var r,n=e._readableState;for(n.awaitDrain=0;n.pipesCount&&null!==(r=e.read());)if(1===n.pipesCount?t(n.pipes):w(n.pipes,t),e.emit("data",r),n.awaitDrain>0)return;if(0===n.pipesCount)return n.flowing=!1,void(S.listenerCount(e,"data")>0&&y(e));n.ranOut=!0}function _(){this._readableState.ranOut&&(this._readableState.ranOut=!1,b(this))}function y(e,t){if(e._readableState.flowing)throw new Error("Cannot switch to old mode now.");var n=t||!1,i=!1;e.readable=!0,e.pipe=T.prototype.pipe,e.on=e.addListener=T.prototype.on,e.on("readable",function(){i=!0;for(var t;!n&&null!==(t=e.read());)e.emit("data",t);null===t&&(i=!1,e._readableState.needReadable=!0)}),e.pause=function(){n=!0,this.emit("pause")},e.resume=function(){n=!1,i?r.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function m(e,t){var r,n=t.buffer,i=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(s)r=n.shift();else if(!e||e>=i)r=o?n.join(""):x.concat(n,i),n.length=0;else if(e<n[0].length)r=(l=n[0]).slice(0,e),n[0]=l.slice(e);else if(e===n[0].length)r=n.shift();else{r=o?"":new x(e);for(var a=0,u=0,f=n.length;u<f&&a<e;u++){var l=n[0],c=Math.min(e-a,l.length);o?r+=l.slice(0,c):l.copy(r,a,0,c),c<l.length?n[0]=l.slice(c):n.shift(),a+=c}}return r}function v(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,r.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function w(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}function E(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}t.exports=i;var k=e("isarray"),x=e("buffer").Buffer;i.ReadableState=n;var S=e("events").EventEmitter;S.listenerCount||(S.listenerCount=function(e,t){return e.listeners(t).length});var T=e("stream"),A=e("core-util-is");A.inherits=e("inherits");var R;A.inherits(i,T),i.prototype.push=function(e,t){var r=this._readableState;return"string"!=typeof e||r.objectMode||(t=t||r.defaultEncoding)!==r.encoding&&(e=new x(e,t),t=""),o(this,r,e,t,!1)},i.prototype.unshift=function(e){return o(this,this._readableState,e,"",!0)},i.prototype.setEncoding=function(t){R||(R=e("string_decoder/").StringDecoder),this._readableState.decoder=new R(t),this._readableState.encoding=t};var I=8388608;i.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var r,n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return c(this),null;if(0===(e=u(e,t))&&t.ended)return r=null,t.length>0&&t.decoder&&(r=m(e,t),t.length-=r.length),0===t.length&&v(this),r;var i=t.needReadable;return t.length-e<=t.highWaterMark&&(i=!0),(t.ended||t.reading)&&(i=!1),i&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=u(n,t)),null===(r=e>0?m(e,t):null)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&v(this),r},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function n(e){e===l&&o()}function i(){e.end()}function o(){e.removeListener("close",a),e.removeListener("finish",u),e.removeListener("drain",d),e.removeListener("error",s),e.removeListener("unpipe",n),l.removeListener("end",i),l.removeListener("end",o),e._writableState&&!e._writableState.needDrain||d()}function s(t){f(),e.removeListener("error",s),0===S.listenerCount(e,"error")&&e.emit("error",t)}function a(){e.removeListener("finish",u),f()}function u(){e.removeListener("close",a),f()}function f(){l.unpipe(e)}var l=this,c=this._readableState;switch(c.pipesCount){case 0:c.pipes=e;break;case 1:c.pipes=[c.pipes,e];break;default:c.pipes.push(e)}c.pipesCount+=1;var h=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?i:o;c.endEmitted?r.nextTick(h):l.once("end",h),e.on("unpipe",n);var d=g(l);return e.on("drain",d),e._events&&e._events.error?k(e._events.error)?e._events.error.unshift(s):e._events.error=[s,e._events.error]:e.on("error",s),e.once("close",a),e.once("finish",u),e.emit("pipe",l),c.flowing||(this.on("readable",_),c.flowing=!0,r.nextTick(function(){b(l)})),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",_),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",_),t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}return-1===(i=E(t.pipes,e))?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var r=T.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||y(this),"readable"===e&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&c(this):this.read(0))}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){y(this),this.read(0),this.emit("resume")},i.prototype.pause=function(){y(this,!0),this.emit("pause")},i.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)&&(n.push(i)||(r=!0,e.pause()))});for(var i in e)"function"==typeof e[i]&&void 0===this[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return w(["error","close","destroy","pause","resume"],function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(t){r&&(r=!1,e.resume())},n},i._fromList=m}).call(this,e("_process"))},{_process:130,buffer:18,"core-util-is":21,events:26,inherits:39,isarray:42,stream:148,"string_decoder/":150}],11:[function(e,t,r){function n(e,t){this.afterTransform=function(e,r){return i(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);a.call(this,e);this._transformState=new n(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(e){s(t,e)}):s(t)})}function s(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=(e._readableState,e._transformState);if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=o;var a=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(o,a),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":8,"core-util-is":21,inherits:39}],12:[function(e,t,r){(function(r){function n(e,t,r){this.chunk=e,this.encoding=t,this.callback=r}function i(e,t){var r=(e=e||{}).highWaterMark;this.highWaterMark=r||0===r?r:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var n=!1===e.decodeStrings;this.decodeStrings=!n,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){d(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(t){var r=e("./_stream_duplex");if(!(this instanceof o||this instanceof r))return new o(t);this._writableState=new i(t,this),this.writable=!0,E.call(this)}function s(e,t,n){var i=new Error("write after end");e.emit("error",i),r.nextTick(function(){n(i)})}function a(e,t,n,i){var o=!0;if(!v.isBuffer(n)&&"string"!=typeof n&&null!==n&&void 0!==n&&!t.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s),r.nextTick(function(){i(s)}),o=!1}return o}function u(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=new v(t,r)),t}function f(e,t,r,i,o){r=u(t,r,i),v.isBuffer(r)&&(i="buffer");var s=t.objectMode?1:r.length;t.length+=s;var a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing?t.buffer.push(new n(r,i,o)):l(e,t,s,r,i,o),a}function l(e,t,r,n,i,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,e._write(n,i,t.onwrite),t.sync=!1}function c(e,t,n,i,o){n?r.nextTick(function(){o(i)}):o(i),e._writableState.errorEmitted=!0,e.emit("error",i)}function h(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function d(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if(h(n),t)c(e,n,i,t,o);else{var s=_(e,n);s||n.bufferProcessing||!n.buffer.length||b(e,n),i?r.nextTick(function(){p(e,n,s,o)}):p(e,n,s,o)}}function p(e,t,r,n){r||g(e,t),n(),r&&y(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function b(e,t){t.bufferProcessing=!0;for(var r=0;r<t.buffer.length;r++){var n=t.buffer[r],i=n.chunk,o=n.encoding,s=n.callback;if(l(e,t,t.objectMode?1:i.length,i,o,s),t.writing){r++;break}}t.bufferProcessing=!1,r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}function _(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function y(e,t){var r=_(e,t);return r&&(t.finished=!0,e.emit("finish")),r}function m(e,t,n){t.ending=!0,y(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n)),t.ended=!0}t.exports=o;var v=e("buffer").Buffer;o.WritableState=i;var w=e("core-util-is");w.inherits=e("inherits");var E=e("stream");w.inherits(o,E),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,r){var n=this._writableState,i=!1;return"function"==typeof t&&(r=t,t=null),v.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=function(){}),n.ended?s(this,0,r):a(this,n,e,r)&&(i=f(this,n,e,t,r)),i},o.prototype._write=function(e,t,r){r(new Error("not implemented"))},o.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),void 0!==e&&null!==e&&this.write(e,t),n.ending||n.finished||m(this,n,r)}}).call(this,e("_process"))},{"./_stream_duplex":8,_process:130,buffer:18,"core-util-is":21,inherits:39,stream:148}],13:[function(e,t,r){(function(n){var i=e("stream");(r=t.exports=e("./lib/_stream_readable.js")).Stream=i,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),n.browser||"disable"!==n.env.READABLE_STREAM||(t.exports=e("stream"))}).call(this,e("_process"))},{"./lib/_stream_duplex.js":8,"./lib/_stream_passthrough.js":9,"./lib/_stream_readable.js":10,"./lib/_stream_transform.js":11,"./lib/_stream_writable.js":12,_process:130,stream:148}],14:[function(e,t,r){},{}],15:[function(e,t,r){var n=e("level-js"),i=e("levelup"),o=e("level-filesystem"),s=i("level-filesystem",{db:n});t.exports=o(s)},{"level-filesystem":53,"level-js":61,levelup:80}],16:[function(e,t,r){(function(t,n){"use strict";function i(e){if("number"!=typeof e||e<r.DEFLATE||e>r.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}var o=e("assert"),s=e("pako/lib/zlib/zstream"),a=e("pako/lib/zlib/deflate.js"),u=e("pako/lib/zlib/inflate.js"),f=e("pako/lib/zlib/constants");for(var l in f)r[l]=f[l];r.NONE=0,r.DEFLATE=1,r.INFLATE=2,r.GZIP=3,r.GUNZIP=4,r.DEFLATERAW=5,r.INFLATERAW=6,r.UNZIP=7;i.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,o(this.init_done,"close before init"),o(this.mode<=r.UNZIP),this.mode===r.DEFLATE||this.mode===r.GZIP||this.mode===r.DEFLATERAW?a.deflateEnd(this.strm):this.mode!==r.INFLATE&&this.mode!==r.GUNZIP&&this.mode!==r.INFLATERAW&&this.mode!==r.UNZIP||u.inflateEnd(this.strm),this.mode=r.NONE,this.dictionary=null)},i.prototype.write=function(e,t,r,n,i,o,s){return this._write(!0,e,t,r,n,i,o,s)},i.prototype.writeSync=function(e,t,r,n,i,o,s){return this._write(!1,e,t,r,n,i,o,s)},i.prototype._write=function(e,i,s,a,u,f,l,c){if(o.equal(arguments.length,8),o(this.init_done,"write before init"),o(this.mode!==r.NONE,"already finalized"),o.equal(!1,this.write_in_progress,"write already in progress"),o.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,o.equal(!1,void 0===i,"must provide flush value"),this.write_in_progress=!0,i!==r.Z_NO_FLUSH&&i!==r.Z_PARTIAL_FLUSH&&i!==r.Z_SYNC_FLUSH&&i!==r.Z_FULL_FLUSH&&i!==r.Z_FINISH&&i!==r.Z_BLOCK)throw new Error("Invalid flush value");if(null==s&&(s=n.alloc(0),u=0,a=0),this.strm.avail_in=u,this.strm.input=s,this.strm.next_in=a,this.strm.avail_out=c,this.strm.output=f,this.strm.next_out=l,this.flush=i,e){var h=this;return t.nextTick(function(){h._process(),h._after()}),this}if(this._process(),this._checkError())return this._afterSync()},i.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},i.prototype._process=function(){var e=null;switch(this.mode){case r.DEFLATE:case r.GZIP:case r.DEFLATERAW:this.err=a.deflate(this.strm,this.flush);break;case r.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=r.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=r.GUNZIP):this.mode=r.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case r.INFLATE:case r.GUNZIP:case r.INFLATERAW:for(this.err=u.inflate(this.strm,this.flush),this.err===r.Z_NEED_DICT&&this.dictionary&&(this.err=u.inflateSetDictionary(this.strm,this.dictionary),this.err===r.Z_OK?this.err=u.inflate(this.strm,this.flush):this.err===r.Z_DATA_ERROR&&(this.err=r.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===r.GUNZIP&&this.err===r.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=u.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},i.prototype._checkError=function(){switch(this.err){case r.Z_OK:case r.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===r.Z_FINISH)return this._error("unexpected end of file"),!1;break;case r.Z_STREAM_END:break;case r.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},i.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},i.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},i.prototype.init=function(e,t,n,i,s){o(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),o(e>=8&&e<=15,"invalid windowBits"),o(t>=-1&&t<=9,"invalid compression level"),o(n>=1&&n<=9,"invalid memlevel"),o(i===r.Z_FILTERED||i===r.Z_HUFFMAN_ONLY||i===r.Z_RLE||i===r.Z_FIXED||i===r.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(t,e,n,i,s),this._setDictionary()},i.prototype.params=function(){throw new Error("deflateParams Not supported")},i.prototype.reset=function(){this._reset(),this._setDictionary()},i.prototype._init=function(e,t,n,i,o){switch(this.level=e,this.windowBits=t,this.memLevel=n,this.strategy=i,this.flush=r.Z_NO_FLUSH,this.err=r.Z_OK,this.mode!==r.GZIP&&this.mode!==r.GUNZIP||(this.windowBits+=16),this.mode===r.UNZIP&&(this.windowBits+=32),this.mode!==r.DEFLATERAW&&this.mode!==r.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new s,this.mode){case r.DEFLATE:case r.GZIP:case r.DEFLATERAW:this.err=a.deflateInit2(this.strm,this.level,r.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case r.INFLATE:case r.GUNZIP:case r.INFLATERAW:case r.UNZIP:this.err=u.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==r.Z_OK&&this._error("Init error"),this.dictionary=o,this.write_in_progress=!1,this.init_done=!0},i.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=r.Z_OK,this.mode){case r.DEFLATE:case r.DEFLATERAW:this.err=a.deflateSetDictionary(this.strm,this.dictionary)}this.err!==r.Z_OK&&this._error("Failed to set dictionary")}},i.prototype._reset=function(){switch(this.err=r.Z_OK,this.mode){case r.DEFLATE:case r.DEFLATERAW:case r.GZIP:this.err=a.deflateReset(this.strm);break;case r.INFLATE:case r.INFLATERAW:case r.GUNZIP:this.err=u.inflateReset(this.strm)}this.err!==r.Z_OK&&this._error("Failed to reset stream")},r.Zlib=i}).call(this,e("_process"),e("buffer").Buffer)},{_process:130,assert:5,buffer:18,"pako/lib/zlib/constants":97,"pako/lib/zlib/deflate.js":99,"pako/lib/zlib/inflate.js":101,"pako/lib/zlib/zstream":105}],17:[function(e,t,r){(function(t){"use strict";function n(e,t,r){function n(){for(var t;null!==(t=e.read());)o.push(t),s+=t.length;e.once("readable",n)}function i(){var t,n=null;s>=w?n=new RangeError(E):t=b.concat(o,s),o=[],e.close(),r(n,t)}var o=[],s=0;e.on("error",function(t){e.removeListener("end",i),e.removeListener("readable",n),r(t)}),e.on("end",i),e.end(t),n()}function i(e,t){if("string"==typeof t&&(t=b.from(t)),!b.isBuffer(t))throw new TypeError("Not a string or buffer");var r=e._finishFlushFlag;return e._processChunk(t,r)}function o(e){if(!(this instanceof o))return new o(e);d.call(this,e,y.DEFLATE)}function s(e){if(!(this instanceof s))return new s(e);d.call(this,e,y.INFLATE)}function a(e){if(!(this instanceof a))return new a(e);d.call(this,e,y.GZIP)}function u(e){if(!(this instanceof u))return new u(e);d.call(this,e,y.GUNZIP)}function f(e){if(!(this instanceof f))return new f(e);d.call(this,e,y.DEFLATERAW)}function l(e){if(!(this instanceof l))return new l(e);d.call(this,e,y.INFLATERAW)}function c(e){if(!(this instanceof c))return new c(e);d.call(this,e,y.UNZIP)}function h(e){return e===y.Z_NO_FLUSH||e===y.Z_PARTIAL_FLUSH||e===y.Z_SYNC_FLUSH||e===y.Z_FULL_FLUSH||e===y.Z_FINISH||e===y.Z_BLOCK}function d(e,t){var n=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||r.Z_DEFAULT_CHUNK,_.call(this,e),e.flush&&!h(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!h(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||y.Z_NO_FLUSH,this._finishFlushFlag=void 0!==e.finishFlush?e.finishFlush:y.Z_FINISH,e.chunkSize&&(e.chunkSize<r.Z_MIN_CHUNK||e.chunkSize>r.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<r.Z_MIN_WINDOWBITS||e.windowBits>r.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<r.Z_MIN_LEVEL||e.level>r.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<r.Z_MIN_MEMLEVEL||e.memLevel>r.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=r.Z_FILTERED&&e.strategy!=r.Z_HUFFMAN_ONLY&&e.strategy!=r.Z_RLE&&e.strategy!=r.Z_FIXED&&e.strategy!=r.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!b.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new y.Zlib(t);var i=this;this._hadError=!1,this._handle.onerror=function(e,t){p(i),i._hadError=!0;var n=new Error(e);n.errno=t,n.code=r.codes[t],i.emit("error",n)};var o=r.Z_DEFAULT_COMPRESSION;"number"==typeof e.level&&(o=e.level);var s=r.Z_DEFAULT_STRATEGY;"number"==typeof e.strategy&&(s=e.strategy),this._handle.init(e.windowBits||r.Z_DEFAULT_WINDOWBITS,o,e.memLevel||r.Z_DEFAULT_MEMLEVEL,s,e.dictionary),this._buffer=b.allocUnsafe(this._chunkSize),this._offset=0,this._level=o,this._strategy=s,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!n._handle},configurable:!0,enumerable:!0})}function p(e,r){r&&t.nextTick(r),e._handle&&(e._handle.close(),e._handle=null)}function g(e){e.emit("close")}var b=e("buffer").Buffer,_=e("stream").Transform,y=e("./binding"),m=e("util"),v=e("assert").ok,w=e("buffer").kMaxLength,E="Cannot create final Buffer. It would be larger than 0x"+w.toString(16)+" bytes";y.Z_MIN_WINDOWBITS=8,y.Z_MAX_WINDOWBITS=15,y.Z_DEFAULT_WINDOWBITS=15,y.Z_MIN_CHUNK=64,y.Z_MAX_CHUNK=1/0,y.Z_DEFAULT_CHUNK=16384,y.Z_MIN_MEMLEVEL=1,y.Z_MAX_MEMLEVEL=9,y.Z_DEFAULT_MEMLEVEL=8,y.Z_MIN_LEVEL=-1,y.Z_MAX_LEVEL=9,y.Z_DEFAULT_LEVEL=y.Z_DEFAULT_COMPRESSION;for(var k=Object.keys(y),x=0;x<k.length;x++){var S=k[x];S.match(/^Z/)&&Object.defineProperty(r,S,{enumerable:!0,value:y[S],writable:!1})}for(var T={Z_OK:y.Z_OK,Z_STREAM_END:y.Z_STREAM_END,Z_NEED_DICT:y.Z_NEED_DICT,Z_ERRNO:y.Z_ERRNO,Z_STREAM_ERROR:y.Z_STREAM_ERROR,Z_DATA_ERROR:y.Z_DATA_ERROR,Z_MEM_ERROR:y.Z_MEM_ERROR,Z_BUF_ERROR:y.Z_BUF_ERROR,Z_VERSION_ERROR:y.Z_VERSION_ERROR},A=Object.keys(T),R=0;R<A.length;R++){var I=A[R];T[T[I]]=I}Object.defineProperty(r,"codes",{enumerable:!0,value:Object.freeze(T),writable:!1}),r.Deflate=o,r.Inflate=s,r.Gzip=a,r.Gunzip=u,r.DeflateRaw=f,r.InflateRaw=l,r.Unzip=c,r.createDeflate=function(e){return new o(e)},r.createInflate=function(e){return new s(e)},r.createDeflateRaw=function(e){return new f(e)},r.createInflateRaw=function(e){return new l(e)},r.createGzip=function(e){return new a(e)},r.createGunzip=function(e){return new u(e)},r.createUnzip=function(e){return new c(e)},r.deflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),n(new o(t),e,r)},r.deflateSync=function(e,t){return i(new o(t),e)},r.gzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),n(new a(t),e,r)},r.gzipSync=function(e,t){return i(new a(t),e)},r.deflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),n(new f(t),e,r)},r.deflateRawSync=function(e,t){return i(new f(t),e)},r.unzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),n(new c(t),e,r)},r.unzipSync=function(e,t){return i(new c(t),e)},r.inflate=function(e,t,r){return"function"==typeof t&&(r=t,t={}),n(new s(t),e,r)},r.inflateSync=function(e,t){return i(new s(t),e)},r.gunzip=function(e,t,r){return"function"==typeof t&&(r=t,t={}),n(new u(t),e,r)},r.gunzipSync=function(e,t){return i(new u(t),e)},r.inflateRaw=function(e,t,r){return"function"==typeof t&&(r=t,t={}),n(new l(t),e,r)},r.inflateRawSync=function(e,t){return i(new l(t),e)},m.inherits(d,_),d.prototype.params=function(e,n,i){if(e<r.Z_MIN_LEVEL||e>r.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(n!=r.Z_FILTERED&&n!=r.Z_HUFFMAN_ONLY&&n!=r.Z_RLE&&n!=r.Z_FIXED&&n!=r.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==e||this._strategy!==n){var o=this;this.flush(y.Z_SYNC_FLUSH,function(){v(o._handle,"zlib binding closed"),o._handle.params(e,n),o._hadError||(o._level=e,o._strategy=n,i&&i())})}else t.nextTick(i)},d.prototype.reset=function(){return v(this._handle,"zlib binding closed"),this._handle.reset()},d.prototype._flush=function(e){this._transform(b.alloc(0),"",e)},d.prototype.flush=function(e,r){var n=this,i=this._writableState;("function"==typeof e||void 0===e&&!r)&&(r=e,e=y.Z_FULL_FLUSH),i.ended?r&&t.nextTick(r):i.ending?r&&this.once("end",r):i.needDrain?r&&this.once("drain",function(){return n.flush(e,r)}):(this._flushFlag=e,this.write(b.alloc(0),"",r))},d.prototype.close=function(e){p(this,e),t.nextTick(g,this)},d.prototype._transform=function(e,t,r){var n,i=this._writableState,o=(i.ending||i.ended)&&(!e||i.length===e.length);return null===e||b.isBuffer(e)?this._handle?(o?n=this._finishFlushFlag:(n=this._flushFlag,e.length>=i.length&&(this._flushFlag=this._opts.flush||y.Z_NO_FLUSH)),void this._processChunk(e,n,r)):r(new Error("zlib binding closed")):r(new Error("invalid input"))},d.prototype._processChunk=function(e,t,r){function n(f,h){if(this&&(this.buffer=null,this.callback=null),!a._hadError){var d=o-h;if(v(d>=0,"have should not go down"),d>0){var p=a._buffer.slice(a._offset,a._offset+d);a._offset+=d,u?a.push(p):(l.push(p),c+=p.length)}if((0===h||a._offset>=a._chunkSize)&&(o=a._chunkSize,a._offset=0,a._buffer=b.allocUnsafe(a._chunkSize)),0===h){if(s+=i-f,i=f,!u)return!0;var g=a._handle.write(t,e,s,i,a._buffer,a._offset,a._chunkSize);return g.callback=n,void(g.buffer=e)}if(!u)return!1;r()}}var i=e&&e.length,o=this._chunkSize-this._offset,s=0,a=this,u="function"==typeof r;if(!u){var f,l=[],c=0;this.on("error",function(e){f=e}),v(this._handle,"zlib binding closed");do{var h=this._handle.writeSync(t,e,s,i,this._buffer,this._offset,o)}while(!this._hadError&&n(h[0],h[1]));if(this._hadError)throw f;if(c>=w)throw p(this),new RangeError(E);var d=b.concat(l,c);return p(this),d}v(this._handle,"zlib binding closed");var g=this._handle.write(t,e,s,i,this._buffer,this._offset,o);g.buffer=e,g.callback=n},m.inherits(o,d),m.inherits(s,d),m.inherits(a,d),m.inherits(u,d),m.inherits(f,d),m.inherits(l,d),m.inherits(c,d)}).call(this,e("_process"))},{"./binding":16,_process:130,assert:5,buffer:18,stream:148,util:156}],18:[function(e,t,r){"use strict";function n(e){if(e>G)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=i.prototype,t}function i(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(e)}return o(e,t,r)}function o(e,t,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return H(e)?c(e,t,r):"string"==typeof e?f(e,t):h(e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function a(e,t,r){return s(e),e<=0?n(e):void 0!==t?"string"==typeof r?n(e).fill(t,r):n(e).fill(t):n(e)}function u(e){return s(e),n(e<0?0:0|d(e))}function f(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!i.isEncoding(t))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,t),o=n(r),s=o.write(e,t);return s!==r&&(o=o.slice(0,s)),o}function l(e){for(var t=e.length<0?0:0|d(e.length),r=n(t),i=0;i<t;i+=1)r[i]=255&e[i];return r}function c(e,t,r){if(t<0||e.byteLength<t)throw new RangeError("'offset' is out of bounds");if(e.byteLength<t+(r||0))throw new RangeError("'length' is out of bounds");var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),n.__proto__=i.prototype,n}function h(e){if(i.isBuffer(e)){var t=0|d(e.length),r=n(t);return 0===r.length?r:(e.copy(r,0,0,t),r)}if(e){if(Y(e)||"length"in e)return"number"!=typeof e.length||q(e.length)?n(0):l(e);if("Buffer"===e.type&&Array.isArray(e.data))return l(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(e){if(e>=G)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+G.toString(16)+" bytes");return 0|e}function p(e,t){if(i.isBuffer(e))return e.length;if(Y(e)||H(e))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Z(e).length;default:if(n)return U(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return O(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return R(this,t,r);case"latin1":case"binary":return I(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function b(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function _(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,q(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=i.from(t,n)),i.isBuffer(t))return 0===t.length?-1:y(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):y(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function y(e,t,r,n,i){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,u/=2,r/=2}var f;if(i){var l=-1;for(f=r;f<a;f++)if(o(e,f)===o(t,-1===l?0:f-l)){if(-1===l&&(l=f),f-l+1===u)return l*s}else-1!==l&&(f-=f-l),l=-1}else for(r+u>a&&(r=a-u),f=r;f>=0;f--){for(var c=!0,h=0;h<u;h++)if(o(e,f+h)!==o(t,h)){c=!1;break}if(c)return f}return-1}function m(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(t.substr(2*s,2),16);if(q(a))return s;e[r+s]=a}return s}function v(e,t,r,n){return W(U(t,e.length-r),e,r,n)}function w(e,t,r,n){return W(z(t),e,r,n)}function E(e,t,r,n){return w(e,t,r,n)}function k(e,t,r,n){return W(Z(t),e,r,n)}function x(e,t,r,n){return W(F(t,e.length-r),e,r,n)}function S(e,t,r){return 0===t&&r===e.length?V.fromByteArray(e):V.fromByteArray(e.slice(t,r))}function T(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o=e[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var u,f,l,c;switch(a){case 1:o<128&&(s=o);break;case 2:128==(192&(u=e[i+1]))&&(c=(31&o)<<6|63&u)>127&&(s=c);break;case 3:u=e[i+1],f=e[i+2],128==(192&u)&&128==(192&f)&&(c=(15&o)<<12|(63&u)<<6|63&f)>2047&&(c<55296||c>57343)&&(s=c);break;case 4:u=e[i+1],f=e[i+2],l=e[i+3],128==(192&u)&&128==(192&f)&&128==(192&l)&&(c=(15&o)<<18|(63&u)<<12|(63&f)<<6|63&l)>65535&&c<1114112&&(s=c)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=a}return A(n)}function A(e){var t=e.length;if(t<=X)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=X));return r}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function I(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function O(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=P(e[o]);return i}function L(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function B(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,r,n,o,s){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function j(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(e,t,r,n,i){return t=+t,r>>>=0,i||j(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(e,t,r,n,23,4),r+4}function C(e,t,r,n,i){return t=+t,r>>>=0,i||j(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(e,t,r,n,52,8),r+8}function M(e){if((e=e.trim().replace(J,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function P(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function z(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function F(e,t){for(var r,n,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}function Z(e){return V.toByteArray(M(e))}function W(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function H(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&"ArrayBuffer"===e.constructor.name&&"number"==typeof e.byteLength}function Y(e){return"function"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(e)}function q(e){return e!==e}var V=e("base64-js"),K=e("ieee754");r.Buffer=i,r.SlowBuffer=function(e){return+e!=e&&(e=0),i.alloc(+e)},r.INSPECT_MAX_BYTES=50;var G=2147483647;r.kMaxLength=G,i.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),i.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(e,t,r){return o(e,t,r)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(e,t,r){return a(e,t,r)},i.allocUnsafe=function(e){return u(e)},i.allocUnsafeSlow=function(e){return u(e)},i.isBuffer=function(e){return null!=e&&!0===e._isBuffer},i.compare=function(e,t){if(!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,s=Math.min(r,n);o<s;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=i.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var s=e[r];if(!i.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,o),o+=s.length}return n},i.byteLength=p,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},i.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?T(this,0,e):g.apply(this,arguments)},i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},i.prototype.compare=function(e,t,r,n,o){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,o>>>=0,this===e)return 0;for(var s=o-n,a=r-t,u=Math.min(s,a),f=this.slice(n,o),l=e.slice(t,r),c=0;c<u;++c)if(f[c]!==l[c]){s=f[c],a=l[c];break}return s<a?-1:a<s?1:0},i.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},i.prototype.indexOf=function(e,t,r){return _(this,e,t,r,!0)},i.prototype.lastIndexOf=function(e,t,r){return _(this,e,t,r,!1)},i.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return m(this,e,t,r);case"utf8":case"utf-8":return v(this,e,t,r);case"ascii":return w(this,e,t,r);case"latin1":case"binary":return E(this,e,t,r);case"base64":return k(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var X=4096;i.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=i.prototype,n},i.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||B(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},i.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||B(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},i.prototype.readUInt8=function(e,t){return e>>>=0,t||B(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return e>>>=0,t||B(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return e>>>=0,t||B(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return e>>>=0,t||B(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return e>>>=0,t||B(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||B(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},i.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||B(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},i.prototype.readInt8=function(e,t){return e>>>=0,t||B(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){e>>>=0,t||B(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt16BE=function(e,t){e>>>=0,t||B(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt32LE=function(e,t){return e>>>=0,t||B(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return e>>>=0,t||B(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return e>>>=0,t||B(e,4,this.length),K.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return e>>>=0,t||B(e,4,this.length),K.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return e>>>=0,t||B(e,8,this.length),K.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return e>>>=0,t||B(e,8,this.length),K.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||N(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},i.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||N(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},i.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,1,255,0),this[t]=255&e,t+1},i.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},i.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);N(this,e,t,r,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},i.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);N(this,e,t,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+r},i.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},i.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},i.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},i.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},i.prototype.writeFloatLE=function(e,t,r){return D(this,e,t,!0,r)},i.prototype.writeFloatBE=function(e,t,r){return D(this,e,t,!1,r)},i.prototype.writeDoubleLE=function(e,t,r){return C(this,e,t,!0,r)},i.prototype.writeDoubleBE=function(e,t,r){return C(this,e,t,!1,r)},i.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},i.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var s;if("number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var a=i.isBuffer(e)?e:new i(e,n),u=a.length;for(s=0;s<r-t;++s)this[s+t]=a[s%u]}return this};var J=/[^+/0-9A-Za-z-_]/g},{"base64-js":6,ieee754:38}],19:[function(e,t,r){(function(e){"use strict";function r(e){return Object.prototype.toString.call(e)}function n(t,r,n,o){function s(t,n){if(null===t)return null;if(0==n)return t;var l,c;if("object"!=typeof t)return t;if(i.isArray(t))l=[];else if(i.isRegExp(t))l=new RegExp(t.source,i.getRegExpFlags(t)),t.lastIndex&&(l.lastIndex=t.lastIndex);else if(i.isDate(t))l=new Date(t.getTime());else{if(f&&e.isBuffer(t))return l=new e(t.length),t.copy(l),l;void 0===o?(c=Object.getPrototypeOf(t),l=Object.create(c)):(l=Object.create(o),c=o)}if(r){var h=a.indexOf(t);if(-1!=h)return u[h];a.push(t),u.push(l)}for(var d in t){var p;c&&(p=Object.getOwnPropertyDescriptor(c,d)),p&&null==p.set||(l[d]=s(t[d],n-1))}return l}var a=[],u=[],f=void 0!==e;return void 0===r&&(r=!0),void 0===n&&(n=1/0),s(t,n)}var i={isArray:function(e){return Array.isArray(e)||"object"==typeof e&&"[object Array]"===r(e)},isDate:function(e){return"object"==typeof e&&"[object Date]"===r(e)},isRegExp:function(e){return"object"==typeof e&&"[object RegExp]"===r(e)},getRegExpFlags:function(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}};"object"==typeof t&&(t.exports=n),n.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t}}).call(this,e("buffer").Buffer)},{buffer:18}],20:[function(e,t,r){(function(r){function n(e,t){if(!(this instanceof n))return new n(e,t);"function"==typeof e&&(t=e,e={}),e||(e={});var r=e.encoding,i=!1;r?"u8"!==(r=String(r).toLowerCase())&&"uint8"!==r||(r="uint8array"):i=!0,l.call(this,{objectMode:!0}),this.encoding=r,this.shouldInferEncoding=i,t&&this.on("finish",function(){t(this.getBody())}),this.body=[]}function i(e){return/Array\]$/.test(Object.prototype.toString.call(e))}function o(e){return"string"==typeof e||i(e)||e&&"function"==typeof e.subarray}function s(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];"string"==typeof i?t.push(i):r.isBuffer(i)?t.push(i):o(i)?t.push(new r(i)):t.push(new r(String(i)))}return t=r.isBuffer(e[0])?(t=r.concat(t)).toString("utf8"):t.join("")}function a(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];r.isBuffer(i)?t.push(i):o(i)?t.push(new r(i)):t.push(new r(String(i)))}return r.concat(t)}function u(e){for(var t=[],r=0;r<e.length;r++)t.push.apply(t,e[r]);return t}function f(e){for(var t=0,n=0;n<e.length;n++)"string"==typeof e[n]&&(e[n]=new r(e[n])),t+=e[n].length;for(var i=new h(t),n=0,o=0;n<e.length;n++)for(var s=e[n],a=0;a<s.length;a++)i[o++]=s[a];return i}var l=e("readable-stream").Writable,c=e("inherits");if("undefined"==typeof Uint8Array)h=e("typedarray").Uint8Array;else var h=Uint8Array;t.exports=n,c(n,l),n.prototype._write=function(e,t,r){this.body.push(e),r()},n.prototype.inferEncoding=function(e){var t=void 0===e?this.body[0]:e;return r.isBuffer(t)?"buffer":"undefined"!=typeof Uint8Array&&t instanceof Uint8Array?"uint8array":Array.isArray(t)?"array":"string"==typeof t?"string":"[object Object]"===Object.prototype.toString.call(t)?"object":"buffer"},n.prototype.getBody=function(){return this.encoding||0!==this.body.length?(this.shouldInferEncoding&&(this.encoding=this.inferEncoding()),"array"===this.encoding?u(this.body):"string"===this.encoding?s(this.body):"buffer"===this.encoding?a(this.body):"uint8array"===this.encoding?f(this.body):this.body):[]};Array.isArray}).call(this,e("buffer").Buffer)},{buffer:18,inherits:39,"readable-stream":144,typedarray:152}],21:[function(e,t,r){(function(e){function t(e){return Object.prototype.toString.call(e)}r.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===t(e)},r.isBoolean=function(e){return"boolean"==typeof e},r.isNull=function(e){return null===e},r.isNullOrUndefined=function(e){return null==e},r.isNumber=function(e){return"number"==typeof e},r.isString=function(e){return"string"==typeof e},r.isSymbol=function(e){return"symbol"==typeof e},r.isUndefined=function(e){return void 0===e},r.isRegExp=function(e){return"[object RegExp]"===t(e)},r.isObject=function(e){return"object"==typeof e&&null!==e},r.isDate=function(e){return"[object Date]"===t(e)},r.isError=function(e){return"[object Error]"===t(e)||e instanceof Error},r.isFunction=function(e){return"function"==typeof e},r.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},r.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":40}],22:[function(e,t,r){(function(r,n){function i(e){s.call(this,"string"==typeof e?e:""),this._db=void 0,this._operations=[]}var o=e("util"),s=e("abstract-leveldown").AbstractLevelDOWN;o.inherits(i,s),i.prototype.setDb=function(e){this._db=e,this._operations.forEach(function(t){e[t.method].apply(e,t.args)})},i.prototype._open=function(e,t){return n.nextTick(t)},i.prototype._operation=function(e,t){if(this._db)return this._db[e].apply(this._db,t);this._operations.push({method:e,args:t})},"put get del batch approximateSize".split(" ").forEach(function(e){i.prototype["_"+e]=function(){this._operation(e,arguments)}}),i.prototype._isBuffer=function(e){return r.isBuffer(e)},i.prototype._iterator=function(){throw new TypeError("not implemented")},t.exports=i}).call(this,{isBuffer:e("../is-buffer/index.js")},e("_process"))},{"../is-buffer/index.js":40,_process:130,"abstract-leveldown":3,util:156}],23:[function(e,t,r){!function(e,n){"object"==typeof r?t.exports=n():e.download=n()}(this,function(){return function e(t,r,n){function i(e){var t=e.split(/[:;,]/),r=t[1],n=("base64"==t[2]?atob:decodeURIComponent)(t.pop()),i=n.length,o=0,s=new Uint8Array(i);for(o;o<i;++o)s[o]=n.charCodeAt(o);return new g([s],{type:r})}function o(e,t){if("download"in d)return d.href=e,d.setAttribute("download",b),d.className="download-js-link",d.innerHTML="downloading...",d.style.display="none",document.body.appendChild(d),setTimeout(function(){d.click(),document.body.removeChild(d),!0===t&&setTimeout(function(){u.URL.revokeObjectURL(d.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,f)),window.open(e)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=e),!0;var r=document.createElement("iframe");document.body.appendChild(r),!t&&/^data:/.test(e)&&(e="data:"+e.replace(/^data:([\w\/\-\+]+)/,f)),r.src=e,setTimeout(function(){document.body.removeChild(r)},333)}var s,a,u=window,f="application/octet-stream",l=n||f,c=t,h=!r&&!n&&c,d=document.createElement("a"),p=function(e){return String(e)},g=u.Blob||u.MozBlob||u.WebKitBlob||p,b=r||"download";if(g=g.call?g.bind(u):Blob,"true"===String(this)&&(l=(c=[c,l])[0],c=c[1]),h&&h.length<2048&&(b=h.split("/").pop().split("?")[0],d.href=h,-1!==d.href.indexOf(h))){var _=new XMLHttpRequest;return _.open("GET",h,!0),_.responseType="blob",_.onload=function(t){e(t.target.response,b,f)},setTimeout(function(){_.send()},0),_}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(c)){if(!(c.length>2096103.424&&g!==p))return navigator.msSaveBlob?navigator.msSaveBlob(i(c),b):o(c);l=(c=i(c)).type||f}else if(/([\x80-\xff])/.test(c)){var y=0,m=new Uint8Array(c.length),v=m.length;for(y;y<v;++y)m[y]=c.charCodeAt(y);c=new g([m],{type:l})}if(s=c instanceof g?c:new g([c],{type:l}),navigator.msSaveBlob)return navigator.msSaveBlob(s,b);if(u.URL)o(u.URL.createObjectURL(s),!0);else{if("string"==typeof s||s.constructor===p)try{return o("data:"+l+";base64,"+u.btoa(s))}catch(e){return o("data:"+l+","+encodeURIComponent(s))}(a=new FileReader).onload=function(e){o(this.result)},a.readAsDataURL(s)}return!0}})},{}],24:[function(e,t,r){function n(e,t,r){s(this,{type:e,name:e,cause:"string"!=typeof t?t:r,message:t&&"string"!=typeof t?t.message:t},"ewr")}function i(e,t){Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,arguments.callee),n.call(this,"CustomError",e,t)}function o(e,t,r){var o=function(r,i){n.call(this,t,r,i),"FilesystemError"==t&&(this.code=this.cause.code,this.path=this.cause.path,this.errno=this.cause.errno,this.message=(e.errno[this.cause.errno]?e.errno[this.cause.errno].description:this.cause.message)+(this.cause.path?" ["+this.cause.path+"]":"")),Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,arguments.callee)};return o.prototype=r?new r:new i,o}var s=e("prr");i.prototype=new Error,t.exports=function(e){var t=function(t,r){return o(e,t,r)};return{CustomError:i,FilesystemError:t("FilesystemError"),createError:t}}},{prr:131}],25:[function(e,t,r){var n=t.exports.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];t.exports.errno={},t.exports.code={},n.forEach(function(e){t.exports.errno[e.errno]=e,t.exports.code[e.code]=e}),t.exports.custom=e("./custom")(t.exports),t.exports.create=t.exports.custom.createError},{"./custom":24}],26:[function(e,t,r){function n(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=y(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}function i(e){return void 0===e._maxListeners?n.defaultMaxListeners:e._maxListeners}function o(e,t,r){if(t)e.call(r);else for(var n=e.length,i=b(e,n),o=0;o<n;++o)i[o].call(r)}function s(e,t,r,n){if(t)e.call(r,n);else for(var i=e.length,o=b(e,i),s=0;s<i;++s)o[s].call(r,n)}function a(e,t,r,n,i){if(t)e.call(r,n,i);else for(var o=e.length,s=b(e,o),a=0;a<o;++a)s[a].call(r,n,i)}function u(e,t,r,n,i,o){if(t)e.call(r,n,i,o);else for(var s=e.length,a=b(e,s),u=0;u<s;++u)a[u].call(r,n,i,o)}function f(e,t,r,n){if(t)e.apply(r,n);else for(var i=e.length,o=b(e,i),s=0;s<i;++s)o[s].apply(r,n)}function l(e,t,r,n){var o,s,a;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((s=e._events)?(s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),a=s[t]):(s=e._events=y(null),e._eventsCount=0),a){if("function"==typeof a?a=s[t]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),!a.warned&&(o=i(e))&&o>0&&a.length>o){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else a=s[t]=r,++e._eventsCount;return e}function c(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=v.call(c,n);return i.listener=r,n.wrapFn=i,i}function d(e,t,r){var n=e._events;if(!n)return[];var i=n[t];return i?"function"==typeof i?r?[i.listener||i]:[i]:r?_(i):b(i,i.length):[]}function p(e){var t=this._events;if(t){var r=t[e];if("function"==typeof r)return 1;if(r)return r.length}return 0}function g(e,t){for(var r=t,n=r+1,i=e.length;n<i;r+=1,n+=1)e[r]=e[n];e.pop()}function b(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function _(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}var y=Object.create||function(e){var t=function(){};return t.prototype=e,new t},m=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return r},v=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0;var w,E=10;try{var k={};Object.defineProperty&&Object.defineProperty(k,"x",{value:0}),w=0===k.x}catch(e){w=!1}w?Object.defineProperty(n,"defaultMaxListeners",{enumerable:!0,get:function(){return E},set:function(e){if("number"!=typeof e||e<0||e!==e)throw new TypeError('"defaultMaxListeners" must be a positive number');E=e}}):n.defaultMaxListeners=E,n.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},n.prototype.getMaxListeners=function(){return i(this)},n.prototype.emit=function(e){var t,r,n,i,l,c,h="error"===e;if(c=this._events)h=h&&null==c.error;else if(!h)return!1;if(h){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var d=new Error('Unhandled "error" event. ('+t+")");throw d.context=t,d}if(!(r=c[e]))return!1;var p="function"==typeof r;switch(n=arguments.length){case 1:o(r,p,this);break;case 2:s(r,p,this,arguments[1]);break;case 3:a(r,p,this,arguments[1],arguments[2]);break;case 4:u(r,p,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),l=1;l<n;l++)i[l-1]=arguments[l];f(r,p,this,i)}return!0},n.prototype.addListener=function(e,t){return l(this,e,t,!1)},n.prototype.on=n.prototype.addListener,n.prototype.prependListener=function(e,t){return l(this,e,t,!0)},n.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,h(this,e,t)),this},n.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,h(this,e,t)),this},n.prototype.removeListener=function(e,t){var r,n,i,o,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=y(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():g(r,i),1===r.length&&(n[e]=r[0]),n.removeListener&&this.emit("removeListener",e,s||t)}return this},n.prototype.removeAllListeners=function(e){var t,r,n;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=y(null),this._eventsCount=0):r[e]&&(0==--this._eventsCount?this._events=y(null):delete r[e]),this;if(0===arguments.length){var i,o=m(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=y(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},n.prototype.listeners=function(e){return d(this,e,!0)},n.prototype.rawListeners=function(e){return d(this,e,!1)},n.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},n.prototype.listenerCount=p,n.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],27:[function(e,t,r){var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString;t.exports=function(e,t,r){if("[object Function]"!==i.call(t))throw new TypeError("iterator must be a function");var o=e.length;if(o===+o)for(var s=0;s<o;s++)t.call(r,e[s],s,e);else for(var a in e)n.call(e,a)&&t.call(r,e[a],a,e)}},{}],28:[function(e,t,r){(function(t,n){var i=e("readable-stream/writable"),o=e("readable-stream/readable"),s=e("readable-stream/duplex"),a=new n(0),u=function(){},f=function(e){return"function"==typeof e?e:function(t){t(null,e)}},l=function(e,r){var n=!1,i=!1;return e._read=function(){n=!0},e.destroy=function(){i=!0},r(function(r,o){if(r)return e.emit("error",r);var s=function(){for(var t;null!==(t=o.read());)n=!1,e.push(t)};if(o.on("readable",function(){n&&s()}),o.on("end",function(){s(),e.push(null)}),o.on("error",function(t){e.emit("error",t)}),o.on("close",function(){s(),t.nextTick(function(){e.emit("close")})}),e._read=function(){n=!0,s()},e.destroy=function(){i||(i=!0,o.destroy&&o.destroy())},i)return i=!1,void e.destroy();n&&s()}),e},c=function(e,t){var r=u,n=!1;return e._write=function(e,t,n){r=n},e.destroy=function(){n=!0},e.write(a),t(function(t,i){if(t)return e.emit("error",t);i.on("close",function(){e.emit("close")}),i.on("error",function(t){e.emit("error",t)}),e._write=function(e,t,r){if(e===a)return r();i.write(e,t,r)};var o=e.emit;if(i.on("finish",function(){o.call(e,"finish")}),e.destroy=function(){n||(n=!0,i.destroy&&i.destroy())},e.emit=function(t){if("finish"!==t)return o.apply(e,arguments);i.end()},n)return n=!1,void e.destroy();r()}),e};r.readable=function(e,t){return 1===arguments.length?r.readable(null,e):(e||(e={}),l(new o(e),f(t)))},r.writable=function(e,t){return 1===arguments.length?r.writable(null,e):(e||(e={}),c(new i(e),f(t)))},r.duplex=function(e,t,n){if(2===arguments.length)return r.duplex(null,e,t);e||(e={});var i=new s(e);return c(i,f(t)),l(i,f(n)),i}}).call(this,e("_process"),e("buffer").Buffer)},{_process:130,buffer:18,"readable-stream/duplex":29,"readable-stream/readable":35,"readable-stream/writable":36}],29:[function(e,t,r){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":30}],30:[function(e,t,r){arguments[4][8][0].apply(r,arguments)},{"./_stream_readable":32,"./_stream_writable":34,_process:130,"core-util-is":21,dup:8,inherits:39}],31:[function(e,t,r){arguments[4][9][0].apply(r,arguments)},{"./_stream_transform":33,"core-util-is":21,dup:9,inherits:39}],32:[function(e,t,r){arguments[4][10][0].apply(r,arguments)},{_process:130,buffer:18,"core-util-is":21,dup:10,events:26,inherits:39,isarray:42,stream:148,"string_decoder/":150}],33:[function(e,t,r){arguments[4][11][0].apply(r,arguments)},{"./_stream_duplex":30,"core-util-is":21,dup:11,inherits:39}],34:[function(e,t,r){arguments[4][12][0].apply(r,arguments)},{"./_stream_duplex":30,_process:130,buffer:18,"core-util-is":21,dup:12,inherits:39,stream:148}],35:[function(e,t,r){arguments[4][13][0].apply(r,arguments)},{"./lib/_stream_duplex.js":30,"./lib/_stream_passthrough.js":31,"./lib/_stream_readable.js":32,"./lib/_stream_transform.js":33,"./lib/_stream_writable.js":34,_process:130,dup:13,stream:148}],36:[function(e,t,r){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":34}],37:[function(e,t,r){!function(e,r,n){"use strict";void 0!==t&&t.exports?t.exports=r():n.IDBStore=r()}(0,function(){"use strict";function e(e,t){var r,n;for(r in t)(n=t[r])!==a[r]&&n!==e[r]&&(e[r]=n);return e}function t(e){return"error"in e.target?"VersionError"==e.target.error.name:"errorCode"in e.target&&12==e.target.errorCode}var r=function(e){throw e},n=function(){},i={storeName:"Store",storePrefix:"IDBWrapper-",dbVersion:1,keyPath:"id",autoIncrement:!0,onStoreReady:function(){},onError:r,indexes:[],implementationPreference:["indexedDB","webkitIndexedDB","mozIndexedDB","shimIndexedDB"]},o=function(e,t){void 0===t&&"function"==typeof e&&(t=e),"[object Object]"!=Object.prototype.toString.call(e)&&(e={});for(var r in i)this[r]=void 0!==e[r]?e[r]:i[r];this.dbName=this.storePrefix+this.storeName,this.dbVersion=parseInt(this.dbVersion,10)||1,t&&(this.onStoreReady=t);var n="object"==typeof window?window:self,o=this.implementationPreference.filter(function(e){return e in n});this.implementation=o[0],this.idb=n[this.implementation],this.keyRange=n.IDBKeyRange||n.webkitIDBKeyRange||n.mozIDBKeyRange,this.consts={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange",NEXT:"next",NEXT_NO_DUPLICATE:"nextunique",PREV:"prev",PREV_NO_DUPLICATE:"prevunique"},this.openDB()},s={constructor:o,version:"1.7.1",db:null,dbName:null,dbVersion:null,store:null,storeName:null,storePrefix:null,keyPath:null,autoIncrement:null,indexes:null,implementationPreference:null,implementation:"",onStoreReady:null,onError:null,_insertIdCount:0,openDB:function(){var e=this.idb.open(this.dbName,this.dbVersion),r=!1;e.onerror=function(e){if(t(e))this.onError(new Error("The version number provided is lower than the existing one."));else{var r;if(e.target.error)r=e.target.error;else{var n="IndexedDB unknown error occurred when opening DB "+this.dbName+" version "+this.dbVersion;"errorCode"in e.target&&(n+=" with error code "+e.target.errorCode),r=new Error(n)}this.onError(r)}}.bind(this),e.onsuccess=function(e){if(!r)if(this.db)this.onStoreReady();else if(this.db=e.target.result,"string"!=typeof this.db.version)if(this.db.objectStoreNames.contains(this.storeName)){var t=this.db.transaction([this.storeName],this.consts.READ_ONLY);this.store=t.objectStore(this.storeName);var n=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(e){var t=e.name;if(!t)return r=!0,void this.onError(new Error("Cannot create index: No index name given."));if(this.normalizeIndexData(e),this.hasIndex(t)){var i=this.store.index(t);this.indexComplies(i,e)||(r=!0,this.onError(new Error('Cannot modify index "'+t+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),n.splice(n.indexOf(t),1)}else r=!0,this.onError(new Error('Cannot create new index "'+t+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))},this),n.length&&(r=!0,this.onError(new Error('Cannot delete index(es) "'+n.toString()+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),r||this.onStoreReady()}else this.onError(new Error("Object store couldn't be created."));else this.onError(new Error("The IndexedDB implementation in this browser is outdated. Please upgrade your browser."))}.bind(this),e.onupgradeneeded=function(e){if(this.db=e.target.result,this.db.objectStoreNames.contains(this.storeName))this.store=e.target.transaction.objectStore(this.storeName);else{var t={autoIncrement:this.autoIncrement};null!==this.keyPath&&(t.keyPath=this.keyPath),this.store=this.db.createObjectStore(this.storeName,t)}var n=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(e){var t=e.name;if(t||(r=!0,this.onError(new Error("Cannot create index: No index name given."))),this.normalizeIndexData(e),this.hasIndex(t)){var i=this.store.index(t);this.indexComplies(i,e)||(this.store.deleteIndex(t),this.store.createIndex(t,e.keyPath,{unique:e.unique,multiEntry:e.multiEntry})),n.splice(n.indexOf(t),1)}else this.store.createIndex(t,e.keyPath,{unique:e.unique,multiEntry:e.multiEntry})},this),n.length&&n.forEach(function(e){this.store.deleteIndex(e)},this)}.bind(this)},deleteDatabase:function(e,t){if(this.idb.deleteDatabase){this.db.close();var r=this.idb.deleteDatabase(this.dbName);r.onsuccess=e,r.onerror=t}else t(new Error("Browser does not support IndexedDB deleteDatabase!"))},put:function(e,t,i,o){null!==this.keyPath&&(o=i,i=t,t=e),o||(o=r),i||(i=n);var s,a=!1,u=null,f=this.db.transaction([this.storeName],this.consts.READ_WRITE);return f.oncomplete=function(){(a?i:o)(u)},f.onabort=o,f.onerror=o,null!==this.keyPath?(this._addIdPropertyIfNeeded(t),s=f.objectStore(this.storeName).put(t)):s=f.objectStore(this.storeName).put(t,e),s.onsuccess=function(e){a=!0,u=e.target.result},s.onerror=o,f},get:function(e,t,i){i||(i=r),t||(t=n);var o=!1,s=null,a=this.db.transaction([this.storeName],this.consts.READ_ONLY);a.oncomplete=function(){(o?t:i)(s)},a.onabort=i,a.onerror=i;var u=a.objectStore(this.storeName).get(e);return u.onsuccess=function(e){o=!0,s=e.target.result},u.onerror=i,a},remove:function(e,t,i){i||(i=r),t||(t=n);var o=!1,s=null,a=this.db.transaction([this.storeName],this.consts.READ_WRITE);a.oncomplete=function(){(o?t:i)(s)},a.onabort=i,a.onerror=i;var u=a.objectStore(this.storeName).delete(e);return u.onsuccess=function(e){o=!0,s=e.target.result},u.onerror=i,a},batch:function(e,t,i){if(i||(i=r),t||(t=n),"[object Array]"!=Object.prototype.toString.call(e))i(new Error("dataArray argument must be of type Array."));else if(0===e.length)return t(!0);var o=e.length,s=!1,a=!1,u=this.db.transaction([this.storeName],this.consts.READ_WRITE);u.oncomplete=function(){(a?t:i)(a)},u.onabort=i,u.onerror=i;var f=function(){0!==--o||s||(s=!0,a=!0)};return e.forEach(function(e){var t=e.type,r=e.key,n=e.value,o=function(e){u.abort(),s||(s=!0,i(e,t,r))};if("remove"==t){var a=u.objectStore(this.storeName).delete(r);a.onsuccess=f,a.onerror=o}else if("put"==t){var l;null!==this.keyPath?(this._addIdPropertyIfNeeded(n),l=u.objectStore(this.storeName).put(n)):l=u.objectStore(this.storeName).put(n,r),l.onsuccess=f,l.onerror=o}},this),u},putBatch:function(e,t,r){var n=e.map(function(e){return{type:"put",value:e}});return this.batch(n,t,r)},upsertBatch:function(e,t,i,o){"function"==typeof t&&(o=i=t,t={}),o||(o=r),i||(i=n),t||(t={}),"[object Array]"!=Object.prototype.toString.call(e)&&o(new Error("dataArray argument must be of type Array."));var s=t.keyField||this.keyPath,a=e.length,u=!1,f=!1,l=0,c=this.db.transaction([this.storeName],this.consts.READ_WRITE);c.oncomplete=function(){f?i(e):o(!1)},c.onabort=o,c.onerror=o;var h=function(t){e[l++][s]=t.target.result,0!==--a||u||(u=!0,f=!0)};return e.forEach(function(e){var t,r=e.key;null!==this.keyPath?(this._addIdPropertyIfNeeded(e),t=c.objectStore(this.storeName).put(e)):t=c.objectStore(this.storeName).put(e,r),t.onsuccess=h,t.onerror=function(e){c.abort(),u||(u=!0,o(e))}},this),c},removeBatch:function(e,t,r){var n=e.map(function(e){return{type:"remove",key:e}});return this.batch(n,t,r)},getBatch:function(e,t,i,o){if(i||(i=r),t||(t=n),o||(o="sparse"),"[object Array]"!=Object.prototype.toString.call(e))i(new Error("keyArray argument must be of type Array."));else if(0===e.length)return t([]);var s=[],a=e.length,u=!1,f=!1,l=null,c=this.db.transaction([this.storeName],this.consts.READ_ONLY);c.oncomplete=function(){(f?t:i)(l)},c.onabort=i,c.onerror=i;var h=function(e){e.target.result||"dense"==o?s.push(e.target.result):"sparse"==o&&s.length++,0===--a&&(u=!0,f=!0,l=s)};return e.forEach(function(e){var t=c.objectStore(this.storeName).get(e);t.onsuccess=h,t.onerror=function(e){u=!0,l=e,i(e),c.abort()}},this),c},getAll:function(e,t){t||(t=r),e||(e=n);var i=this.db.transaction([this.storeName],this.consts.READ_ONLY),o=i.objectStore(this.storeName);return o.getAll?this._getAllNative(i,o,e,t):this._getAllCursor(i,o,e,t),i},_getAllNative:function(e,t,r,n){var i=!1,o=null;e.oncomplete=function(){(i?r:n)(o)},e.onabort=n,e.onerror=n;var s=t.getAll();s.onsuccess=function(e){i=!0,o=e.target.result},s.onerror=n},_getAllCursor:function(e,t,r,n){var i=[],o=!1,s=null;e.oncomplete=function(){(o?r:n)(s)},e.onabort=n,e.onerror=n;var a=t.openCursor();a.onsuccess=function(e){var t=e.target.result;t?(i.push(t.value),t.continue()):(o=!0,s=i)},a.onError=n},clear:function(e,t){t||(t=r),e||(e=n);var i=!1,o=null,s=this.db.transaction([this.storeName],this.consts.READ_WRITE);s.oncomplete=function(){(i?e:t)(o)},s.onabort=t,s.onerror=t;var a=s.objectStore(this.storeName).clear();return a.onsuccess=function(e){i=!0,o=e.target.result},a.onerror=t,s},_addIdPropertyIfNeeded:function(e){void 0===e[this.keyPath]&&(e[this.keyPath]=this._insertIdCount+++Date.now())},getIndexList:function(){return this.store.indexNames},hasIndex:function(e){return this.store.indexNames.contains(e)},normalizeIndexData:function(e){e.keyPath=e.keyPath||e.name,e.unique=!!e.unique,e.multiEntry=!!e.multiEntry},indexComplies:function(e,t){return["keyPath","unique","multiEntry"].every(function(r){if("multiEntry"==r&&void 0===e[r]&&!1===t[r])return!0;if("keyPath"==r&&"[object Array]"==Object.prototype.toString.call(t[r])){var n=t.keyPath,i=e.keyPath;if("string"==typeof i)return n.toString()==i;if("function"!=typeof i.contains&&"function"!=typeof i.indexOf)return!1;if(i.length!==n.length)return!1;for(var o=0,s=n.length;o<s;o++)if(!(i.contains&&i.contains(n[o])||i.indexOf(-1!==n[o])))return!1;return!0}return t[r]==e[r]})},iterate:function(t,n){var i="desc"==(n=e({index:null,order:"ASC",autoContinue:!0,filterDuplicates:!1,keyRange:null,writeAccess:!1,onEnd:null,onError:r,limit:1/0,offset:0,allowItemRejection:!1},n||{})).order.toLowerCase()?"PREV":"NEXT";n.filterDuplicates&&(i+="_NO_DUPLICATE");var o=!1,s=this.db.transaction([this.storeName],this.consts[n.writeAccess?"READ_WRITE":"READ_ONLY"]),a=s.objectStore(this.storeName);n.index&&(a=a.index(n.index));var u=0;s.oncomplete=function(){o?n.onEnd?n.onEnd():t(null):n.onError(null)},s.onabort=n.onError,s.onerror=n.onError;var f=a.openCursor(n.keyRange,this.consts[i]);return f.onerror=n.onError,f.onsuccess=function(e){var r=e.target.result;if(r)if(n.offset)r.advance(n.offset),n.offset=0;else{var i=t(r.value,r,s);n.allowItemRejection&&!1===i||u++,n.autoContinue&&(u+n.offset<n.limit?r.continue():o=!0)}else o=!0},s},query:function(e,t){var r=[],n=0;return t=t||{},t.autoContinue=!0,t.writeAccess=!1,t.allowItemRejection=!!t.filter,t.onEnd=function(){e(r,n)},this.iterate(function(e){n++;var i=!t.filter||t.filter(e);return!1!==i&&r.push(e),i},t)},count:function(t,n){var i=(n=e({index:null,keyRange:null},n||{})).onError||r,o=!1,s=null,a=this.db.transaction([this.storeName],this.consts.READ_ONLY);a.oncomplete=function(){(o?t:i)(s)},a.onabort=i,a.onerror=i;var u=a.objectStore(this.storeName);n.index&&(u=u.index(n.index));var f=u.count(n.keyRange);return f.onsuccess=function(e){o=!0,s=e.target.result},f.onError=i,a},makeKeyRange:function(e){var t,r=void 0!==e.lower,n=void 0!==e.upper;switch(!0){case void 0!==e.only:t=this.keyRange.only(e.only);break;case r&&n:t=this.keyRange.bound(e.lower,e.upper,e.excludeLower,e.excludeUpper);break;case r:t=this.keyRange.lowerBound(e.lower,e.excludeLower);break;case n:t=this.keyRange.upperBound(e.upper,e.excludeUpper);break;default:throw new Error('Cannot create KeyRange. Provide one or both of "lower" or "upper" value, or an "only" value.')}return t}},a={};return o.prototype=s,o.version=s.version,o},this)},{}],38:[function(e,t,r){r.read=function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,f=u>>1,l=-7,c=r?i-1:0,h=r?-1:1,d=e[t+c];for(c+=h,o=d&(1<<-l)-1,d>>=-l,l+=a;l>0;o=256*o+e[t+c],c+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+c],c+=h,l-=8);if(0===o)o=1-f;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=f}return(d?-1:1)*s*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var s,a,u,f=8*o-i-1,l=(1<<f)-1,c=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+c>=1?h/u:h*Math.pow(2,1-c))*u>=2&&(s++,u/=2),s+c>=l?(a=0,s=l):s+c>=1?(a=(t*u-1)*Math.pow(2,i),s+=c):(a=t*Math.pow(2,c-1)*Math.pow(2,i),s=0));i>=8;e[r+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,f+=i;f>0;e[r+d]=255&s,d+=p,s/=256,f-=8);e[r+d-p]|=128*g}},{}],39:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],40:[function(e,t,r){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}t.exports=function(e){return null!=e&&(n(e)||i(e)||!!e._isBuffer)}},{}],41:[function(e,t,r){var n=Object.prototype,i=n.hasOwnProperty,o=n.toString,s=function(e){return e!==e},a={boolean:1,number:1,string:1,undefined:1},u=t.exports={};u.a=u.type=function(e,t){return typeof e===t},u.defined=function(e){return void 0!==e},u.empty=function(e){var t,r=o.call(e);if("[object Array]"===r||"[object Arguments]"===r)return 0===e.length;if("[object Object]"===r){for(t in e)if(i.call(e,t))return!1;return!0}return"[object String]"===r&&""===e},u.equal=function(e,t){var r,n=o.call(e);if(n!==o.call(t))return!1;if("[object Object]"===n){for(r in e)if(!u.equal(e[r],t[r]))return!1;return!0}if("[object Array]"===n){if((r=e.length)!==t.length)return!1;for(;--r;)if(!u.equal(e[r],t[r]))return!1;return!0}return"[object Function]"===n?e.prototype===t.prototype:"[object Date]"===n?e.getTime()===t.getTime():e===t},u.hosted=function(e,t){var r=typeof t[e];return"object"===r?!!t[e]:!a[r]},u.instance=u.instanceof=function(e,t){return e instanceof t},u.null=function(e){return null===e},u.undefined=function(e){return void 0===e},u.arguments=function(e){var t="[object Arguments]"===o.call(e),r=!u.array(e)&&u.arraylike(e)&&u.object(e)&&u.fn(e.callee);return t||r},u.array=function(e){return"[object Array]"===o.call(e)},u.arguments.empty=function(e){return u.arguments(e)&&0===e.length},u.array.empty=function(e){return u.array(e)&&0===e.length},u.arraylike=function(e){return!!e&&!u.boolean(e)&&i.call(e,"length")&&isFinite(e.length)&&u.number(e.length)&&e.length>=0},u.boolean=function(e){return"[object Boolean]"===o.call(e)},u.false=function(e){return u.boolean(e)&&(!1===e||!1===e.valueOf())},u.true=function(e){return u.boolean(e)&&(!0===e||!0===e.valueOf())},u.date=function(e){return"[object Date]"===o.call(e)},u.element=function(e){return void 0!==e&&"undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&1===e.nodeType},u.error=function(e){return"[object Error]"===o.call(e)},u.fn=u.function=function(e){return"undefined"!=typeof window&&e===window.alert||"[object Function]"===o.call(e)},u.number=function(e){return"[object Number]"===o.call(e)},u.infinite=function(e){return e===1/0||e===-1/0},u.decimal=function(e){return u.number(e)&&!s(e)&&!u.infinite(e)&&e%1!=0},u.divisibleBy=function(e,t){var r=u.infinite(e),n=u.infinite(t),i=u.number(e)&&!s(e)&&u.number(t)&&!s(t)&&0!==t;return r||n||i&&e%t==0},u.int=function(e){return u.number(e)&&!s(e)&&e%1==0},u.maximum=function(e,t){if(s(e))throw new TypeError("NaN is not a valid value");if(!u.arraylike(t))throw new TypeError("second argument must be array-like");for(var r=t.length;--r>=0;)if(e<t[r])return!1;return!0},u.minimum=function(e,t){if(s(e))throw new TypeError("NaN is not a valid value");if(!u.arraylike(t))throw new TypeError("second argument must be array-like");for(var r=t.length;--r>=0;)if(e>t[r])return!1;return!0},u.nan=function(e){return!u.number(e)||e!==e},u.even=function(e){return u.infinite(e)||u.number(e)&&e===e&&e%2==0},u.odd=function(e){return u.infinite(e)||u.number(e)&&e===e&&e%2!=0},u.ge=function(e,t){if(s(e)||s(t))throw new TypeError("NaN is not a valid value");return!u.infinite(e)&&!u.infinite(t)&&e>=t},u.gt=function(e,t){if(s(e)||s(t))throw new TypeError("NaN is not a valid value");return!u.infinite(e)&&!u.infinite(t)&&e>t},u.le=function(e,t){if(s(e)||s(t))throw new TypeError("NaN is not a valid value");return!u.infinite(e)&&!u.infinite(t)&&e<=t},u.lt=function(e,t){if(s(e)||s(t))throw new TypeError("NaN is not a valid value");return!u.infinite(e)&&!u.infinite(t)&&e<t},u.within=function(e,t,r){if(s(e)||s(t)||s(r))throw new TypeError("NaN is not a valid value");if(!u.number(e)||!u.number(t)||!u.number(r))throw new TypeError("all arguments must be numbers");return u.infinite(e)||u.infinite(t)||u.infinite(r)||e>=t&&e<=r},u.object=function(e){return e&&"[object Object]"===o.call(e)},u.hash=function(e){return u.object(e)&&e.constructor===Object&&!e.nodeType&&!e.setInterval},u.regexp=function(e){return"[object RegExp]"===o.call(e)},u.string=function(e){return"[object String]"===o.call(e)}},{}],42:[function(e,t,r){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],43:[function(e,t,r){var n=e("buffer").Buffer;t.exports=function(e){return n.isBuffer(e)||/\[object (.+Array|Array.+)\]/.test(Object.prototype.toString.call(e))}},{buffer:18}],44:[function(e,t,r){(function(r,n){var i=e("readable-stream/writable"),o=e("readable-stream/readable"),s=e("level-peek"),a=e("util"),u=e("once"),f=new n(0),l={encode:function(e){return"string"==typeof e?e=new n(e):e},decode:function(e){return n.isBuffer(e)?e:new n(e)},buffer:!0,type:"raw"},c=function(){},h=function(e){return e=e.toString(16),"00000000".slice(0,-e.length)+e},d=function(e,t){var r=new n(t);return e.copy(r),r};t.exports=function(e,t){t||(t={});var p={},g=t.blockSize||65536,b=t.batch||100,_=new n(g);e.put("\0","ignore",c);var y={},m=function(t,r,i,o,s){var a=function(){--y[t].locks||delete y[t]},u=function(e){if(e.locks++,!e.block&&!r)return e.block=i,void s(null,e.block,a);e.block||(e.block=new n(g)),e.block.length<r+i.length&&(e.block=d(e.block,r+i.length)),i.copy(e.block,r),!o&&r+i.length<e.block.length&&(e.block=e.block.slice(0,r+i.length)),s(null,e.block,a)};if(y[t])return u(y[t]);e.get(t,{valueEncoding:l},function(e,r){if(e&&!e.notFound)return s(e);y[t]||(y[t]={locks:0,block:r}),u(y[t])})},v=function(e,t){if(!(this instanceof v))return new v(e,t);t||(t={}),this.name=e,this.blocks=[],this.batch=[],this.bytesWritten=0,this.truncate=!t.append,this.append=t.append,this._shouldInitAppend=this.append&&void 0===t.start,this._destroyed=!1,this._init(t.start||0),i.call(this)};a.inherits(v,i),v.prototype._init=function(e){this.blockIndex=e/g|0,this.blockOffset=e-this.blockIndex*g,this.blockLength=this.blockOffset},v.prototype._flush=function(t){if(!this.batch.length)return t();var r=this.batch[this.batch.length-1].key,n=this.batch;if(this.batch=[],!this.truncate)return e.batch(n,t);this.truncate=!1,this._truncate(n,r,t)},v.prototype._truncate=function(t,r,n){n=u(n);var i=[],o=e.createKeyStream({start:r,end:this.name+""});o.on("error",n),o.on("data",function(e){i.push({type:"del",key:e})}),o.on("end",function(){i.push.apply(i,t),e.batch(i,n)})},v.prototype._writeBlock=function(e){var t=1===this.blocks.length?this.blocks[0]:n.concat(this.blocks,this.blockLength-this.blockOffset),r=this.blockIndex,i=this.blockOffset,o=this;this.blockOffset=0,this.blockLength=0,this.blockIndex++,this.blocks=[];var s=this.name+""+h(r),a=function(e,t,r){return e.length&&o.batch.push({type:"put",key:s,value:e,valueEncoding:l}),!t&&o.batch.length<b?r():o._flush(r)};return(i||t.length!==g)&&(i||this.append)?void m(s,i,t,this.append,function(t,r,n){if(t)return e(t);a(r,!0,function(t){n(),e(t)})}):a(t,!1,e)},v.prototype._initAppend=function(e,t,r){var n=this;this._shouldInitAppend=!1,p.size(this.name,function(i,o){if(i)return r(i);n._init(o),n._write(e,t,r)})},v.prototype._write=function(e,t,r){if(!e.length||this._destroyed)return r();if(this._shouldInitAppend)return this._initAppend(e,t,r);var n,i=this,o=g-this.blockLength,s=function(e){return e?r(e):n?i._write(n,t,r):void r()};if(e.length>o&&(n=e.slice(o),e=e.slice(0,o)),this.bytesWritten+=e.length,this.blockLength+=e.length,this.blocks.push(e),e.length<o)return s();this._writeBlock(s)},v.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,r.nextTick(this.emit.bind(this,"close")))},v.prototype.end=function(e){var t=this,r=arguments;e&&"function"!=typeof e&&(this.write(e),e=f),this.write(f,function(){t._writeBlock(function(e){if(e)return t.emit("error",e);t._flush(function(e){if(e)return t.emit("error",e);i.prototype.end.apply(t,r)})})})};var w=function(t,r){r||(r={});var n=this,i=r.start||0,s=i/g|0,a=i-s*g,u=t+""+h(s);this.name=t,this._missing=("number"==typeof r.end?r.end:1/0)-i+1,this._paused=!1,this._destroyed=!1,this._reader=e.createReadStream({start:u,end:t+"",valueEncoding:l});var f=function(e){return u=t+""+h(++s),!!n._missing&&(!(!a||(e=e.slice(a),a=0,e.length))||(e.length>n._missing&&(e=e.slice(0,n._missing)),n._missing-=e.length,n._pause(!n.push(e)),!!n._missing))};this._reader.on("data",function(e){for(;e.key>u;)if(!f(_))return;f(e.value)}),this._reader.on("error",function(e){n.emit("error",e)}),this._reader.on("end",function(){n.push(null)}),o.call(this)};return a.inherits(w,o),w.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this._reader.destroy(),r.nextTick(this.emit.bind(this,"close")))},w.prototype._pause=function(e){this._paused!==e&&(this._paused=e,this._paused?this._reader.pause():this._reader.resume())},w.prototype._read=function(){this._pause(!1)},p.remove=function(t,r){r=u(r||c);var n=[],i=e.createKeyStream({start:t+"",end:t+""});i.on("error",r),i.on("data",function(e){n.push({type:"del",key:e})}),i.on("end",function(){e.batch(n,r)})},p.size=function(t,r){s.last(e,{start:t+"",end:t+"",valueEncoding:l},function(e,n,i){return e&&"range not found"===e.message?r(null,0):e?r(e):n.slice(0,t.length+1)!==t+""?r(null,0):void r(null,parseInt(n.toString().slice(t.length+1),16)*g+i.length)})},p.write=function(e,t,r,n){if("function"==typeof r)return p.write(e,t,null,r);r||(r={}),n||(n=c);var i=p.createWriteStream(e,r);i.on("error",n),i.on("finish",function(){n()}),i.write(t),i.end()},p.read=function(e,t,r){if("function"==typeof t)return p.read(e,null,t);t||(t={});var i=p.createReadStream(e,t),o=[];i.on("error",r),i.on("data",function(e){o.push(e)}),i.on("end",function(){r(null,1===o.length?o[0]:n.concat(o))})},p.createReadStream=function(e,t){return new w(e,t)},p.createWriteStream=function(e,t){return new v(e,t)},p}}).call(this,e("_process"),e("buffer").Buffer)},{_process:130,buffer:18,"level-peek":69,once:94,"readable-stream/readable":50,"readable-stream/writable":51,util:156}],45:[function(e,t,r){arguments[4][8][0].apply(r,arguments)},{"./_stream_readable":47,"./_stream_writable":49,_process:130,"core-util-is":21,dup:8,inherits:39}],46:[function(e,t,r){arguments[4][9][0].apply(r,arguments)},{"./_stream_transform":48,"core-util-is":21,dup:9,inherits:39}],47:[function(e,t,r){(function(r){function n(t,r){var n=e("./_stream_duplex"),i=(t=t||{}).highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,r instanceof n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(R||(R=e("string_decoder/").StringDecoder),this.decoder=new R(t.encoding),this.encoding=t.encoding)}function i(t){e("./_stream_duplex");if(!(this instanceof i))return new i(t);this._readableState=new n(t,this),this.readable=!0,T.call(this)}function o(e,t,r,n,i){var o=f(t,r);if(o)e.emit("error",o);else if(A.isNullOrUndefined(r))t.reading=!1,t.ended||l(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||i||n||(r=t.decoder.write(r)),i||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&c(e)),d(e,t);else i||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){if(e>=O)e=O;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}function u(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||A.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function f(e,t){var r=null;return A.isBuffer(t)||A.isString(t)||A.isNullOrUndefined(t)||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function l(e,t){if(t.decoder&&!t.ended){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,c(e)}function c(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(I("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?r.nextTick(function(){h(e)}):h(e))}function h(e){I("emit readable"),e.emit("readable"),y(e)}function d(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(function(){p(e,t)}))}function p(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(I("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function g(e){return function(){var t=e._readableState;I("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&S.listenerCount(e,"data")&&(t.flowing=!0,y(e))}}function b(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(function(){_(e,t)}))}function _(e,t){t.resumeScheduled=!1,e.emit("resume"),y(e),t.flowing&&!t.reading&&e.read(0)}function y(e){var t=e._readableState;if(I("flow",t.flowing),t.flowing)do{var r=e.read()}while(null!==r&&t.flowing)}function m(e,t){var r,n=t.buffer,i=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(s)r=n.shift();else if(!e||e>=i)r=o?n.join(""):x.concat(n,i),n.length=0;else if(e<n[0].length)r=(l=n[0]).slice(0,e),n[0]=l.slice(e);else if(e===n[0].length)r=n.shift();else{r=o?"":new x(e);for(var a=0,u=0,f=n.length;u<f&&a<e;u++){var l=n[0],c=Math.min(e-a,l.length);o?r+=l.slice(0,c):l.copy(r,a,0,c),c<l.length?n[0]=l.slice(c):n.shift(),a+=c}}return r}function v(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,r.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function w(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}function E(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}t.exports=i;var k=e("isarray"),x=e("buffer").Buffer;i.ReadableState=n;var S=e("events").EventEmitter;S.listenerCount||(S.listenerCount=function(e,t){return e.listeners(t).length});var T=e("stream"),A=e("core-util-is");A.inherits=e("inherits");var R,I=e("util");I=I&&I.debuglog?I.debuglog("stream"):function(){},A.inherits(i,T),i.prototype.push=function(e,t){var r=this._readableState;return A.isString(e)&&!r.objectMode&&(t=t||r.defaultEncoding)!==r.encoding&&(e=new x(e,t),t=""),o(this,r,e,t,!1)},i.prototype.unshift=function(e){return o(this,this._readableState,e,"",!0)},i.prototype.setEncoding=function(t){return R||(R=e("string_decoder/").StringDecoder),this._readableState.decoder=new R(t),this._readableState.encoding=t,this};var O=8388608;i.prototype.read=function(e){I("read",e);var t=this._readableState,r=e;if((!A.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return I("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?v(this):c(this),null;if(0===(e=u(e,t))&&t.ended)return 0===t.length&&v(this),null;var n=t.needReadable;I("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&I("length less than watermark",n=!0),(t.ended||t.reading)&&I("reading or ended",n=!1),n&&(I("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),n&&!t.reading&&(e=u(r,t));var i;return i=e>0?m(e,t):null,A.isNull(i)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),r!==e&&t.ended&&0===t.length&&v(this),A.isNull(i)||this.emit("data",i),i},i.prototype._read=function(e){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function n(e){I("onunpipe"),e===c&&o()}function i(){I("onend"),e.end()}function o(){I("cleanup"),e.removeListener("close",u),e.removeListener("finish",f),e.removeListener("drain",p),e.removeListener("error",a),e.removeListener("unpipe",n),c.removeListener("end",i),c.removeListener("end",o),c.removeListener("data",s),!h.awaitDrain||e._writableState&&!e._writableState.needDrain||p()}function s(t){I("ondata"),!1===e.write(t)&&(I("false write response, pause",c._readableState.awaitDrain),c._readableState.awaitDrain++,c.pause())}function a(t){I("onerror",t),l(),e.removeListener("error",a),0===S.listenerCount(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",f),l()}function f(){I("onfinish"),e.removeListener("close",u),l()}function l(){I("unpipe"),c.unpipe(e)}var c=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,I("pipe count=%d opts=%j",h.pipesCount,t);var d=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?i:o;h.endEmitted?r.nextTick(d):c.once("end",d),e.on("unpipe",n);var p=g(c);return e.on("drain",p),c.on("data",s),e._events&&e._events.error?k(e._events.error)?e._events.error.unshift(a):e._events.error=[a,e._events.error]:e.on("error",a),e.once("close",u),e.once("finish",f),e.emit("pipe",c),h.flowing||(I("pipe resume"),c.resume()),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}return-1===(i=E(t.pipes,e))?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var n=T.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading)i.length&&c(this);else{var o=this;r.nextTick(function(){I("readable nexttick read 0"),o.read(0)})}}return n},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var e=this._readableState;return e.flowing||(I("resume"),e.flowing=!0,e.reading||(I("resume read 0"),this.read(0)),b(this,e)),this},i.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(I("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){I("wrapped data"),t.decoder&&(i=t.decoder.write(i)),i&&(t.objectMode||i.length)&&(n.push(i)||(r=!0,e.pause()))});for(var i in e)A.isFunction(e[i])&&A.isUndefined(this[i])&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return w(["error","close","destroy","pause","resume"],function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(t){I("wrapped _read",t),r&&(r=!1,e.resume())},n},i._fromList=m}).call(this,e("_process"))},{"./_stream_duplex":45,_process:130,buffer:18,"core-util-is":21,events:26,inherits:39,isarray:42,stream:148,"string_decoder/":150,util:14}],48:[function(e,t,r){function n(e,t){this.afterTransform=function(e,r){return i(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,u.isNullOrUndefined(r)||e.push(r),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);a.call(this,e),this._transformState=new n(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){u.isFunction(this._flush)?this._flush(function(e){s(t,e)}):s(t)})}function s(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=o;var a=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(o,a),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;u.isNull(t.writechunk)||!t.writecb||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))}},{"./_stream_duplex":45,"core-util-is":21,inherits:39}],49:[function(e,t,r){(function(r){function n(e,t,r){this.chunk=e,this.encoding=t,this.callback=r}function i(t,r){var n=e("./_stream_duplex"),i=(t=t||{}).highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.objectMode=!!t.objectMode,r instanceof n&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){d(r,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(t){var r=e("./_stream_duplex");if(!(this instanceof o||this instanceof r))return new o(t);this._writableState=new i(t,this),this.writable=!0,k.call(this)}function s(e,t,n){var i=new Error("write after end");e.emit("error",i),r.nextTick(function(){n(i)})}function a(e,t,n,i){var o=!0;if(!(E.isBuffer(n)||E.isString(n)||E.isNullOrUndefined(n)||t.objectMode)){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s),r.nextTick(function(){i(s)}),o=!1}return o}function u(e,t,r){return!e.objectMode&&!1!==e.decodeStrings&&E.isString(t)&&(t=new w(t,r)),t}function f(e,t,r,i,o){r=u(t,r,i),E.isBuffer(r)&&(i="buffer");var s=t.objectMode?1:r.length;t.length+=s;var a=t.length<t.highWaterMark;return a||(t.needDrain=!0),t.writing||t.corked?t.buffer.push(new n(r,i,o)):l(e,t,!1,s,r,i,o),a}function l(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function c(e,t,n,i,o){n?r.nextTick(function(){t.pendingcb--,o(i)}):(t.pendingcb--,o(i)),e._writableState.errorEmitted=!0,e.emit("error",i)}function h(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function d(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if(h(n),t)c(e,n,i,t,o);else{var s=_(e,n);s||n.corked||n.bufferProcessing||!n.buffer.length||b(e,n),i?r.nextTick(function(){p(e,n,s,o)}):p(e,n,s,o)}}function p(e,t,r,n){r||g(e,t),t.pendingcb--,n(),m(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function b(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var r=[],n=0;n<t.buffer.length;n++)r.push(t.buffer[n].callback);t.pendingcb++,l(e,t,!0,t.length,t.buffer,"",function(e){for(var n=0;n<r.length;n++)t.pendingcb--,r[n](e)}),t.buffer=[]}else{for(n=0;n<t.buffer.length;n++){var i=t.buffer[n],o=i.chunk,s=i.encoding,a=i.callback,u=t.objectMode?1:o.length;if(l(e,t,!1,u,o,s,a),t.writing){n++;break}}n<t.buffer.length?t.buffer=t.buffer.slice(n):t.buffer.length=0}t.bufferProcessing=!1}function _(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function y(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function m(e,t){var r=_(e,t);return r&&(0===t.pendingcb?(y(e,t),t.finished=!0,e.emit("finish")):y(e,t)),r}function v(e,t,n){t.ending=!0,m(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n)),t.ended=!0}t.exports=o;var w=e("buffer").Buffer;o.WritableState=i;var E=e("core-util-is");E.inherits=e("inherits");var k=e("stream");E.inherits(o,k),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,r){var n=this._writableState,i=!1;return E.isFunction(t)&&(r=t,t=null),E.isBuffer(e)?t="buffer":t||(t=n.defaultEncoding),E.isFunction(r)||(r=function(){}),n.ended?s(this,0,r):a(this,n,e,r)&&(n.pendingcb++,i=f(this,n,e,t,r)),i},o.prototype.cork=function(){this._writableState.corked++},o.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||b(this,e))},o.prototype._write=function(e,t,r){r(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(e,t,r){var n=this._writableState;E.isFunction(e)?(r=e,e=null,t=null):E.isFunction(t)&&(r=t,t=null),E.isNullOrUndefined(e)||this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||v(this,n,r)}}).call(this,e("_process"))},{"./_stream_duplex":45,_process:130,buffer:18,"core-util-is":21,inherits:39,stream:148}],50:[function(e,t,r){(function(n){(r=t.exports=e("./lib/_stream_readable.js")).Stream=e("stream"),r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),n.browser||"disable"!==n.env.READABLE_STREAM||(t.exports=e("stream"))}).call(this,e("_process"))},{"./lib/_stream_duplex.js":45,"./lib/_stream_passthrough.js":46,"./lib/_stream_readable.js":47,"./lib/_stream_transform.js":48,"./lib/_stream_writable.js":49,_process:130,stream:148}],51:[function(e,t,r){arguments[4][36][0].apply(r,arguments)},{"./lib/_stream_writable.js":49,dup:36}],52:[function(e,t,r){var n=e("errno");Object.keys(n.code).forEach(function(e){var t=n.code[e];r[e]=function(r){var n=new Error(e+", "+t.description+(r?" '"+r+"'":""));return n.errno=t.errno,n.code=e,n.path=r,n}})},{errno:25}],53:[function(e,t,r){(function(r,n){var i=e("fwd-stream"),o=e("level-sublevel"),s=e("level-blobs"),a=e("level-peek"),u=e("once"),f=e("octal"),l=e("./errno"),c=e("./paths"),h=e("./watchers"),d=function(e,t,n){r.nextTick(function(){e(t,n)})},p=function(){};t.exports=function(e,t){var g={};e=o(e);var b=s(e.sublevel("blobs"),t),_=c(e.sublevel("stats")),y=e.sublevel("links"),m=h(),v=[],w=Date.now(),E=function(){return++w};g.mkdir=function(e,t,r){if("function"==typeof t)return g.mkdir(e,null,t);t||(t=f(777)),r||(r=p),_.follow(e,function(e,n,i){return e&&"ENOENT"!==e.code?r(e):n?r(l.EEXIST(i)):void _.put(i,{type:"directory",mode:t,size:4096},m.cb(i,r))})},g.rmdir=function(e,t){t||(t=p),_.follow(e,function(e,r,n){if(e)return t(e);g.readdir(n,function(e,r){return e?t(e):r.length?t(l.ENOTEMPTY(n)):void _.del(n,m.cb(n,t))})})},g.readdir=function(e,t){_.follow(e,function(e,r,n){return e?t(e):r?r.isDirectory()?void _.list(n,t):t(l.ENOTDIR(n)):t(l.ENOENT(n))})};var k=function(e,t,r){t(e,function(e,t,n){if(e)return r(e);if(!t.isFile())return r(null,t);var i=t&&t.blob||n;b.size(i,function(e,n){if(e)return r(e);t.size=n,r(null,t)})})};g.stat=function(e,t){k(e,_.follow,t)},g.lstat=function(e,t){k(e,_.get,t)},g.exists=function(e,t){_.follow(e,function(e){t(!e)})};var x=function(e,t,r,n){n||(n=p),t(e,function(e,t,i){if(e)return n(e);_.update(i,{mode:r},m.cb(i,n))})};g.chmod=function(e,t,r){x(e,_.follow,t,r)},g.lchmod=function(e,t,r){x(e,_.get,t,r)};var S=function(e,t,r,n,i){i||(i=p),t(e,function(e,t,o){if(e)return i(e);_.update(o,{uid:r,gid:n},m.cb(o,i))})};return g.chown=function(e,t,r,n){S(e,_.follow,t,r,n)},g.lchown=function(e,t,r,n){S(e,_.get,t,r,n)},g.utimes=function(e,t,r,n){n||(n=p),_.follow(e,function(e,i,o){if(e)return n(e);var s={};t&&(s.atime=t),r&&(s.mtime=r),_.update(o,s,m.cb(o,n))})},g.rename=function(e,t,r){r||(r=p),_.follow(e,function(e,n,i){if(e)return r(e);var o=function(){r=m.cb(t,m.cb(i,r)),_.put(t,n,function(e){if(e)return r(e);_.del(i,r)})};_.follow(t,function(e,t,s){return e&&"ENOENT"!==e.code?r(e):t?n.isDirectory()!==t.isDirectory()?r(l.EISDIR(i)):void(t.isDirectory()?g.readdir(s,function(e,t){return e?r(e):t.length?r(l.ENOTEMPTY(i)):void o()}):o()):o()})})},g.realpath=function(e,t,r){if("function"==typeof t)return g.realpath(e,null,t);_.follow(e,function(e,t,n){if(e)return r(e);r(null,n)})},g.writeFile=function(e,t,r,i){if("function"==typeof r)return g.writeFile(e,t,null,r);"string"==typeof r&&(r={encoding:r}),r||(r={}),i||(i=p),n.isBuffer(t)||(t=new n(t,r.encoding||"utf-8"));var o=r.flags||"w";r.append="w"!==o[0],_.follow(e,function(e,n,s){if(e&&"ENOENT"!==e.code)return i(e);if(n&&n.isDirectory())return i(l.EISDIR(s));if(n&&"x"===o[1])return i(l.EEXIST(s));var a=n&&n.blob||s;_.writable(s,function(e){if(e)return i(e);b.write(a,t,r,function(e){if(e)return i(e);_.put(s,{ctime:n&&n.ctime,mtime:new Date,mode:r.mode||f(666),type:"file"},m.cb(s,i))})})})},g.appendFile=function(e,t,r,n){if("function"==typeof r)return g.appendFile(e,t,null,r);"string"==typeof r&&(r={encoding:r}),r||(r={}),r.flags="a",g.writeFile(e,t,r,n)},g.unlink=function(e,t){t||(t=p),_.get(e,function(e,r,n){if(e)return t(e);if(r.isDirectory())return t(l.EISDIR(n));var i=function(e){a(y,{start:e+"",end:e+""},function(r){if(r)return b.remove(e,t);t()})},o=function(){var e=r.link.slice(0,r.link.indexOf(""));y.del(r.link,function(r){if(r)return t(r);i(e)})};_.del(n,m.cb(n,function(e){return e?t(e):r.link?o():void y.del(n+"",function(e){if(e)return t(e);i(n)})}))})},g.readFile=function(e,t,r){if("function"==typeof t)return g.readFile(e,null,t);"string"==typeof t&&(t={encoding:t}),t||(t={});t.encoding,t.flag;_.follow(e,function(e,n,i){if(e)return r(e);if(n.isDirectory())return r(l.EISDIR(i));var o=n&&n.blob||i;b.read(o,function(e,n){if(e)return r(e);r(null,t.encoding?n.toString(t.encoding):n)})})},g.createReadStream=function(e,t){t||(t={});var n=!1,o=i.readable(function(i){_.follow(e,function(e,s,a){if(e)return i(e);if(s.isDirectory())return i(l.EISDIR(a));var u=s&&s.blob||a,f=b.createReadStream(u,t);o.emit("open"),f.on("end",function(){r.nextTick(function(){n||o.emit("close")})}),i(null,f)})});return o.on("close",function(){n=!0}),o},g.createWriteStream=function(e,t){t||(t={});var r=t.flags||"w",n=!1,o=t.mode||f(666);t.append="a"===r[0];var s=i.writable(function(i){_.follow(e,function(e,a,u){if(e&&"ENOENT"!==e.code)return i(e);if(a&&a.isDirectory())return i(l.EISDIR(u));if(a&&"x"===r[1])return i(l.EEXIST(u));var f=a&&a.blob||u;_.writable(f,function(e){if(e)return i(e);var r={ctime:a?a.ctime:new Date,mtime:new Date,mode:o,type:"file"};_.put(u,r,function(e){if(e)return i(e);var o=b.createWriteStream(f,t);s.emit("open"),o.on("finish",function(){r.mtime=new Date,_.put(u,r,function(){m.change(u),n||s.emit("close")})}),i(null,o)})})})});return s.on("close",function(){n=!0}),s},g.truncate=function(e,t,r){_.follow(e,function(e,i,o){if(e)return r(e);var s=i&&i.blob||o;b.size(s,function(e,i){if(e)return r(e);_.writable(o,function(e){if(e)return r(e);if(r=u(m.cb(o,r)),!t)return b.remove(s,r);var a=b.createWriteStream(s,{start:i<t?t-1:t});a.on("error",r),a.on("finish",r),i<t&&a.write(new n([0])),a.end()})})})},g.watchFile=function(e,t,r){return"function"==typeof t?g.watchFile(e,null,t):m.watch(_.normalize(e),r)},g.unwatchFile=function(e,t){m.unwatch(_.normalize(e),t)},g.watch=function(e,t,r){return"function"==typeof t?g.watch(e,null,t):m.watcher(_.normalize(e),r)},g.notify=function(e){m.on("change",e)},g.open=function(e,t,r,n){if("function"==typeof r)return g.open(e,t,null,r);_.follow(e,function(e,i,o){if(e&&"ENOENT"!==e.code)return n(e);var s=t[0],a="+"===t[1]||"+"===t[2],u=i&&i.blob||o,c={key:o,blob:u,mode:r||f(666),readable:"r"===s||("w"===s||"a"===s)&&a,writable:"w"===s||"a"===s||"r"===s&&a,append:"a"===s};return"r"===s&&e?n(e):"x"===t[1]&&i?n(l.EEXIST(o)):i&&i.isDirectory()?n(l.EISDIR(o)):void b.size(u,function(e,t){if(e)return n(e);c.append&&(c.writePos=t),_.writable(o,function(e){if(e)return n(e);var t=function(e){if(e)return n(e);var t=v.indexOf(null);-1===t&&(t=10+v.push(v.length+10)-1),c.fd=t,v[t]=c,m.change(o),n(null,c.fd)},r=function(e){return e?n(e):i?t():void _.put(u,{ctime:i&&i.ctime,type:"file"},t)};if(!c.append&&c.writable)return b.remove(u,r);r()})})})},g.close=function(e,t){var r=v[e];if(!r)return d(t,l.EBADF());v[e]=null,d(m.cb(r.key,t))},g.write=function(e,t,r,n,i,o){var s=v[e];if(o||(o=p),!s||!s.writable)return d(o,l.EBADF());null===i&&(i=s.writePos||0);var a=t.slice(r,r+n);s.writePos=i+a.length,b.write(s.blob,a,{start:i,append:!0},function(e){if(e)return o(e);o(null,n,t)})},g.read=function(e,t,r,n,i,o){var s=v[e];if(o||(o=p),!s||!s.readable)return d(o,l.EBADF());null===i&&(i=g.readPos||0),b.read(s.blob,{start:i,end:i+n-1},function(e,s){if(e)return o(e);var a=s.slice(0,n);a.copy(t,r),g.readPos=i+a.length,o(null,a.length,t)})},g.fsync=function(e,t){var r=v[e];if(t||(t=p),!r||!r.writable)return d(t,l.EBADF());d(t)},g.ftruncate=function(e,t,r){var n=v[e];if(r||(r=p),!n)return d(r,l.EBADF());g.truncate(n.blob,t,r)},g.fchown=function(e,t,r,n){var i=v[e];if(n||(n=p),!i)return d(n,l.EBADF());g.chown(i.key,t,r,n)},g.fchmod=function(e,t,r){var n=v[e];if(r||(r=p),!n)return d(r,l.EBADF());g.chmod(n.key,t,r)},g.futimes=function(e,t,r,n){var i=v[e];if(n||(n=p),!i)return d(n,l.EBADF());g.utimes(i.key,t,r,n)},g.fstat=function(e,t){var r=v[e];if(!r)return d(t,l.EBADF());g.stat(r.key,t)},g.symlink=function(e,t,r){r||(r=p),_.follow(e,function(e,n,i){if(e)return r(e);_.get(t,function(e,n){return e&&"ENOENT"!==e.code?r(e):n?r(l.EEXIST(t)):void _.put(t,{type:"symlink",target:i,mode:f(777)},r)})})},g.readlink=function(e,t){_.get(e,function(r,n){return r?t(r):n.target?void t(null,n.target):t(l.EINVAL(e))})},g.link=function(e,t,r){r||(r=p),_.follow(e,function(e,n,i){return e?r(e):n.isFile()?void _.get(t,function(e,o){if(e&&"ENOENT"!==e.code)return r(e);if(o)return r(l.EEXIST(t));var s=i+""+E();y.put(i+"",i,function(e){if(e)return r(e);y.put(s,i,function(e){if(e)return r(e);_.put(t,{type:"file",link:s,blob:i,mode:n.mode},r)})})}):r(l.EINVAL(i))})},g}}).call(this,e("_process"),e("buffer").Buffer)},{"./errno":52,"./paths":56,"./watchers":58,_process:130,buffer:18,"fwd-stream":28,"level-blobs":44,"level-peek":69,"level-sublevel":72,octal:93,once:94}],54:[function(e,t,r){t.exports=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)}},{}],55:[function(e,t,r){var n=e("./has-keys");t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];if(n(r))for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}},{"./has-keys":54}],56:[function(e,t,r){(function(r){var n=e("path"),i=e("once"),o=e("concat-stream"),s=e("octal"),a=e("./stat"),u=e("xtend"),f=e("./errno"),l=a({type:"directory",mode:s(777),size:4096}),c=function(e){return e="/"===e[0]?e:"/"+e,"/"===(e=n.normalize(e))?e:"/"===e[e.length-1]?e.slice(0,-1):e},h=function(e){var t=e.split("/").length.toString(36);return"0000000000".slice(t.length)+t+e};t.exports=function(e){var t={};t.normalize=c,t.get=function(t,n){if("/"===(t=c(t)))return r.nextTick(n.bind(null,null,l,"/"));e.get(h(t),{valueEncoding:"json"},function(e,r){return e&&e.notFound?n(f.ENOENT(t),null,t):e?n(e,null,t):void n(null,a(r),t)})},t.writable=function(e,i){if("/"===(e=c(e)))return r.nextTick(i.bind(null,f.EPERM(e)));t.follow(n.dirname(e),function(t,r){return t?i(t):r.isDirectory()?void i(null,e):i(f.ENOTDIR(e))})},t.list=function(t,r){t=c(t);var n=h("/"===t?t:t+"/"),s=e.createKeyStream({start:n,end:n+""});r=i(r),s.on("error",r),s.pipe(o({encoding:"object"},function(e){e=e.map(function(e){return e.split("/").pop()}),r(null,e)}))};var s=function(e,r){var i="/",o=e.split("/").slice(1),s=function(){t.get(n.join(i,o.shift()),function(t,n,a){return t?r(t,n,e):(i=n.target||a,o.length?void s():r(null,n,a))})};s()};return t.follow=function(e,r){s(c(e),function e(n,i,o){return n?r(n,null,o):i.target?t.get(i.target,e):void r(null,a(i),o)})},t.update=function(e,r,n){t.get(e,function(e,i,o){return e?n(e):"/"===o?n(f.EPERM(o)):void t.put(o,u(i,r),n)})},t.put=function(r,n,i){t.writable(r,function(t,r){if(t)return i(t);e.put(h(r),a(n),{valueEncoding:"json"},i)})},t.del=function(t,n){if("/"===(t=c(t)))return r.nextTick(n.bind(null,f.EPERM(t)));e.del(h(t),n)},t}}).call(this,e("_process"))},{"./errno":52,"./stat":57,_process:130,"concat-stream":20,octal:93,once:94,path:106,xtend:55}],57:[function(e,t,r){var n=function(e){return e?"string"==typeof e?new Date(e):e:new Date},i=function(e){this.uid=e.uid||0,this.gid=e.gid||0,this.mode=e.mode||0,this.size=e.size||0,this.mtime=n(e.mtime),this.atime=n(e.atime),this.ctime=n(e.ctime),this.type=e.type,this.target=e.target,this.link=e.link,this.blob=e.blob};i.prototype.isDirectory=function(){return"directory"===this.type},i.prototype.isFile=function(){return"file"===this.type},i.prototype.isBlockDevice=function(){return!1},i.prototype.isCharacterDevice=function(){return!1},i.prototype.isSymbolicLink=function(){return"symlink"===this.type},i.prototype.isFIFO=function(){return!1},i.prototype.isSocket=function(){return!1},t.exports=function(e){return new i(e)}},{}],58:[function(e,t,r){var n=e("events");t.exports=function(){var e={},t=new n.EventEmitter;return t.watch=function(t,r){return e[t]||(e[t]=new n.EventEmitter,e[t].setMaxListeners(0)),r&&e[t].on("change",r),e[t]},t.watcher=function(e,r){var i=new n.EventEmitter,o=function(){i.emit("change","change",e)};return t.watch(e,o),r&&i.on("change",r),i.close=function(){t.unwatch(e,o)},i},t.unwatch=function(t,r){e[t]&&(r?e[t].removeListener("change",r):e[t].removeAllListeners("change"),e[t].listeners("change").length||delete e[t])},t.change=function(r){e[r]&&e[r].emit("change"),t.emit("change",r)},t.cb=function(e,r){return function(n,i){e&&t.change(e),r&&r(n,i)}},t}},{events:26}],59:[function(e,t,r){var n=e("clone");t.exports=function(e){var t=(e=n(e)).reverse,r=e.max||e.end,i=e.min||e.start,o=[i,r];return null!=i&&null!=r&&o.sort(),t&&(o=o.reverse()),e.start=o[0],e.end=o[1],delete e.min,delete e.max,e}},{clone:19}],60:[function(e,t,r){var n=e("string-range");t.exports=function(e){function t(e){return e&&("string"==typeof e?e:"string"==typeof e.prefix?e.prefix:"function"==typeof e.prefix?e.prefix():"")}function r(e){if(e&&e._getKeyEncoding)return e._getKeyEncoding(e)}function i(e){if(e&&e._getValueEncoding)return e._getValueEncoding(e)}function o(e,t){return function(){var r=e.indexOf(t);return!!~r&&(e.splice(r,1),!0)}}function s(e){e&&e.type&&u.forEach(function(t){t.test(e.key)&&t.hook(e)})}function a(n,o,s,a){try{o.forEach(function e(n,s){f.forEach(function(a){if(a.test(String(n.key))){var u={add:function(n,u){if(void 0===n)return this;if(!1===n)return delete o[s];var f=t(n.prefix)||t(u)||a.prefix||"";if(f&&(n.prefix=f),n.key=f+n.key,a.safe&&a.test(String(n.key)))throw new Error("prehook cannot insert into own range");var l=n.keyEncoding||r(n.prefix),c=n.valueEncoding||i(n.prefix);return l&&(n.keyEncoding=l),c&&(n.valueEncoding=c),o.push(n),e(n,o.length-1),this},put:function(e,t){return"object"==typeof e&&(e.type="put"),this.add(e,t)},del:function(e,t){return"object"==typeof e&&(e.type="del"),this.add(e,t)},veto:function(){return this.add(!1)}};a.hook.call(u,n,u.add,o)}})})}catch(e){return(a||s)(e)}if(1==(o=o.filter(function(e){return e&&e.type})).length&&!n){var u=o[0];return"put"==u.type?l.call(e,u.key,u.value,s,a):c.call(e,u.key,s,a)}return h.call(e,o,s,a)}if(!e.hooks){var u=[],f=[];e.hooks={post:function(e,t){t||(t=e,e="");var r={test:n.checker(e),hook:t};return u.push(r),o(u,r)},pre:function(e,t){t||(t=e,e="");var r={test:n.checker(e),hook:t,safe:!1!==e.safe};return f.push(r),o(f,r)},posthooks:u,prehooks:f},e.on("put",function(e,t){s({type:"put",key:e,value:t})}),e.on("del",function(e,t){s({type:"del",key:e,value:t})}),e.on("batch",function(e){e.forEach(s)});var l=e.put,c=e.del,h=e.batch;e.put=function(e,t,r,n){return a(!1,[{key:e,value:t,type:"put"}],r,n)},e.del=function(e,t,r){return a(!1,[{key:e,type:"del"}],t,r)},e.batch=function(e,t,r){return a(!0,e,t,r)}}}},{"string-range":149}],61:[function(e,t,r){(function(r){function n(e){if(!(this instanceof n))return new n(e);if(!e)throw new Error("constructor requires at least a location argument");this.IDBOptions={},this.location=e}t.exports=n;var i=e("idb-wrapper"),o=e("abstract-leveldown").AbstractLevelDOWN,s=e("util"),a=e("./iterator"),u=e("isbuffer"),f=e("xtend"),l=e("typedarray-to-buffer");s.inherits(n,o),n.prototype._open=function(e,t){var r=this,n={storeName:this.location,autoIncrement:!1,keyPath:null,onStoreReady:function(){t&&t(null,r.idb)},onError:function(e){t&&t(e)}};f(n,e),this.IDBOptions=n,this.idb=new i(n)},n.prototype._get=function(e,t,n){this.idb.get(e,function(i){if(void 0===i)return n(new Error("NotFound"));var o=!0;return!1===t.asBuffer&&(o=!1),t.raw&&(o=!1),o&&(i=i instanceof Uint8Array?l(i):new r(String(i))),n(null,i,e)},n)},n.prototype._del=function(e,t,r){this.idb.remove(e,r,r)},n.prototype._put=function(e,t,n,i){t instanceof ArrayBuffer&&(t=l(new Uint8Array(t)));var o=this.convertEncoding(e,t,n);r.isBuffer(o.value)&&("function"==typeof t.toArrayBuffer?o.value=new Uint8Array(t.toArrayBuffer()):o.value=new Uint8Array(t)),this.idb.put(o.key,o.value,function(){i()},i)},n.prototype.convertEncoding=function(e,t,r){if(r.raw)return{key:e,value:t};if(t){var n=t.toString();"NaN"===n&&(t="NaN")}var i=r.valueEncoding,o={key:e,value:t};return!t||i&&"binary"===i||"object"!=typeof o.value&&(o.value=n),o},n.prototype.iterator=function(e){return"object"!=typeof e&&(e={}),new a(this.idb,e)},n.prototype._batch=function(e,t,r){var n,i,o,s,a=[];if(0===e.length)return setTimeout(r,0);for(n=0;n<e.length;n++){o={},s=e[n],a[n]=o;var u=this.convertEncoding(s.key,s.value,t);s.key=u.key,s.value=u.value;for(i in s)"type"===i&&"del"==s[i]?o[i]="remove":o[i]=s[i]}return this.idb.batch(a,function(){r()},r)},n.prototype._close=function(e){this.idb.db.close(),e()},n.prototype._approximateSize=function(e,t,r){var n=new Error("Not implemented");if(r)return r(n);throw n},n.prototype._isBuffer=function(e){return r.isBuffer(e)},n.destroy=function(e,t){if("object"==typeof e)var r=e.IDBOptions.storePrefix||"IDBWrapper-",n=e.location;else var r="IDBWrapper-",n=e;var i=indexedDB.deleteDatabase(r+n);i.onsuccess=function(){t()},i.onerror=function(e){t(e)}};n.prototype._checkKeyValue=function(e,t){return null===e||void 0===e?new Error(t+" cannot be `null` or `undefined`"):null===e||void 0===e?new Error(t+" cannot be `null` or `undefined`"):u(e)&&0===e.byteLength?new Error(t+" cannot be an empty ArrayBuffer"):""===String(e)?new Error(t+" cannot be an empty String"):0===e.length?new Error(t+" cannot be an empty Array"):void 0}}).call(this,e("buffer").Buffer)},{"./iterator":62,"abstract-leveldown":3,buffer:18,"idb-wrapper":37,isbuffer:43,"typedarray-to-buffer":151,util:156,xtend:68}],62:[function(e,t,r){function n(e,t){t||(t={}),this.options=t,o.call(this,e),this._order=t.reverse?"DESC":"ASC",this._limit=t.limit,this._count=0,this._done=!1;var r=s.lowerBound(t),n=s.upperBound(t);try{this._keyRange=r||n?this.db.makeKeyRange({lower:r,upper:n,excludeLower:s.lowerBoundExclusive(t),excludeUpper:s.upperBoundExclusive(t)}):null}catch(e){this._keyRangeError=!0}this.callback=null}var i=e("util"),o=e("abstract-leveldown").AbstractIterator,s=e("ltgt");t.exports=n,i.inherits(n,o),n.prototype.createIterator=function(){var e=this;e.iterator=e.db.iterate(function(){e.onItem.apply(e,arguments)},{keyRange:e._keyRange,autoContinue:!1,order:e._order,onError:function(e){console.log("horrible error",e)}})},n.prototype.onItem=function(e,t,r){if(!t&&this.callback)return this.callback(),void(this.callback=!1);var n=!0;this._limit&&this._limit>0&&this._count++>=this._limit&&(n=!1),n&&this.callback(!1,t.key,t.value),t&&t.continue()},n.prototype._next=function(e){return e?this._keyRangeError?e():(this._started||(this.createIterator(),this._started=!0),void(this.callback=e)):new Error("next() requires a callback argument")}},{"abstract-leveldown":3,ltgt:92,util:156}],63:[function(e,t,r){var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=function(e){var t="function"==typeof e&&!(e instanceof RegExp)||"[object Function]"===i.call(e);return t||"undefined"==typeof window||(t=e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt),t};t.exports=function(e,t){if(!o(t))throw new TypeError("iterator must be a function");var r,i,s="string"==typeof e,a=e.length,u=arguments.length>2?arguments[2]:null;if(a===+a)for(r=0;r<a;r++)null===u?t(s?e.charAt(r):e[r],r,e):t.call(u,s?e.charAt(r):e[r],r,e);else for(i in e)n.call(e,i)&&(null===u?t(e[i],i,e):t.call(u,e[i],i,e))}},{}],64:[function(e,t,r){t.exports=Object.keys||e("./shim")},{"./shim":66}],65:[function(e,t,r){var n=Object.prototype.toString;t.exports=function(e){var t=n.call(e),r="[object Arguments]"===t;return r||(r="[object Array]"!==t&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===n.call(e.callee)),r}},{}],66:[function(e,t,r){!function(){"use strict";var r,n=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=e("./foreach"),s=e("./isArguments"),a=!{toString:null}.propertyIsEnumerable("toString"),u=function(){}.propertyIsEnumerable("prototype"),f=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];r=function(e){var t=null!==e&&"object"==typeof e,r="[object Function]"===i.call(e),l=s(e),c=[];if(!t&&!r&&!l)throw new TypeError("Object.keys called on a non-object");if(l)o(e,function(e){c.push(e)});else{var h,d=u&&r;for(h in e)d&&"prototype"===h||!n.call(e,h)||c.push(h)}if(a){var p=e.constructor,g=p&&p.prototype===e;o(f,function(t){g&&"constructor"===t||!n.call(e,t)||c.push(t)})}return c},t.exports=r}()},{"./foreach":63,"./isArguments":65}],67:[function(e,t,r){arguments[4][54][0].apply(r,arguments)},{dup:54}],68:[function(e,t,r){var n=e("object-keys"),i=e("./has-keys");t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];if(i(r))for(var o=n(r),s=0;s<o.length;s++){var a=o[s];e[a]=r[a]}}return e}},{"./has-keys":67,"object-keys":64}],69:[function(e,t,r){function n(e,t,r){var n=[];return t.forEach(function(t){function i(e){!1!==r(t,e)&&n.forEach(function(e){e()})}e.on(t,i),n.push(function(){e.removeListener(t,i)})}),e}function i(e,t,r){t.limit=t.reverse?2:1;n(e.createReadStream(t),["data","error","end"],function(e,n){if(t.reverse&&n&&t.start&&n.key.toString()>t.start)return!1;"error"==e?r(n):"end"==e?r(new Error("range not found"),null,null):r(null,n.key,n.value)})}var o=e("level-fix-range");(r=t.exports=i).first=function(e,t,r){return r||(r=t,t={}),t.reverse=!1,i(e,o(t),r)},r.last=function(e,t,r){r||(r=t,t={});t.start;return t.reverse=!0,i(e,o(t),function(n,o,s){if(n){var a=t.start;t.start=null,i(e,t,function(e,i,o){if(!i)return r(n,null,null);var s=i.toString();s<=a&&(!t.end||s>=t.end)?r(e,i,o):r(n,null,null)})}else r(n,o,s)})}},{"level-fix-range":70}],70:[function(e,t,r){t.exports=function(e){var t=e.reverse,r=e.end,n=e.start,i=[n,r];return null!=n&&null!=r&&i.sort(),t&&(i=i.reverse()),e.start=i[0],e.end=i[1],e}},{}],71:[function(e,t,r){function n(e,t,r,n){var i={type:e,key:t,value:r,options:n};return n&&n.prefix&&(i.prefix=n.prefix,delete n.prefix),this._operations.push(i),this}function i(e){this._operations=[],this._sdb=e,this.put=n.bind(this,"put"),this.del=n.bind(this,"del")}var o=i.prototype;o.clear=function(){this._operations=[]},o.write=function(e){this._sdb.batch(this._operations,e)},t.exports=i},{}],72:[function(e,t,r){(function(r){e("events").EventEmitter,r.nextTick;var n=e("./sub"),i=e("./batch"),o=e("level-fix-range"),s=e("level-hooks");t.exports=function(e,t){function r(){}function a(e){return function(t){return t=t||{},(t=o(t)).reverse?t.start=t.start||f:t.end=t.end||f,e.call(u,t)}}r.prototype=e;var u=new r;if(u.sublevel)return u;var f=(t=t||{}).sep=t.sep||"";u._options=t,s(u),u.sublevels={},u.sublevel=function(e,t){return u.sublevels[e]?u.sublevels[e]:new n(u,e,t||this._options)},u.methods={},u.prefix=function(e){return""+(e||"")},u.pre=function(e,t){return t||(t=e,e={max:f}),u.hooks.pre(e,t)},u.post=function(e,t){return t||(t=e,e={max:f}),u.hooks.post(e,t)},u.readStream=u.createReadStream=a(u.createReadStream),u.keyStream=u.createKeyStream=a(u.createKeyStream),u.valuesStream=u.createValueStream=a(u.createValueStream);var l=u.batch;return u.batch=function(e,t,r){if(!Array.isArray(e))return new i(u);e.forEach(function(e){e.prefix&&("function"==typeof e.prefix.prefix?e.key=e.prefix.prefix(e.key):"string"==typeof e.prefix&&(e.key=e.prefix+e.key))}),l.call(u,e,t,r)},u}}).call(this,e("_process"))},{"./batch":71,"./sub":77,_process:130,events:26,"level-fix-range":59,"level-hooks":60}],73:[function(e,t,r){arguments[4][64][0].apply(r,arguments)},{"./shim":74,dup:64}],74:[function(e,t,r){!function(){"use strict";var r,n=Object.prototype.hasOwnProperty,i=e("is"),o=e("foreach"),s=!{toString:null}.propertyIsEnumerable("toString"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];r=function(e){if(!i.object(e)&&!i.array(e))throw new TypeError("Object.keys called on a non-object");var t,r=[];for(t in e)n.call(e,t)&&r.push(t);return s&&o(a,function(t){n.call(e,t)&&r.push(t)}),r},t.exports=r}()},{foreach:27,is:41}],75:[function(e,t,r){arguments[4][54][0].apply(r,arguments)},{dup:54}],76:[function(e,t,r){arguments[4][68][0].apply(r,arguments)},{"./has-keys":75,dup:68,"object-keys":73}],77:[function(e,t,r){function n(e,t,r){if("string"==typeof r&&(console.error("db.sublevel(name, seperator<string>) is depreciated"),console.error("use db.sublevel(name, {sep: separator})) if you must"),r={sep:r}),!(this instanceof n))return new n(e,t,r);if(!e)throw new Error("must provide db");if(!t)throw new Error("must provide prefix");(r=r||{}).sep=r.sep||"",this._parent=e,this._options=r,this.options=r,this._prefix=t,this._root=o(this),e.sublevels[t]=this,this.sublevels={},this.methods={};var i=this;this.hooks={pre:function(){return i.pre.apply(i,arguments)},post:function(){return i.post.apply(i,arguments)}}}function i(e,t){["valueEncoding","encoding","keyEncoding","reverse","values","keys","limit","fillCache"].forEach(function(r){t.hasOwnProperty(r)&&(e[r]=t[r])})}function o(e){return e._parent?o(e._parent):e}var s=e("events").EventEmitter,a=e("util").inherits,u=e("string-range"),f=e("level-fix-range"),l=e("xtend"),c=e("./batch");a(n,s);var h=n.prototype;h._key=function(e){var t=this._options.sep;return t+this._prefix+t+e},h._getOptsAndCb=function(e,t){return"function"==typeof e&&(t=e,e={}),{opts:l(e,this._options),cb:t}},h.sublevel=function(e,t){return this.sublevels[e]?this.sublevels[e]:new n(this,e,t||this._options)},h.put=function(e,t,r,n){var i=this._getOptsAndCb(r,n);this._root.put(this.prefix(e),t,i.opts,i.cb)},h.get=function(e,t,r){var n=this._getOptsAndCb(t,r);this._root.get(this.prefix(e),n.opts,n.cb)},h.del=function(e,t,r){var n=this._getOptsAndCb(t,r);this._root.del(this.prefix(e),n.opts,n.cb)},h.batch=function(e,t,r){if(!Array.isArray(e))return new c(this);var n=this,i=this._getOptsAndCb(t,r);e.forEach(function(e){"string"==typeof e.prefix?e.key=e.prefix+e.key:e.key=(e.prefix||n).prefix(e.key),e.prefix&&(e.prefix=null)}),this._root.batch(e,i.opts,i.cb)},h._getKeyEncoding=function(){return this.options.keyEncoding?this.options.keyEncoding:this._parent&&this._parent._getKeyEncoding?this._parent._getKeyEncoding():void 0},h._getValueEncoding=function(){return this.options.valueEncoding?this.options.valueEncoding:this._parent&&this._parent._getValueEncoding?this._parent._getValueEncoding():void 0},h.prefix=function(e){var t=this._options.sep;return this._parent.prefix()+t+this._prefix+t+(e||"")},h.keyStream=h.createKeyStream=function(e){return e=e||{},e.keys=!0,e.values=!1,this.createReadStream(e)},h.valueStream=h.createValueStream=function(e){return e=e||{},e.keys=!1,e.values=!0,e.keys=!1,this.createReadStream(e)},h.readStream=h.createReadStream=function(e){e=e||{};var t=o(this),r=this.prefix(),n=u.prefix(e,r);i(n,l(e,this._options));var s=t.createReadStream(n);if(!1===n.values){if(f=s.read)s.read=function(e){var t=f.call(this,e);return t&&(t=t.substring(r.length)),t};else{var a=s.emit;s.emit=function(e,t){"data"===e?a.call(this,"data",t.substring(r.length)):a.call(this,e,t)}}return s}if(!1===n.keys)return s;var f=s.read;return f?s.read=function(e){var t=f.call(this,e);return t&&(t.key=t.key.substring(r.length)),t}:s.on("data",function(e){e.key=e.key.substring(r.length)}),s},h.writeStream=h.createWriteStream=function(){var e=o(this),t=this.prefix(),r=e.createWriteStream.apply(e,arguments),n=r.write,i=this._options.encoding,s=this._options.valueEncoding,a=this._options.keyEncoding,u=!i&&!s&&!a;return r.write=u?function(e){return e.key=t+e.key,n.call(r,e)}:function(e){return e.key=t+e.key,i&&void 0===e.encoding&&(e.encoding=i),s&&void 0===e.valueEncoding&&(e.valueEncoding=s),a&&void 0===e.keyEncoding&&(e.keyEncoding=a),n.call(r,e)},r},h.approximateSize=function(){var e=o(db);return e.approximateSize.apply(e,arguments)},h.pre=function(e,t){t||(t=e,e=null),e=u.prefix(e,this.prefix(),this._options.sep);var r=o(this._parent),n=this.prefix();return r.hooks.pre(f(e),function(e,r,i){t({key:e.key.substring(n.length),value:e.value,type:e.type},function(e,t){r(e,e.prefix?t:t||n)},i)})},h.post=function(e,t){t||(t=e,e=null);var r=o(this._parent),n=this.prefix();return e=u.prefix(e,n,this._options.sep),r.hooks.post(f(e),function(e){t({key:e.key.substring(n.length),value:e.value,type:e.type})})};t.exports=n},{"./batch":71,events:26,"level-fix-range":59,"string-range":149,util:156,xtend:76}],78:[function(e,t,r){function n(e){this._levelup=e,this.batch=e.db.batch(),this.ops=[]}var i=e("./util"),o=e("./errors").WriteError,s=i.getOptions,a=i.dispatchError;n.prototype.put=function(e,t,r){r=s(this._levelup,r);var n=i.encodeKey(e,r),a=i.encodeValue(t,r);try{this.batch.put(n,a)}catch(e){throw new o(e)}return this.ops.push({type:"put",key:n,value:a}),this},n.prototype.del=function(e,t){t=s(this._levelup,t);var r=i.encodeKey(e,t);try{this.batch.del(r)}catch(e){throw new o(e)}return this.ops.push({type:"del",key:r}),this},n.prototype.clear=function(){try{this.batch.clear()}catch(e){throw new o(e)}return this.ops=[],this},n.prototype.write=function(e){var t=this._levelup,r=this.ops;try{this.batch.write(function(n){if(n)return a(t,new o(n),e);t.emit("batch",r),e&&e()})}catch(e){throw new o(e)}},t.exports=n},{"./errors":79,"./util":82}],79:[function(e,t,r){var n=e("errno").create,i=n("LevelUPError"),o=n("NotFoundError",i);o.prototype.notFound=!0,o.prototype.status=404,t.exports={LevelUPError:i,InitializationError:n("InitializationError",i),OpenError:n("OpenError",i),ReadError:n("ReadError",i),WriteError:n("WriteError",i),NotFoundError:o,EncodingError:n("EncodingError",i)}},{errno:25}],80:[function(e,t,r){(function(r){function n(e,t){return"function"==typeof e?e:t}function i(e,t,n){if(!(this instanceof i))return new i(e,t,n);var o;if(s.call(this),this.setMaxListeners(1/0),"function"==typeof e?((t="object"==typeof t?t:{}).db=e,e=null):"object"==typeof e&&"function"==typeof e.db&&(t=e,e=null),"function"==typeof t&&(n=t,t={}),(!t||"function"!=typeof t.db)&&"string"!=typeof e){if(o=new b("Must provide a location for the database"),n)return r.nextTick(function(){n(o)});throw o}t=w(this,t),this.options=u(E,t),this._status="new",f(this,"location",e,"e"),this.open(n)}function o(e){return function(t,r){k()[e](t,r||function(){})}}var s=e("events").EventEmitter,a=e("util").inherits,u=e("xtend"),f=e("prr"),l=e("deferred-leveldown"),c=e("./errors").WriteError,h=e("./errors").ReadError,d=e("./errors").NotFoundError,p=e("./errors").OpenError,g=e("./errors").EncodingError,b=e("./errors").InitializationError,_=e("./read-stream"),y=e("./write-stream"),m=e("./util"),v=e("./batch"),w=m.getOptions,E=m.defaultOptions,k=m.getLevelDOWN,x=m.dispatchError;a(i,s),i.prototype.open=function(e){var t,n,i=this;return this.isOpen()?(e&&r.nextTick(function(){e(null,i)}),this):this._isOpening()?e&&this.once("open",function(){e(null,i)}):(this.emit("opening"),this._status="opening",this.db=new l(this.location),t=this.options.db||k(),void(n=t(this.location)).open(this.options,function(t){if(t)return x(i,new p(t),e);i.db.setDb(n),i.db=n,i._status="open",e&&e(null,i),i.emit("open"),i.emit("ready")}))},i.prototype.close=function(e){var t=this;if(this.isOpen())this._status="closing",this.db.close(function(){t._status="closed",t.emit("closed"),e&&e.apply(null,arguments)}),this.emit("closing"),this.db=null;else{if("closed"==this._status&&e)return r.nextTick(e);"closing"==this._status&&e?this.once("closed",e):this._isOpening()&&this.once("open",function(){t.close(e)})}},i.prototype.isOpen=function(){return"open"==this._status},i.prototype._isOpening=function(){return"opening"==this._status},i.prototype.isClosed=function(){return/^clos/.test(this._status)},i.prototype.get=function(e,t,r){var i,o=this;return"function"!=typeof(r=n(t,r))?x(this,new h("get() requires key and callback arguments")):this._isOpening()||this.isOpen()?(t=m.getOptions(this,t),i=m.encodeKey(e,t),t.asBuffer=m.isValueAsBuffer(t),void this.db.get(i,t,function(n,i){if(n)return n=/notfound/i.test(n)?new d("Key not found in database ["+e+"]",n):new h(n),x(o,n,r);if(r){try{i=m.decodeValue(i,t)}catch(e){return r(new g(e))}r(null,i)}})):x(this,new h("Database is not open"),r)},i.prototype.put=function(e,t,r,i){var o,s,a=this;return i=n(r,i),null===e||void 0===e||null===t||void 0===t?x(this,new c("put() requires key and value arguments"),i):this._isOpening()||this.isOpen()?(r=w(this,r),o=m.encodeKey(e,r),s=m.encodeValue(t,r),void this.db.put(o,s,r,function(r){if(r)return x(a,new c(r),i);a.emit("put",e,t),i&&i()})):x(this,new c("Database is not open"),i)},i.prototype.del=function(e,t,r){var i,o=this;return r=n(t,r),null===e||void 0===e?x(this,new c("del() requires a key argument"),r):this._isOpening()||this.isOpen()?(t=w(this,t),i=m.encodeKey(e,t),void this.db.del(i,t,function(t){if(t)return x(o,new c(t),r);o.emit("del",e),r&&r()})):x(this,new c("Database is not open"),r)},i.prototype.batch=function(e,t,r){var i,o,s,a=this;return arguments.length?(r=n(t,r),Array.isArray(e)?this._isOpening()||this.isOpen()?(t=w(this,t),i=t.keyEncoding,o=t.valueEncoding,s=e.map(function(e){if(void 0===e.type||void 0===e.key)return{};var r,n=e.keyEncoding||i,s=e.valueEncoding||e.encoding||o;return"utf8"!=n&&"binary"!=n||"utf8"!=s&&"binary"!=s?(r={type:e.type,key:m.encodeKey(e.key,t,e)},void 0!==e.value&&(r.value=m.encodeValue(e.value,t,e)),r):e}),void this.db.batch(s,t,function(t){if(t)return x(a,new c(t),r);a.emit("batch",e),r&&r()})):x(this,new c("Database is not open"),r):x(this,new c("batch() requires an array argument"),r)):new v(this)},i.prototype.approximateSize=function(e,t,r){var n,i,o=this;return null===e||void 0===e||null===t||void 0===t||"function"!=typeof r?x(this,new h("approximateSize() requires start, end and callback arguments"),r):(n=m.encodeKey(e,this.options),i=m.encodeKey(t,this.options),this._isOpening()||this.isOpen()?void this.db.approximateSize(n,i,function(e,t){if(e)return x(o,new p(e),r);r&&r(null,t)}):x(this,new c("Database is not open"),r))},i.prototype.readStream=i.prototype.createReadStream=function(e){var t=this;return e=u(this.options,e),new _(e,this,function(e){return t.db.iterator(e)})},i.prototype.keyStream=i.prototype.createKeyStream=function(e){return this.createReadStream(u(e,{keys:!0,values:!1}))},i.prototype.valueStream=i.prototype.createValueStream=function(e){return this.createReadStream(u(e,{keys:!1,values:!0}))},i.prototype.writeStream=i.prototype.createWriteStream=function(e){return new y(u(e),this)},i.prototype.toString=function(){return"LevelUP"},t.exports=i,t.exports.copy=m.copy,t.exports.destroy=o("destroy"),t.exports.repair=o("repair")}).call(this,e("_process"))},{"./batch":78,"./errors":79,"./read-stream":81,"./util":82,"./write-stream":83,_process:130,"deferred-leveldown":22,events:26,prr:131,util:156,xtend:90}],81:[function(e,t,r){function n(e,t,r){if(!(this instanceof n))return new n(e,t,r);i.call(this,{objectMode:!0,highWaterMark:e.highWaterMark}),this._db=t,e=this._options=s(f,e),this._keyEncoding=e.keyEncoding||e.encoding,this._valueEncoding=e.valueEncoding||e.encoding,void 0!==this._options.start&&(this._options.start=u.encodeKey(this._options.start,this._options)),void 0!==this._options.end&&(this._options.end=u.encodeKey(this._options.end,this._options)),"number"!=typeof this._options.limit&&(this._options.limit=-1),this._options.keyAsBuffer=u.isKeyAsBuffer(this._options),this._options.valueAsBuffer=u.isValueAsBuffer(this._options),this._makeData=this._options.keys&&this._options.values?l:this._options.keys?c:this._options.values?h:d;var o=this;this._db.isOpen()?this._iterator=r(this._options):this._db.once("ready",function(){o._destroyed||(o._iterator=r(o._options))})}var i=e("readable-stream").Readable,o=e("util").inherits,s=e("xtend"),a=e("./errors").EncodingError,u=e("./util"),f={keys:!0,values:!0},l=function(e,t){return{key:u.decodeKey(e,this._options),value:u.decodeValue(t,this._options)}},c=function(e){return u.decodeKey(e,this._options)},h=function(e,t){return u.decodeValue(t,this._options)},d=function(){return null};o(n,i),n.prototype._read=function e(){var t=this;if(!t._db.isOpen())return t._db.once("ready",function(){e.call(t)});t._destroyed||t._iterator.next(function(e,r,n){if(e||void 0===r&&void 0===n)return e||t._destroyed||t.push(null),t._cleanup(e);try{n=t._makeData(r,n)}catch(e){return t._cleanup(new a(e))}t._destroyed||t.push(n)})},n.prototype._cleanup=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;e&&t.emit("error",e),t._iterator?t._iterator.end(function(){t._iterator=null,t.emit("close")}):t.emit("close")}},n.prototype.destroy=function(){this._cleanup()},n.prototype.toString=function(){return"LevelUP.ReadStream"},t.exports=n},{"./errors":79,"./util":82,"readable-stream":89,util:156,xtend:90}],82:[function(e,t,r){(function(r,n){function i(e,t){var r=t&&t.keyEncoding||e.keyEncoding||"utf8";return c[r]||r}function o(e,t){var r=t&&(t.valueEncoding||t.encoding)||e.valueEncoding||e.encoding||"utf8";return c[r]||r}var s,a=e("xtend"),u=e("./errors").LevelUPError,f=["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le"],l={createIfMissing:!0,errorIfExists:!1,keyEncoding:"utf8",valueEncoding:"utf8",compression:!0},c=function(){function e(e){return void 0===e||null===e||n.isBuffer(e)}var t={};return t.utf8=t["utf-8"]={encode:function(t){return e(t)?t:String(t)},decode:function(e){return e},buffer:!1,type:"utf8"},t.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"},f.forEach(function(i){t[i]||(t[i]={encode:function(t){return e(t)?t:new n(t,i)},decode:function(e){return r.browser?e.toString(i):e},buffer:!0,type:i})}),t}(),h=function(){var e={};return f.forEach(function(t){e[t]={valueEncoding:t}}),e}();t.exports={defaultOptions:l,copy:function(e,t,r){e.readStream().pipe(t.writeStream()).on("close",r||function(){}).on("error",r||function(e){throw e})},getOptions:function(e,t){var r="string"==typeof t;return!r&&t&&t.encoding&&!t.valueEncoding&&(t.valueEncoding=t.encoding),a(e&&e.options||{},r?h[t]||h[l.valueEncoding]:t)},getLevelDOWN:function(){if(s)return s;var t,r=e("../package.json").devDependencies.leveldown;try{t=e("leveldown/package").version}catch(e){throw new u("Could not locate LevelDOWN, try `npm install leveldown`")}if(!e("semver").satisfies(t,r))throw new u("Installed version of LevelDOWN ("+t+") does not match required version ("+r+")");try{return s=e("leveldown")}catch(e){throw new u("Could not locate LevelDOWN, try `npm install leveldown`")}},dispatchError:function(e,t,r){return"function"==typeof r?r(t):e.emit("error",t)},encodeKey:function(e,t,r){return i(t,r).encode(e)},encodeValue:function(e,t,r){return o(t,r).encode(e)},isValueAsBuffer:function(e,t){return o(e,t).buffer},isKeyAsBuffer:function(e,t){return i(e,t).buffer},decodeValue:function(e,t){return o(t).decode(e)},decodeKey:function(e,t){return i(t).decode(e)}}}).call(this,e("_process"),e("buffer").Buffer)},{"../package.json":91,"./errors":79,_process:130,buffer:18,leveldown:14,"leveldown/package":14,semver:14,xtend:90}],83:[function(e,t,r){(function(r,n){function i(e,t){if(!(this instanceof i))return new i(e,t);o.call(this),this._options=a(c,l(t,e)),this._db=t,this._buffer=[],this._status="init",this._end=!1,this.writable=!0,this.readable=!1;var r=this,n=function(){r.writable&&(r._status="ready",r.emit("ready"),r._process())};t.isOpen()?f(n):t.once("ready",n)}var o=e("stream").Stream,s=e("util").inherits,a=e("xtend"),u=e("bl"),f=n.setImmediate||r.nextTick,l=e("./util").getOptions,c={type:"put"};s(i,o),i.prototype.write=function(e){return!!this.writable&&(this._buffer.push(e),"init"!=this._status&&this._processDelayed(),!(this._options.maxBufferLength&&this._buffer.length>this._options.maxBufferLength)||(this._writeBlock=!0,!1))},i.prototype.end=function(e){var t=this;e&&this.write(e),f(function(){t._end=!0,t._process()})},i.prototype.destroy=function(){this.writable=!1,this.end()},i.prototype.destroySoon=function(){this.end()},i.prototype.add=function(e){if(e.props)return e.props.Directory?e.pipe(this._db.writeStream(this._options)):(e.props.File||e.File||"File"==e.type)&&this._write(e),!0},i.prototype._processDelayed=function(){var e=this;f(function(){e._process()})},i.prototype._process=function(){var e,t=this;if("ready"==t._status||!t.writable)return t._buffer.length&&t.writable?(t._status="writing",e=t._buffer,t._buffer=[],t._db.batch(e.map(function(e){return{type:e.type||t._options.type,key:e.key,value:e.value,keyEncoding:e.keyEncoding||t._options.keyEncoding,valueEncoding:e.valueEncoding||e.encoding||t._options.valueEncoding}}),function(e){if(t.writable){if("closed"!=t._status&&(t._status="ready"),e)return t.writable=!1,t.emit("error",e);t._process()}}),void(t._writeBlock&&(t._writeBlock=!1,t.emit("drain")))):void(t._end&&"closed"!=t._status&&(t._status="closed",t.writable=!1,t.emit("close")));t._buffer.length&&"closed"!=t._status&&t._processDelayed()},i.prototype._write=function(e){var t=e.path||e.props.path,r=this;t&&e.pipe(u(function(e,n){if(e)return r.writable=!1,r.emit("error",e);r._options.fstreamRoot&&t.indexOf(r._options.fstreamRoot)>-1&&(t=t.substr(r._options.fstreamRoot.length+1)),r.write({key:t,value:n.slice(0)})}))},i.prototype.toString=function(){return"LevelUP.WriteStream"},t.exports=i}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./util":82,_process:130,bl:7,stream:148,util:156,xtend:90}],84:[function(e,t,r){arguments[4][8][0].apply(r,arguments)},{"./_stream_readable":86,"./_stream_writable":88,_process:130,"core-util-is":21,dup:8,inherits:39}],85:[function(e,t,r){arguments[4][9][0].apply(r,arguments)},{"./_stream_transform":87,"core-util-is":21,dup:9,inherits:39}],86:[function(e,t,r){arguments[4][10][0].apply(r,arguments)},{_process:130,buffer:18,"core-util-is":21,dup:10,events:26,inherits:39,isarray:42,stream:148,"string_decoder/":150}],87:[function(e,t,r){arguments[4][11][0].apply(r,arguments)},{"./_stream_duplex":84,"core-util-is":21,dup:11,inherits:39}],88:[function(e,t,r){arguments[4][12][0].apply(r,arguments)},{"./_stream_duplex":84,_process:130,buffer:18,"core-util-is":21,dup:12,inherits:39,stream:148}],89:[function(e,t,r){arguments[4][13][0].apply(r,arguments)},{"./lib/_stream_duplex.js":84,"./lib/_stream_passthrough.js":85,"./lib/_stream_readable.js":86,"./lib/_stream_transform.js":87,"./lib/_stream_writable.js":88,_process:130,dup:13,stream:148}],90:[function(e,t,r){arguments[4][4][0].apply(r,arguments)},{dup:4}],91:[function(e,t,r){t.exports={name:"levelup",description:"Fast & simple storage - a Node.js-style LevelDB wrapper",version:"0.18.6",contributors:["Rod Vagg <r@va.gg> (https://github.com/rvagg)","John Chesley <john@chesl.es> (https://github.com/chesles/)","Jake Verbaten <raynos2@gmail.com> (https://github.com/raynos)","Dominic Tarr <dominic.tarr@gmail.com> (https://github.com/dominictarr)","Max Ogden <max@maxogden.com> (https://github.com/maxogden)","Lars-Magnus Skog <lars.magnus.skog@gmail.com> (https://github.com/ralphtheninja)","David Bjrklund <david.bjorklund@gmail.com> (https://github.com/kesla)","Julian Gruber <julian@juliangruber.com> (https://github.com/juliangruber)","Paolo Fragomeni <paolo@async.ly> (https://github.com/hij1nx)","Anton Whalley <anton.whalley@nearform.com> (https://github.com/No9)","Matteo Collina <matteo.collina@gmail.com> (https://github.com/mcollina)","Pedro Teixeira <pedro.teixeira@gmail.com> (https://github.com/pgte)","James Halliday <mail@substack.net> (https://github.com/substack)"],repository:{type:"git",url:"https://github.com/rvagg/node-levelup.git"},homepage:"https://github.com/rvagg/node-levelup",keywords:["leveldb","stream","database","db","store","storage","json"],main:"lib/levelup.js",dependencies:{bl:"~0.8.1","deferred-leveldown":"~0.2.0",errno:"~0.1.1",prr:"~0.0.0","readable-stream":"~1.0.26",semver:"~2.3.1",xtend:"~3.0.0"},devDependencies:{leveldown:"~0.10.0",bustermove:"*",tap:"*",referee:"*",rimraf:"*",async:"*",fstream:"*",tar:"*",mkfiletree:"*",readfiletree:"*","slow-stream":">=0.0.4",delayed:"*",boganipsum:"*",du:"*",memdown:"*","msgpack-js":"*"},browser:{leveldown:!1,"leveldown/package":!1,semver:!1},scripts:{test:"tap test/*-test.js --stderr",functionaltests:"node ./test/functional/fstream-test.js && node ./test/functional/binary-data-test.js && node ./test/functional/compat-test.js",alltests:"npm test && npm run-script functionaltests"},license:"MIT"}},{}],92:[function(e,t,r){(function(e){function t(e,t){return Object.hasOwnProperty.call(e,t)}function n(e){return void 0!==e&&""!==e}function t(e,t){return Object.hasOwnProperty.call(e,t)}function i(e,t){return Object.hasOwnProperty.call(e,t)&&t}function o(e){return e}r.compare=function(t,r){if(e.isBuffer(t)){for(var n=Math.min(t.length,r.length),i=0;i<n;i++){var o=t[i]-r[i];if(o)return o}return t.length-r.length}return t<r?-1:t>r?1:0};var s=r.lowerBoundKey=function(e){return i(e,"gt")||i(e,"gte")||i(e,"min")||(e.reverse?i(e,"end"):i(e,"start"))||void 0},a=r.lowerBound=function(e,t){var r=s(e);return r?e[r]:t},u=r.lowerBoundInclusive=function(e){return!t(e,"gt")},f=r.upperBoundInclusive=function(e){return!t(e,"lt")},l=r.lowerBoundExclusive=function(e){return!u(e)},c=r.upperBoundExclusive=function(e){return!f(e)},h=r.upperBoundKey=function(e){return i(e,"lt")||i(e,"lte")||i(e,"max")||(e.reverse?i(e,"start"):i(e,"end"))||void 0},d=r.upperBound=function(e,t){var r=h(e);return r?e[r]:t};r.start=function(e,t){return e.reverse?d(e,t):a(e,t)},r.end=function(e,t){return e.reverse?a(e,t):d(e,t)},r.startInclusive=function(e){return e.reverse?f(e):u(e)},r.endInclusive=function(e){return e.reverse?u(e):f(e)},r.toLtgt=function(e,n,i,s,a){n=n||{},i=i||o;var u=arguments.length>3,f=r.lowerBoundKey(e),l=r.upperBoundKey(e);return f?"gt"===f?n.gt=i(e.gt,!1):n.gte=i(e[f],!1):u&&(n.gte=i(s,!1)),l?"lt"===l?n.lt=i(e.lt,!0):n.lte=i(e[l],!0):u&&(n.lte=i(a,!0)),null!=e.reverse&&(n.reverse=!!e.reverse),t(n,"max")&&delete n.max,t(n,"min")&&delete n.min,t(n,"start")&&delete n.start,t(n,"end")&&delete n.end,n},r.contains=function(e,t,i){i=i||r.compare;var o=a(e);if(n(o)&&((u=i(t,o))<0||0===u&&l(e)))return!1;var s=d(e);if(n(s)){var u=i(t,s);if(u>0||0===u&&c(e))return!1}return!0},r.filter=function(e,t){return function(n){return r.contains(e,n,t)}}}).call(this,{isBuffer:e("../is-buffer/index.js")})},{"../is-buffer/index.js":40}],93:[function(e,t,r){t.exports=function(e,t){return parseInt(e.toString(),t||8)}},{}],94:[function(e,t,r){function n(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function i(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}var o=e("wrappy");t.exports=o(n),t.exports.strict=o(i),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return i(this)},configurable:!0})})},{wrappy:157}],95:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var i in r)n(r,i)&&(e[i]=r[i])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){var t,r,n,i,o,s;for(n=0,t=0,r=e.length;t<r;t++)n+=e[t].length;for(s=new Uint8Array(n),i=0,t=0,r=e.length;t<r;t++)o=e[t],s.set(o,i),i+=o.length;return s}},s={arraySet:function(e,t,r,n,i){for(var o=0;o<n;o++)e[i+o]=t[r+o]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,o)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,s))},r.setTyped(i)},{}],96:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){for(var i=65535&e|0,o=e>>>16&65535|0,s=0;0!==r;){r-=s=r>2e3?2e3:r;do{o=o+(i=i+t[n++]|0)|0}while(--s);i%=65521,o%=65521}return i|o<<16|0}},{}],97:[function(e,t,r){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],98:[function(e,t,r){"use strict";var n=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,i){var o=n,s=i+r;e^=-1;for(var a=i;a<s;a++)e=e>>>8^o[255&(e^t[a])];return-1^e}},{}],99:[function(e,t,r){"use strict";function n(e,t){return e.msg=R[t],t}function i(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function s(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(x.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function a(e,t){S._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,s(e.strm)}function u(e,t){e.pending_buf[e.pending++]=t}function f(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function l(e,t,r,n){var i=e.avail_in;return i>n&&(i=n),0===i?0:(e.avail_in-=i,x.arraySet(t,e.input,e.next_in,i,r),1===e.state.wrap?e.adler=T(e.adler,t,i,r):2===e.state.wrap&&(e.adler=A(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)}function c(e,t){var r,n,i=e.max_chain_length,o=e.strstart,s=e.prev_length,a=e.nice_match,u=e.strstart>e.w_size-ne?e.strstart-(e.w_size-ne):0,f=e.window,l=e.w_mask,c=e.prev,h=e.strstart+re,d=f[o+s-1],p=f[o+s];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(r=t,f[r+s]===p&&f[r+s-1]===d&&f[r]===f[o]&&f[++r]===f[o+1]){o+=2,r++;do{}while(f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&f[++o]===f[++r]&&o<h);if(n=re-(h-o),o=h-re,n>s){if(e.match_start=t,s=n,n>=a)break;d=f[o+s-1],p=f[o+s]}}}while((t=c[t&l])>u&&0!=--i);return s<=e.lookahead?s:e.lookahead}function h(e){var t,r,n,i,o,s=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=s+(s-ne)){x.arraySet(e.window,e.window,s,s,0),e.match_start-=s,e.strstart-=s,e.block_start-=s,t=r=e.hash_size;do{n=e.head[--t],e.head[t]=n>=s?n-s:0}while(--r);t=r=s;do{n=e.prev[--t],e.prev[t]=n>=s?n-s:0}while(--r);i+=s}if(0===e.strm.avail_in)break;if(r=l(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=r,e.lookahead+e.insert>=te)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+te-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<te)););}while(e.lookahead<ne&&0!==e.strm.avail_in)}function d(e,t){for(var r,n;;){if(e.lookahead<ne){if(h(e),e.lookahead<ne&&t===I)return he;if(0===e.lookahead)break}if(r=0,e.lookahead>=te&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+te-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-ne&&(e.match_length=c(e,r)),e.match_length>=te)if(n=S._tr_tally(e,e.strstart-e.match_start,e.match_length-te),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=te){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+te-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=S._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(a(e,!1),0===e.strm.avail_out))return he}return e.insert=e.strstart<te-1?e.strstart:te-1,t===B?(a(e,!0),0===e.strm.avail_out?pe:ge):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?he:de}function p(e,t){for(var r,n,i;;){if(e.lookahead<ne){if(h(e),e.lookahead<ne&&t===I)return he;if(0===e.lookahead)break}if(r=0,e.lookahead>=te&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+te-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=te-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-ne&&(e.match_length=c(e,r),e.match_length<=5&&(e.strategy===z||e.match_length===te&&e.strstart-e.match_start>4096)&&(e.match_length=te-1)),e.prev_length>=te&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-te,n=S._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-te),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+te-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=te-1,e.strstart++,n&&(a(e,!1),0===e.strm.avail_out))return he}else if(e.match_available){if((n=S._tr_tally(e,0,e.window[e.strstart-1]))&&a(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return he}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=S._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<te-1?e.strstart:te-1,t===B?(a(e,!0),0===e.strm.avail_out?pe:ge):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?he:de}function g(e,t){for(var r,n,i,o,s=e.window;;){if(e.lookahead<=re){if(h(e),e.lookahead<=re&&t===I)return he;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=te&&e.strstart>0&&(i=e.strstart-1,(n=s[i])===s[++i]&&n===s[++i]&&n===s[++i])){o=e.strstart+re;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<o);e.match_length=re-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=te?(r=S._tr_tally(e,1,e.match_length-te),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=S._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(a(e,!1),0===e.strm.avail_out))return he}return e.insert=0,t===B?(a(e,!0),0===e.strm.avail_out?pe:ge):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?he:de}function b(e,t){for(var r;;){if(0===e.lookahead&&(h(e),0===e.lookahead)){if(t===I)return he;break}if(e.match_length=0,r=S._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(a(e,!1),0===e.strm.avail_out))return he}return e.insert=0,t===B?(a(e,!0),0===e.strm.avail_out?pe:ge):e.last_lit&&(a(e,!1),0===e.strm.avail_out)?he:de}function _(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function y(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=k[e.level].max_lazy,e.good_match=k[e.level].good_length,e.nice_match=k[e.level].nice_length,e.max_chain_length=k[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=te-1,e.match_available=0,e.ins_h=0}function m(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=q,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new x.Buf16(2*Q),this.dyn_dtree=new x.Buf16(2*(2*J+1)),this.bl_tree=new x.Buf16(2*(2*$+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new x.Buf16(ee+1),this.heap=new x.Buf16(2*X+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new x.Buf16(2*X+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function v(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=Y,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?oe:le,e.adler=2===t.wrap?0:1,t.last_flush=I,S._tr_init(t),j):n(e,C)}function w(e){var t=v(e);return t===j&&y(e.state),t}function E(e,t,r,i,o,s){if(!e)return C;var a=1;if(t===U&&(t=6),i<0?(a=0,i=-i):i>15&&(a=2,i-=16),o<1||o>V||r!==q||i<8||i>15||t<0||t>9||s<0||s>W)return n(e,C);8===i&&(i=9);var u=new m;return e.state=u,u.strm=e,u.wrap=a,u.gzhead=null,u.w_bits=i,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+te-1)/te),u.window=new x.Buf8(2*u.w_size),u.head=new x.Buf16(u.hash_size),u.prev=new x.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new x.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=t,u.strategy=s,u.method=r,w(e)}var k,x=e("../utils/common"),S=e("./trees"),T=e("./adler32"),A=e("./crc32"),R=e("./messages"),I=0,O=1,L=3,B=4,N=5,j=0,D=1,C=-2,M=-3,P=-5,U=-1,z=1,F=2,Z=3,W=4,H=0,Y=2,q=8,V=9,K=15,G=8,X=286,J=30,$=19,Q=2*X+1,ee=15,te=3,re=258,ne=re+te+1,ie=32,oe=42,se=69,ae=73,ue=91,fe=103,le=113,ce=666,he=1,de=2,pe=3,ge=4,be=3;k=[new _(0,0,0,0,function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(h(e),0===e.lookahead&&t===I)return he;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,a(e,!1),0===e.strm.avail_out))return he;if(e.strstart-e.block_start>=e.w_size-ne&&(a(e,!1),0===e.strm.avail_out))return he}return e.insert=0,t===B?(a(e,!0),0===e.strm.avail_out?pe:ge):(e.strstart>e.block_start&&(a(e,!1),e.strm.avail_out),he)}),new _(4,4,8,4,d),new _(4,5,16,8,d),new _(4,6,32,32,d),new _(4,4,16,16,p),new _(8,16,32,32,p),new _(8,16,128,128,p),new _(8,32,128,256,p),new _(32,128,258,1024,p),new _(32,258,258,4096,p)],r.deflateInit=function(e,t){return E(e,t,q,K,G,H)},r.deflateInit2=E,r.deflateReset=w,r.deflateResetKeep=v,r.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?C:(e.state.gzhead=t,j):C},r.deflate=function(e,t){var r,a,l,c;if(!e||!e.state||t>N||t<0)return e?n(e,C):C;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||a.status===ce&&t!==B)return n(e,0===e.avail_out?P:C);if(a.strm=e,r=a.last_flush,a.last_flush=t,a.status===oe)if(2===a.wrap)e.adler=0,u(a,31),u(a,139),u(a,8),a.gzhead?(u(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),u(a,255&a.gzhead.time),u(a,a.gzhead.time>>8&255),u(a,a.gzhead.time>>16&255),u(a,a.gzhead.time>>24&255),u(a,9===a.level?2:a.strategy>=F||a.level<2?4:0),u(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(u(a,255&a.gzhead.extra.length),u(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=A(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=se):(u(a,0),u(a,0),u(a,0),u(a,0),u(a,0),u(a,9===a.level?2:a.strategy>=F||a.level<2?4:0),u(a,be),a.status=le);else{var h=q+(a.w_bits-8<<4)<<8;h|=(a.strategy>=F||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(h|=ie),h+=31-h%31,a.status=le,f(a,h),0!==a.strstart&&(f(a,e.adler>>>16),f(a,65535&e.adler)),e.adler=1}if(a.status===se)if(a.gzhead.extra){for(l=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>l&&(e.adler=A(e.adler,a.pending_buf,a.pending-l,l)),s(e),l=a.pending,a.pending!==a.pending_buf_size));)u(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>l&&(e.adler=A(e.adler,a.pending_buf,a.pending-l,l)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=ae)}else a.status=ae;if(a.status===ae)if(a.gzhead.name){l=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>l&&(e.adler=A(e.adler,a.pending_buf,a.pending-l,l)),s(e),l=a.pending,a.pending===a.pending_buf_size)){c=1;break}c=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,u(a,c)}while(0!==c);a.gzhead.hcrc&&a.pending>l&&(e.adler=A(e.adler,a.pending_buf,a.pending-l,l)),0===c&&(a.gzindex=0,a.status=ue)}else a.status=ue;if(a.status===ue)if(a.gzhead.comment){l=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>l&&(e.adler=A(e.adler,a.pending_buf,a.pending-l,l)),s(e),l=a.pending,a.pending===a.pending_buf_size)){c=1;break}c=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,u(a,c)}while(0!==c);a.gzhead.hcrc&&a.pending>l&&(e.adler=A(e.adler,a.pending_buf,a.pending-l,l)),0===c&&(a.status=fe)}else a.status=fe;if(a.status===fe&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&s(e),a.pending+2<=a.pending_buf_size&&(u(a,255&e.adler),u(a,e.adler>>8&255),e.adler=0,a.status=le)):a.status=le),0!==a.pending){if(s(e),0===e.avail_out)return a.last_flush=-1,j}else if(0===e.avail_in&&i(t)<=i(r)&&t!==B)return n(e,P);if(a.status===ce&&0!==e.avail_in)return n(e,P);if(0!==e.avail_in||0!==a.lookahead||t!==I&&a.status!==ce){var d=a.strategy===F?b(a,t):a.strategy===Z?g(a,t):k[a.level].func(a,t);if(d!==pe&&d!==ge||(a.status=ce),d===he||d===pe)return 0===e.avail_out&&(a.last_flush=-1),j;if(d===de&&(t===O?S._tr_align(a):t!==N&&(S._tr_stored_block(a,0,0,!1),t===L&&(o(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),s(e),0===e.avail_out))return a.last_flush=-1,j}return t!==B?j:a.wrap<=0?D:(2===a.wrap?(u(a,255&e.adler),u(a,e.adler>>8&255),u(a,e.adler>>16&255),u(a,e.adler>>24&255),u(a,255&e.total_in),u(a,e.total_in>>8&255),u(a,e.total_in>>16&255),u(a,e.total_in>>24&255)):(f(a,e.adler>>>16),f(a,65535&e.adler)),s(e),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?j:D)},r.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==oe&&t!==se&&t!==ae&&t!==ue&&t!==fe&&t!==le&&t!==ce?n(e,C):(e.state=null,t===le?n(e,M):j):C},r.deflateSetDictionary=function(e,t){var r,n,i,s,a,u,f,l,c=t.length;if(!e||!e.state)return C;if(r=e.state,2===(s=r.wrap)||1===s&&r.status!==oe||r.lookahead)return C;for(1===s&&(e.adler=T(e.adler,t,c,0)),r.wrap=0,c>=r.w_size&&(0===s&&(o(r.head),r.strstart=0,r.block_start=0,r.insert=0),l=new x.Buf8(r.w_size),x.arraySet(l,t,c-r.w_size,r.w_size,0),t=l,c=r.w_size),a=e.avail_in,u=e.next_in,f=e.input,e.avail_in=c,e.next_in=0,e.input=t,h(r);r.lookahead>=te;){n=r.strstart,i=r.lookahead-(te-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+te-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--i);r.strstart=n,r.lookahead=te-1,h(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=te-1,r.match_available=0,e.next_in=u,e.input=f,e.avail_in=a,r.wrap=s,j},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":95,"./adler32":96,"./crc32":98,"./messages":103,"./trees":104}],100:[function(e,t,r){"use strict";t.exports=function(e,t){var r,n,i,o,s,a,u,f,l,c,h,d,p,g,b,_,y,m,v,w,E,k,x,S,T;r=e.state,n=e.next_in,S=e.input,i=n+(e.avail_in-5),o=e.next_out,T=e.output,s=o-(t-e.avail_out),a=o+(e.avail_out-257),u=r.dmax,f=r.wsize,l=r.whave,c=r.wnext,h=r.window,d=r.hold,p=r.bits,g=r.lencode,b=r.distcode,_=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{p<15&&(d+=S[n++]<<p,p+=8,d+=S[n++]<<p,p+=8),m=g[d&_];t:for(;;){if(v=m>>>24,d>>>=v,p-=v,0===(v=m>>>16&255))T[o++]=65535&m;else{if(!(16&v)){if(0==(64&v)){m=g[(65535&m)+(d&(1<<v)-1)];continue t}if(32&v){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}w=65535&m,(v&=15)&&(p<v&&(d+=S[n++]<<p,p+=8),w+=d&(1<<v)-1,d>>>=v,p-=v),p<15&&(d+=S[n++]<<p,p+=8,d+=S[n++]<<p,p+=8),m=b[d&y];r:for(;;){if(v=m>>>24,d>>>=v,p-=v,!(16&(v=m>>>16&255))){if(0==(64&v)){m=b[(65535&m)+(d&(1<<v)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(E=65535&m,v&=15,p<v&&(d+=S[n++]<<p,(p+=8)<v&&(d+=S[n++]<<p,p+=8)),(E+=d&(1<<v)-1)>u){e.msg="invalid distance too far back",r.mode=30;break e}if(d>>>=v,p-=v,v=o-s,E>v){if((v=E-v)>l&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(k=0,x=h,0===c){if(k+=f-v,v<w){w-=v;do{T[o++]=h[k++]}while(--v);k=o-E,x=T}}else if(c<v){if(k+=f+c-v,(v-=c)<w){w-=v;do{T[o++]=h[k++]}while(--v);if(k=0,c<w){w-=v=c;do{T[o++]=h[k++]}while(--v);k=o-E,x=T}}}else if(k+=c-v,v<w){w-=v;do{T[o++]=h[k++]}while(--v);k=o-E,x=T}for(;w>2;)T[o++]=x[k++],T[o++]=x[k++],T[o++]=x[k++],w-=3;w&&(T[o++]=x[k++],w>1&&(T[o++]=x[k++]))}else{k=o-E;do{T[o++]=T[k++],T[o++]=T[k++],T[o++]=T[k++],w-=3}while(w>2);w&&(T[o++]=T[k++],w>1&&(T[o++]=T[k++]))}break}}break}}while(n<i&&o<a);n-=w=p>>3,d&=(1<<(p-=w<<3))-1,e.next_in=n,e.next_out=o,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=o<a?a-o+257:257-(o-a),r.hold=d,r.bits=p}},{}],101:[function(e,t,r){"use strict";function n(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=B,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new d.Buf32(le),t.distcode=t.distdyn=new d.Buf32(ce),t.sane=1,t.back=-1,x):A}function s(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,o(e)):A}function a(e,t){var r,n;return e&&e.state?(n=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?A:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,s(e))):A}function u(e,t){var r,n;return e?(n=new i,e.state=n,n.window=null,(r=a(e,t))!==x&&(e.state=null),r):A}function f(e){if(de){var t;for(c=new d.Buf32(512),h=new d.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(_(m,e.lens,0,288,c,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;_(v,e.lens,0,32,h,0,e.work,{bits:5}),de=!1}e.lencode=c,e.lenbits=9,e.distcode=h,e.distbits=5}function l(e,t,r,n){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new d.Buf8(o.wsize)),n>=o.wsize?(d.arraySet(o.window,t,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>n&&(i=n),d.arraySet(o.window,t,r-n,i,o.wnext),(n-=i)?(d.arraySet(o.window,t,r-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}var c,h,d=e("../utils/common"),p=e("./adler32"),g=e("./crc32"),b=e("./inffast"),_=e("./inftrees"),y=0,m=1,v=2,w=4,E=5,k=6,x=0,S=1,T=2,A=-2,R=-3,I=-4,O=-5,L=8,B=1,N=2,j=3,D=4,C=5,M=6,P=7,U=8,z=9,F=10,Z=11,W=12,H=13,Y=14,q=15,V=16,K=17,G=18,X=19,J=20,$=21,Q=22,ee=23,te=24,re=25,ne=26,ie=27,oe=28,se=29,ae=30,ue=31,fe=32,le=852,ce=592,he=15,de=!0;r.inflateReset=s,r.inflateReset2=a,r.inflateResetKeep=o,r.inflateInit=function(e){return u(e,he)},r.inflateInit2=u,r.inflate=function(e,t){var r,i,o,s,a,u,c,h,le,ce,he,de,pe,ge,be,_e,ye,me,ve,we,Ee,ke,xe,Se,Te=0,Ae=new d.Buf8(4),Re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return A;(r=e.state).mode===W&&(r.mode=H),a=e.next_out,o=e.output,c=e.avail_out,s=e.next_in,i=e.input,u=e.avail_in,h=r.hold,le=r.bits,ce=u,he=c,ke=x;e:for(;;)switch(r.mode){case B:if(0===r.wrap){r.mode=H;break}for(;le<16;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}if(2&r.wrap&&35615===h){r.check=0,Ae[0]=255&h,Ae[1]=h>>>8&255,r.check=g(r.check,Ae,2,0),h=0,le=0,r.mode=N;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",r.mode=ae;break}if((15&h)!==L){e.msg="unknown compression method",r.mode=ae;break}if(h>>>=4,le-=4,Ee=8+(15&h),0===r.wbits)r.wbits=Ee;else if(Ee>r.wbits){e.msg="invalid window size",r.mode=ae;break}r.dmax=1<<Ee,e.adler=r.check=1,r.mode=512&h?F:W,h=0,le=0;break;case N:for(;le<16;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}if(r.flags=h,(255&r.flags)!==L){e.msg="unknown compression method",r.mode=ae;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=ae;break}r.head&&(r.head.text=h>>8&1),512&r.flags&&(Ae[0]=255&h,Ae[1]=h>>>8&255,r.check=g(r.check,Ae,2,0)),h=0,le=0,r.mode=j;case j:for(;le<32;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}r.head&&(r.head.time=h),512&r.flags&&(Ae[0]=255&h,Ae[1]=h>>>8&255,Ae[2]=h>>>16&255,Ae[3]=h>>>24&255,r.check=g(r.check,Ae,4,0)),h=0,le=0,r.mode=D;case D:for(;le<16;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}r.head&&(r.head.xflags=255&h,r.head.os=h>>8),512&r.flags&&(Ae[0]=255&h,Ae[1]=h>>>8&255,r.check=g(r.check,Ae,2,0)),h=0,le=0,r.mode=C;case C:if(1024&r.flags){for(;le<16;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}r.length=h,r.head&&(r.head.extra_len=h),512&r.flags&&(Ae[0]=255&h,Ae[1]=h>>>8&255,r.check=g(r.check,Ae,2,0)),h=0,le=0}else r.head&&(r.head.extra=null);r.mode=M;case M:if(1024&r.flags&&((de=r.length)>u&&(de=u),de&&(r.head&&(Ee=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),d.arraySet(r.head.extra,i,s,de,Ee)),512&r.flags&&(r.check=g(r.check,i,de,s)),u-=de,s+=de,r.length-=de),r.length))break e;r.length=0,r.mode=P;case P:if(2048&r.flags){if(0===u)break e;de=0;do{Ee=i[s+de++],r.head&&Ee&&r.length<65536&&(r.head.name+=String.fromCharCode(Ee))}while(Ee&&de<u);if(512&r.flags&&(r.check=g(r.check,i,de,s)),u-=de,s+=de,Ee)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=U;case U:if(4096&r.flags){if(0===u)break e;de=0;do{Ee=i[s+de++],r.head&&Ee&&r.length<65536&&(r.head.comment+=String.fromCharCode(Ee))}while(Ee&&de<u);if(512&r.flags&&(r.check=g(r.check,i,de,s)),u-=de,s+=de,Ee)break e}else r.head&&(r.head.comment=null);r.mode=z;case z:if(512&r.flags){for(;le<16;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}if(h!==(65535&r.check)){e.msg="header crc mismatch",r.mode=ae;break}h=0,le=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=W;break;case F:for(;le<32;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}e.adler=r.check=n(h),h=0,le=0,r.mode=Z;case Z:if(0===r.havedict)return e.next_out=a,e.avail_out=c,e.next_in=s,e.avail_in=u,r.hold=h,r.bits=le,T;e.adler=r.check=1,r.mode=W;case W:if(t===E||t===k)break e;case H:if(r.last){h>>>=7&le,le-=7&le,r.mode=ie;break}for(;le<3;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}switch(r.last=1&h,h>>>=1,le-=1,3&h){case 0:r.mode=Y;break;case 1:if(f(r),r.mode=J,t===k){h>>>=2,le-=2;break e}break;case 2:r.mode=K;break;case 3:e.msg="invalid block type",r.mode=ae}h>>>=2,le-=2;break;case Y:for(h>>>=7&le,le-=7&le;le<32;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}if((65535&h)!=(h>>>16^65535)){e.msg="invalid stored block lengths",r.mode=ae;break}if(r.length=65535&h,h=0,le=0,r.mode=q,t===k)break e;case q:r.mode=V;case V:if(de=r.length){if(de>u&&(de=u),de>c&&(de=c),0===de)break e;d.arraySet(o,i,s,de,a),u-=de,s+=de,c-=de,a+=de,r.length-=de;break}r.mode=W;break;case K:for(;le<14;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}if(r.nlen=257+(31&h),h>>>=5,le-=5,r.ndist=1+(31&h),h>>>=5,le-=5,r.ncode=4+(15&h),h>>>=4,le-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=ae;break}r.have=0,r.mode=G;case G:for(;r.have<r.ncode;){for(;le<3;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}r.lens[Re[r.have++]]=7&h,h>>>=3,le-=3}for(;r.have<19;)r.lens[Re[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,xe={bits:r.lenbits},ke=_(y,r.lens,0,19,r.lencode,0,r.work,xe),r.lenbits=xe.bits,ke){e.msg="invalid code lengths set",r.mode=ae;break}r.have=0,r.mode=X;case X:for(;r.have<r.nlen+r.ndist;){for(;Te=r.lencode[h&(1<<r.lenbits)-1],be=Te>>>24,_e=Te>>>16&255,ye=65535&Te,!(be<=le);){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}if(ye<16)h>>>=be,le-=be,r.lens[r.have++]=ye;else{if(16===ye){for(Se=be+2;le<Se;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}if(h>>>=be,le-=be,0===r.have){e.msg="invalid bit length repeat",r.mode=ae;break}Ee=r.lens[r.have-1],de=3+(3&h),h>>>=2,le-=2}else if(17===ye){for(Se=be+3;le<Se;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}le-=be,Ee=0,de=3+(7&(h>>>=be)),h>>>=3,le-=3}else{for(Se=be+7;le<Se;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}le-=be,Ee=0,de=11+(127&(h>>>=be)),h>>>=7,le-=7}if(r.have+de>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=ae;break}for(;de--;)r.lens[r.have++]=Ee}}if(r.mode===ae)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=ae;break}if(r.lenbits=9,xe={bits:r.lenbits},ke=_(m,r.lens,0,r.nlen,r.lencode,0,r.work,xe),r.lenbits=xe.bits,ke){e.msg="invalid literal/lengths set",r.mode=ae;break}if(r.distbits=6,r.distcode=r.distdyn,xe={bits:r.distbits},ke=_(v,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,xe),r.distbits=xe.bits,ke){e.msg="invalid distances set",r.mode=ae;break}if(r.mode=J,t===k)break e;case J:r.mode=$;case $:if(u>=6&&c>=258){e.next_out=a,e.avail_out=c,e.next_in=s,e.avail_in=u,r.hold=h,r.bits=le,b(e,he),a=e.next_out,o=e.output,c=e.avail_out,s=e.next_in,i=e.input,u=e.avail_in,h=r.hold,le=r.bits,r.mode===W&&(r.back=-1);break}for(r.back=0;Te=r.lencode[h&(1<<r.lenbits)-1],be=Te>>>24,_e=Te>>>16&255,ye=65535&Te,!(be<=le);){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}if(_e&&0==(240&_e)){for(me=be,ve=_e,we=ye;Te=r.lencode[we+((h&(1<<me+ve)-1)>>me)],be=Te>>>24,_e=Te>>>16&255,ye=65535&Te,!(me+be<=le);){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}h>>>=me,le-=me,r.back+=me}if(h>>>=be,le-=be,r.back+=be,r.length=ye,0===_e){r.mode=ne;break}if(32&_e){r.back=-1,r.mode=W;break}if(64&_e){e.msg="invalid literal/length code",r.mode=ae;break}r.extra=15&_e,r.mode=Q;case Q:if(r.extra){for(Se=r.extra;le<Se;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}r.length+=h&(1<<r.extra)-1,h>>>=r.extra,le-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=ee;case ee:for(;Te=r.distcode[h&(1<<r.distbits)-1],be=Te>>>24,_e=Te>>>16&255,ye=65535&Te,!(be<=le);){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}if(0==(240&_e)){for(me=be,ve=_e,we=ye;Te=r.distcode[we+((h&(1<<me+ve)-1)>>me)],be=Te>>>24,_e=Te>>>16&255,ye=65535&Te,!(me+be<=le);){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}h>>>=me,le-=me,r.back+=me}if(h>>>=be,le-=be,r.back+=be,64&_e){e.msg="invalid distance code",r.mode=ae;break}r.offset=ye,r.extra=15&_e,r.mode=te;case te:if(r.extra){for(Se=r.extra;le<Se;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}r.offset+=h&(1<<r.extra)-1,h>>>=r.extra,le-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=ae;break}r.mode=re;case re:if(0===c)break e;if(de=he-c,r.offset>de){if((de=r.offset-de)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=ae;break}de>r.wnext?(de-=r.wnext,pe=r.wsize-de):pe=r.wnext-de,de>r.length&&(de=r.length),ge=r.window}else ge=o,pe=a-r.offset,de=r.length;de>c&&(de=c),c-=de,r.length-=de;do{o[a++]=ge[pe++]}while(--de);0===r.length&&(r.mode=$);break;case ne:if(0===c)break e;o[a++]=r.length,c--,r.mode=$;break;case ie:if(r.wrap){for(;le<32;){if(0===u)break e;u--,h|=i[s++]<<le,le+=8}if(he-=c,e.total_out+=he,r.total+=he,he&&(e.adler=r.check=r.flags?g(r.check,o,he,a-he):p(r.check,o,he,a-he)),he=c,(r.flags?h:n(h))!==r.check){e.msg="incorrect data check",r.mode=ae;break}h=0,le=0}r.mode=oe;case oe:if(r.wrap&&r.flags){for(;le<32;){if(0===u)break e;u--,h+=i[s++]<<le,le+=8}if(h!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=ae;break}h=0,le=0}r.mode=se;case se:ke=S;break e;case ae:ke=R;break e;case ue:return I;case fe:default:return A}return e.next_out=a,e.avail_out=c,e.next_in=s,e.avail_in=u,r.hold=h,r.bits=le,(r.wsize||he!==e.avail_out&&r.mode<ae&&(r.mode<ie||t!==w))&&l(e,e.output,e.next_out,he-e.avail_out)?(r.mode=ue,I):(ce-=e.avail_in,he-=e.avail_out,e.total_in+=ce,e.total_out+=he,r.total+=he,r.wrap&&he&&(e.adler=r.check=r.flags?g(r.check,o,he,e.next_out-he):p(r.check,o,he,e.next_out-he)),e.data_type=r.bits+(r.last?64:0)+(r.mode===W?128:0)+(r.mode===J||r.mode===q?256:0),(0===ce&&0===he||t===w)&&ke===x&&(ke=O),ke)},r.inflateEnd=function(e){if(!e||!e.state)return A;var t=e.state;return t.window&&(t.window=null),e.state=null,x},r.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?A:(r.head=t,t.done=!1,x):A},r.inflateSetDictionary=function(e,t){var r,n,i=t.length;return e&&e.state?0!==(r=e.state).wrap&&r.mode!==Z?A:r.mode===Z&&(n=1,(n=p(n,t,i,0))!==r.check)?R:l(e,t,i,i)?(r.mode=ue,I):(r.havedict=1,x):A},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":95,"./adler32":96,"./crc32":98,"./inffast":100,"./inftrees":102}],102:[function(e,t,r){"use strict";var n=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,u,f,l,c,h){var d,p,g,b,_,y,m,v,w,E=h.bits,k=0,x=0,S=0,T=0,A=0,R=0,I=0,O=0,L=0,B=0,N=null,j=0,D=new n.Buf16(16),C=new n.Buf16(16),M=null,P=0;for(k=0;k<=15;k++)D[k]=0;for(x=0;x<u;x++)D[t[r+x]]++;for(A=E,T=15;T>=1&&0===D[T];T--);if(A>T&&(A=T),0===T)return f[l++]=20971520,f[l++]=20971520,h.bits=1,0;for(S=1;S<T&&0===D[S];S++);for(A<S&&(A=S),O=1,k=1;k<=15;k++)if(O<<=1,(O-=D[k])<0)return-1;if(O>0&&(0===e||1!==T))return-1;for(C[1]=0,k=1;k<15;k++)C[k+1]=C[k]+D[k];for(x=0;x<u;x++)0!==t[r+x]&&(c[C[t[r+x]]++]=x);if(0===e?(N=M=c,y=19):1===e?(N=i,j-=257,M=o,P-=257,y=256):(N=s,M=a,y=-1),B=0,x=0,k=S,_=l,R=A,I=0,g=-1,L=1<<A,b=L-1,1===e&&L>852||2===e&&L>592)return 1;for(;;){m=k-I,c[x]<y?(v=0,w=c[x]):c[x]>y?(v=M[P+c[x]],w=N[j+c[x]]):(v=96,w=0),d=1<<k-I,S=p=1<<R;do{f[_+(B>>I)+(p-=d)]=m<<24|v<<16|w|0}while(0!==p);for(d=1<<k-1;B&d;)d>>=1;if(0!==d?(B&=d-1,B+=d):B=0,x++,0==--D[k]){if(k===T)break;k=t[r+c[x]]}if(k>A&&(B&b)!==g){for(0===I&&(I=A),_+=S,O=1<<(R=k-I);R+I<T&&!((O-=D[R+I])<=0);)R++,O<<=1;if(L+=1<<R,1===e&&L>852||2===e&&L>592)return 1;f[g=B&b]=A<<24|R<<16|_-l|0}}return 0!==B&&(f[_+B]=k-I<<24|64<<16|0),h.bits=A,0}},{"../utils/common":95}],103:[function(e,t,r){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],104:[function(e,t,r){"use strict";function n(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function o(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function s(e){return e<256?te[e]:te[256+(e>>>7)]}function a(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function u(e,t,r){e.bi_valid>W-r?(e.bi_buf|=t<<e.bi_valid&65535,a(e,e.bi_buf),e.bi_buf=t>>W-e.bi_valid,e.bi_valid+=r-W):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function f(e,t,r){u(e,r[2*t],r[2*t+1])}function l(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function c(e){16===e.bi_valid?(a(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function h(e,t){var r,n,i,o,s,a,u=t.dyn_tree,f=t.max_code,l=t.stat_desc.static_tree,c=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,d=t.stat_desc.extra_base,p=t.stat_desc.max_length,g=0;for(o=0;o<=Z;o++)e.bl_count[o]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<F;r++)(o=u[2*u[2*(n=e.heap[r])+1]+1]+1)>p&&(o=p,g++),u[2*n+1]=o,n>f||(e.bl_count[o]++,s=0,n>=d&&(s=h[n-d]),a=u[2*n],e.opt_len+=a*(o+s),c&&(e.static_len+=a*(l[2*n+1]+s)));if(0!==g){do{for(o=p-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[p]--,g-=2}while(g>0);for(o=p;0!==o;o--)for(n=e.bl_count[o];0!==n;)(i=e.heap[--r])>f||(u[2*i+1]!==o&&(e.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),n--)}}function d(e,t,r){var n,i,o=new Array(Z+1),s=0;for(n=1;n<=Z;n++)o[n]=s=s+r[n-1]<<1;for(i=0;i<=t;i++){var a=e[2*i+1];0!==a&&(e[2*i]=l(o[a]++,a))}}function p(){var e,t,r,n,o,s=new Array(Z+1);for(r=0,n=0;n<C-1;n++)for(ne[n]=r,e=0;e<1<<G[n];e++)re[r++]=n;for(re[r-1]=n,o=0,n=0;n<16;n++)for(ie[n]=o,e=0;e<1<<X[n];e++)te[o++]=n;for(o>>=7;n<U;n++)for(ie[n]=o<<7,e=0;e<1<<X[n]-7;e++)te[256+o++]=n;for(t=0;t<=Z;t++)s[t]=0;for(e=0;e<=143;)Q[2*e+1]=8,e++,s[8]++;for(;e<=255;)Q[2*e+1]=9,e++,s[9]++;for(;e<=279;)Q[2*e+1]=7,e++,s[7]++;for(;e<=287;)Q[2*e+1]=8,e++,s[8]++;for(d(Q,P+1,s),e=0;e<U;e++)ee[2*e+1]=5,ee[2*e]=l(e,5);oe=new i(Q,G,M+1,P,Z),se=new i(ee,X,0,U,Z),ae=new i(new Array(0),J,0,z,H)}function g(e){var t;for(t=0;t<P;t++)e.dyn_ltree[2*t]=0;for(t=0;t<U;t++)e.dyn_dtree[2*t]=0;for(t=0;t<z;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Y]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function b(e){e.bi_valid>8?a(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function _(e,t,r,n){b(e),n&&(a(e,r),a(e,~r)),R.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}function y(e,t,r,n){var i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]}function m(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&y(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!y(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function v(e,t,r){var n,i,o,a,l=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*l]<<8|e.pending_buf[e.d_buf+2*l+1],i=e.pending_buf[e.l_buf+l],l++,0===n?f(e,i,t):(f(e,(o=re[i])+M+1,t),0!==(a=G[o])&&u(e,i-=ne[o],a),f(e,o=s(--n),r),0!==(a=X[o])&&u(e,n-=ie[o],a))}while(l<e.last_lit);f(e,Y,t)}function w(e,t){var r,n,i,o=t.dyn_tree,s=t.stat_desc.static_tree,a=t.stat_desc.has_stree,u=t.stat_desc.elems,f=-1;for(e.heap_len=0,e.heap_max=F,r=0;r<u;r++)0!==o[2*r]?(e.heap[++e.heap_len]=f=r,e.depth[r]=0):o[2*r+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=f<2?++f:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=s[2*i+1]);for(t.max_code=f,r=e.heap_len>>1;r>=1;r--)m(e,o,r);i=u;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],m(e,o,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,o[2*i]=o[2*r]+o[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,o[2*r+1]=o[2*n+1]=i,e.heap[1]=i++,m(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],h(e,t),d(o,f,e.bl_count)}function E(e,t,r){var n,i,o=-1,s=t[1],a=0,u=7,f=4;for(0===s&&(u=138,f=3),t[2*(r+1)+1]=65535,n=0;n<=r;n++)i=s,s=t[2*(n+1)+1],++a<u&&i===s||(a<f?e.bl_tree[2*i]+=a:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*q]++):a<=10?e.bl_tree[2*V]++:e.bl_tree[2*K]++,a=0,o=i,0===s?(u=138,f=3):i===s?(u=6,f=3):(u=7,f=4))}function k(e,t,r){var n,i,o=-1,s=t[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),n=0;n<=r;n++)if(i=s,s=t[2*(n+1)+1],!(++a<l&&i===s)){if(a<c)do{f(e,i,e.bl_tree)}while(0!=--a);else 0!==i?(i!==o&&(f(e,i,e.bl_tree),a--),f(e,q,e.bl_tree),u(e,a-3,2)):a<=10?(f(e,V,e.bl_tree),u(e,a-3,3)):(f(e,K,e.bl_tree),u(e,a-11,7));a=0,o=i,0===s?(l=138,c=3):i===s?(l=6,c=3):(l=7,c=4)}}function x(e){var t;for(E(e,e.dyn_ltree,e.l_desc.max_code),E(e,e.dyn_dtree,e.d_desc.max_code),w(e,e.bl_desc),t=z-1;t>=3&&0===e.bl_tree[2*$[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function S(e,t,r,n){var i;for(u(e,t-257,5),u(e,r-1,5),u(e,n-4,4),i=0;i<n;i++)u(e,e.bl_tree[2*$[i]+1],3);k(e,e.dyn_ltree,t-1),k(e,e.dyn_dtree,r-1)}function T(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return O;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return L;for(t=32;t<M;t++)if(0!==e.dyn_ltree[2*t])return L;return O}function A(e,t,r,n){u(e,(N<<1)+(n?1:0),3),_(e,t,r,!0)}var R=e("../utils/common"),I=4,O=0,L=1,B=2,N=0,j=1,D=2,C=29,M=256,P=M+1+C,U=30,z=19,F=2*P+1,Z=15,W=16,H=7,Y=256,q=16,V=17,K=18,G=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],X=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],J=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Q=new Array(2*(P+2));n(Q);var ee=new Array(2*U);n(ee);var te=new Array(512);n(te);var re=new Array(256);n(re);var ne=new Array(C);n(ne);var ie=new Array(U);n(ie);var oe,se,ae,ue=!1;r._tr_init=function(e){ue||(p(),ue=!0),e.l_desc=new o(e.dyn_ltree,oe),e.d_desc=new o(e.dyn_dtree,se),e.bl_desc=new o(e.bl_tree,ae),e.bi_buf=0,e.bi_valid=0,g(e)},r._tr_stored_block=A,r._tr_flush_block=function(e,t,r,n){var i,o,s=0;e.level>0?(e.strm.data_type===B&&(e.strm.data_type=T(e)),w(e,e.l_desc),w(e,e.d_desc),s=x(e),i=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==t?A(e,t,r,n):e.strategy===I||o===i?(u(e,(j<<1)+(n?1:0),3),v(e,Q,ee)):(u(e,(D<<1)+(n?1:0),3),S(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),v(e,e.dyn_ltree,e.dyn_dtree)),g(e),n&&b(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(re[r]+M+1)]++,e.dyn_dtree[2*s(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){u(e,j<<1,3),f(e,Y,Q),c(e)}},{"../utils/common":95}],105:[function(e,t,r){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],106:[function(e,t,r){(function(e){function t(e,t){for(var r=0,n=e.length-1;n>=0;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};r.resolve=function(){for(var r="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(r=s+"/"+r,i="/"===s.charAt(0))}return r=t(n(r.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+r||"."},r.normalize=function(e){var i=r.isAbsolute(e),o="/"===s(e,-1);return(e=t(n(e.split("/"),function(e){return!!e}),!i).join("/"))||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},r.isAbsolute=function(e){return"/"===e.charAt(0)},r.join=function(){var e=Array.prototype.slice.call(arguments,0);return r.normalize(n(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},r.relative=function(e,t){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=r.resolve(e).substr(1),t=r.resolve(t).substr(1);for(var i=n(e.split("/")),o=n(t.split("/")),s=Math.min(i.length,o.length),a=s,u=0;u<s;u++)if(i[u]!==o[u]){a=u;break}for(var f=[],u=a;u<i.length;u++)f.push("..");return(f=f.concat(o.slice(a))).join("/")},r.sep="/",r.delimiter=":",r.dirname=function(e){var t=o(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},r.basename=function(e,t){var r=o(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},r.extname=function(e){return o(e)[3]};var s="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,e("_process"))},{_process:130}],107:[function(e,t,r){(function(t){"use strict";function n(e,t){function r(){if(i===e.length)throw new Error("Ran out of data");var r=e[i];i++;var o,s,a,u,f,l,c,h;switch(t){default:throw new Error("unrecognised depth");case 16:c=e[i],i++,n.push((r<<8)+c);break;case 4:c=15&r,h=r>>4,n.push(h,c);break;case 2:f=3&r,l=r>>2&3,c=r>>4&3,h=r>>6&3,n.push(h,c,l,f);break;case 1:o=1&r,s=r>>1&1,a=r>>2&1,u=r>>3&1,f=r>>4&1,l=r>>5&1,c=r>>6&1,h=r>>7&1,n.push(h,c,l,f,u,a,s,o)}}var n=[],i=0;return{get:function(e){for(;n.length<e;)r();var t=n.slice(0,e);return n=n.slice(e),t},resetAfterLine:function(){n.length=0},end:function(){if(i!==e.length)throw new Error("extra data found")}}}function i(e,t,r,n,i,o){for(var s=e.width,u=e.height,f=e.index,l=0;l<u;l++)for(var c=0;c<s;c++){for(var h=r(c,l,f),d=0;d<4;d++){var p=a[n][d];if(255===p)t[h+d]=255;else{var g=p+o;if(g===i.length)throw new Error("Ran out of data");t[h+d]=i[g]}}o+=n}return o}function o(e,t,r,n,i,o){for(var s=e.width,u=e.height,f=e.index,l=0;l<u;l++){for(var c=0;c<s;c++)for(var h=i.get(n),d=r(c,l,f),p=0;p<4;p++){var g=a[n][p];t[d+p]=255!==g?h[g]:o}i.resetAfterLine()}}var s=e("./interlace"),a={1:{0:0,1:0,2:0,3:255},2:{0:0,1:0,2:0,3:1},3:{0:0,1:1,2:2,3:255},4:{0:0,1:1,2:2,3:3}};r.dataToBitMap=function(e,r){var a=r.width,u=r.height,f=r.depth,l=r.bpp,c=r.interlace;if(8!==f)var h=n(e,f);var d;d=f<=8?new t(a*u*4):new Uint16Array(a*u*4);var p,g,b=Math.pow(2,f)-1,_=0;if(c)p=s.getImagePasses(a,u),g=s.getInterlaceIterator(a,u);else{var y=0;g=function(){var e=y;return y+=4,e},p=[{width:a,height:u}]}for(var m=0;m<p.length;m++)8===f?_=i(p[m],d,g,l,e,_):o(p[m],d,g,l,h,b);if(8===f){if(_!==e.length)throw new Error("extra data found")}else h.end();return d}}).call(this,e("buffer").Buffer)},{"./interlace":117,buffer:18}],108:[function(e,t,r){(function(r){"use strict";var n=e("./constants");t.exports=function(e,t,i,o){var s=-1!==[n.COLORTYPE_COLOR_ALPHA,n.COLORTYPE_ALPHA].indexOf(o.colorType);if(o.colorType===o.inputColorType){var a=function(){var e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256!==new Int16Array(e)[0]}();if(8===o.bitDepth||16===o.bitDepth&&a)return e}var u=16!==o.bitDepth?e:new Uint16Array(e.buffer),f=255,l=n.COLORTYPE_TO_BPP_MAP[o.inputColorType],c=n.COLORTYPE_TO_BPP_MAP[o.colorType];16===o.bitDepth&&(f=65535,c*=2);var h=new r(t*i*c),d=0,p=0,g=o.bgColor||{};void 0===g.red&&(g.red=f),void 0===g.green&&(g.green=f),void 0===g.blue&&(g.blue=f);for(var b=0;b<i;b++)for(var _=0;_<t;_++){var y=function(e,t){var r,i,a,u=f;switch(o.inputColorType){case n.COLORTYPE_COLOR_ALPHA:u=e[t+3],r=e[t],i=e[t+1],a=e[t+2];break;case n.COLORTYPE_COLOR:r=e[t],i=e[t+1],a=e[t+2];break;case n.COLORTYPE_ALPHA:u=e[t+1],i=r=e[t],a=r;break;case n.COLORTYPE_GRAYSCALE:i=r=e[t],a=r;break;default:throw new Error("input color type:"+o.inputColorType+" is not supported at present")}return o.inputHasAlpha&&(s||(u/=f,r=Math.min(Math.max(Math.round((1-u)*g.red+u*r),0),f),i=Math.min(Math.max(Math.round((1-u)*g.green+u*i),0),f),a=Math.min(Math.max(Math.round((1-u)*g.blue+u*a),0),f))),{red:r,green:i,blue:a,alpha:u}}(u,d);switch(o.colorType){case n.COLORTYPE_COLOR_ALPHA:case n.COLORTYPE_COLOR:8===o.bitDepth?(h[p]=y.red,h[p+1]=y.green,h[p+2]=y.blue,s&&(h[p+3]=y.alpha)):(h.writeUInt16BE(y.red,p),h.writeUInt16BE(y.green,p+2),h.writeUInt16BE(y.blue,p+4),s&&h.writeUInt16BE(y.alpha,p+6));break;case n.COLORTYPE_ALPHA:case n.COLORTYPE_GRAYSCALE:var m=(y.red+y.green+y.blue)/3;8===o.bitDepth?(h[p]=m,s&&(h[p+1]=y.alpha)):(h.writeUInt16BE(m,p),s&&h.writeUInt16BE(y.alpha,p+2))}d+=l,p+=c}return h}}).call(this,e("buffer").Buffer)},{"./constants":110,buffer:18}],109:[function(e,t,r){(function(r,n){"use strict";var i=e("util"),o=e("stream"),s=t.exports=function(){o.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};i.inherits(s,o),s.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t}),r.nextTick(function(){this._process(),this._paused&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}.bind(this))},s.prototype.write=function(e,t){if(!this.writable)return this.emit("error",new Error("Stream not writable")),!1;var r;return r=n.isBuffer(e)?e:new n(e,t||this._encoding),this._buffers.push(r),this._buffered+=r.length,this._process(),this._reads&&0===this._reads.length&&(this._paused=!0),this.writable&&!this._paused},s.prototype.end=function(e,t){e&&this.write(e,t),this.writable=!1,this._buffers&&(0===this._buffers.length?this._end():(this._buffers.push(null),this._process()))},s.prototype.destroySoon=s.prototype.end,s.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("There are some read requests waiting on finished stream")),this.destroy()},s.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))},s.prototype._processReadAllowingLess=function(e){this._reads.shift();var t=this._buffers[0];t.length>e.length?(this._buffered-=e.length,this._buffers[0]=t.slice(e.length),e.func.call(this,t.slice(0,e.length))):(this._buffered-=t.length,this._buffers.shift(),e.func.call(this,t))},s.prototype._processRead=function(e){this._reads.shift();for(var t=0,r=0,i=new n(e.length);t<e.length;){var o=this._buffers[r++],s=Math.min(o.length,e.length-t);o.copy(i,t,0,s),t+=s,s!==o.length&&(this._buffers[--r]=o.slice(s))}r>0&&this._buffers.splice(0,r),this._buffered-=e.length,e.func.call(this,i)},s.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){var e=this._reads[0];if(e.allowLess)this._processReadAllowingLess(e);else{if(!(this._buffered>=e.length))break;this._processRead(e)}}this._buffers&&this._buffers.length>0&&null===this._buffers[0]&&this._end()}catch(e){this.emit("error",e)}}}).call(this,e("_process"),e("buffer").Buffer)},{_process:130,buffer:18,stream:148,util:156}],110:[function(e,t,r){"use strict";t.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}},{}],111:[function(e,t,r){"use strict";var n=[];!function(){for(var e=0;e<256;e++){for(var t=e,r=0;r<8;r++)1&t?t=3988292384^t>>>1:t>>>=1;n[e]=t}}();var i=t.exports=function(){this._crc=-1};i.prototype.write=function(e){for(var t=0;t<e.length;t++)this._crc=n[255&(this._crc^e[t])]^this._crc>>>8;return!0},i.prototype.crc32=function(){return-1^this._crc},i.crc32=function(e){for(var t=-1,r=0;r<e.length;r++)t=n[255&(t^e[r])]^t>>>8;return-1^t}},{}],112:[function(e,t,r){(function(r){"use strict";var n=e("./paeth-predictor"),i={0:function(e,t,r,n,i){e.copy(n,i,t,t+r)},1:function(e,t,r,n,i,o){for(var s=0;s<r;s++){var a=s>=o?e[t+s-o]:0,u=e[t+s]-a;n[i+s]=u}},2:function(e,t,r,n,i){for(var o=0;o<r;o++){var s=t>0?e[t+o-r]:0,a=e[t+o]-s;n[i+o]=a}},3:function(e,t,r,n,i,o){for(var s=0;s<r;s++){var a=s>=o?e[t+s-o]:0,u=t>0?e[t+s-r]:0,f=e[t+s]-(a+u>>1);n[i+s]=f}},4:function(e,t,r,i,o,s){for(var a=0;a<r;a++){var u=a>=s?e[t+a-s]:0,f=t>0?e[t+a-r]:0,l=t>0&&a>=s?e[t+a-(r+s)]:0,c=e[t+a]-n(u,f,l);i[o+a]=c}}},o={0:function(e,t,r){for(var n=0,i=t+r,o=t;o<i;o++)n+=Math.abs(e[o]);return n},1:function(e,t,r,n){for(var i=0,o=0;o<r;o++){var s=o>=n?e[t+o-n]:0,a=e[t+o]-s;i+=Math.abs(a)}return i},2:function(e,t,r){for(var n=0,i=t+r,o=t;o<i;o++){var s=t>0?e[o-r]:0,a=e[o]-s;n+=Math.abs(a)}return n},3:function(e,t,r,n){for(var i=0,o=0;o<r;o++){var s=o>=n?e[t+o-n]:0,a=t>0?e[t+o-r]:0,u=e[t+o]-(s+a>>1);i+=Math.abs(u)}return i},4:function(e,t,r,i){for(var o=0,s=0;s<r;s++){var a=s>=i?e[t+s-i]:0,u=t>0?e[t+s-r]:0,f=t>0&&s>=i?e[t+s-(r+i)]:0,l=e[t+s]-n(a,u,f);o+=Math.abs(l)}return o}};t.exports=function(e,t,n,s,a){var u;if("filterType"in s&&-1!==s.filterType){if("number"!=typeof s.filterType)throw new Error("unrecognised filter types");u=[s.filterType]}else u=[0,1,2,3,4];16===s.bitDepth&&(a*=2);for(var f=t*a,l=0,c=0,h=new r((f+1)*n),d=u[0],p=0;p<n;p++){if(u.length>1)for(var g=1/0,b=0;b<u.length;b++){var _=o[u[b]](e,c,f,a);_<g&&(d=u[b],g=_)}h[l]=d,l++,i[d](e,c,f,h,l,a),l+=f,c+=f}return h}}).call(this,e("buffer").Buffer)},{"./paeth-predictor":121,buffer:18}],113:[function(e,t,r){(function(r){"use strict";var n=e("util"),i=e("./chunkstream"),o=e("./filter-parse"),s=t.exports=function(e){i.call(this);var t=[],n=this;this._filter=new o(e,{read:this.read.bind(this),write:function(e){t.push(e)},complete:function(){n.emit("complete",r.concat(t))}}),this._filter.start()};n.inherits(s,i)}).call(this,e("buffer").Buffer)},{"./chunkstream":109,"./filter-parse":115,buffer:18,util:156}],114:[function(e,t,r){(function(t){"use strict";var n=e("./sync-reader"),i=e("./filter-parse");r.process=function(e,r){var o=[],s=new n(e);return new i(r,{read:s.read.bind(s),write:function(e){o.push(e)},complete:function(){}}).start(),s.process(),t.concat(o)}}).call(this,e("buffer").Buffer)},{"./filter-parse":115,"./sync-reader":128,buffer:18}],115:[function(e,t,r){(function(r){"use strict";function n(e,t,r){var n=e*t;return 8!==r&&(n=Math.ceil(n/(8/r))),n}var i=e("./interlace"),o=e("./paeth-predictor"),s=t.exports=function(e,t){var r=e.width,o=e.height,s=e.interlace,a=e.bpp,u=e.depth;if(this.read=t.read,this.write=t.write,this.complete=t.complete,this._imageIndex=0,this._images=[],s)for(var f=i.getImagePasses(r,o),l=0;l<f.length;l++)this._images.push({byteWidth:n(f[l].width,a,u),height:f[l].height,lineIndex:0});else this._images.push({byteWidth:n(r,a,u),height:o,lineIndex:0});this._xComparison=8===u?a:16===u?2*a:1};s.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))},s.prototype._unFilterType1=function(e,t,r){for(var n=this._xComparison,i=n-1,o=0;o<r;o++){var s=e[1+o],a=o>i?t[o-n]:0;t[o]=s+a}},s.prototype._unFilterType2=function(e,t,r){for(var n=this._lastLine,i=0;i<r;i++){var o=e[1+i],s=n?n[i]:0;t[i]=o+s}},s.prototype._unFilterType3=function(e,t,r){for(var n=this._xComparison,i=n-1,o=this._lastLine,s=0;s<r;s++){var a=e[1+s],u=o?o[s]:0,f=s>i?t[s-n]:0,l=Math.floor((f+u)/2);t[s]=a+l}},s.prototype._unFilterType4=function(e,t,r){for(var n=this._xComparison,i=n-1,s=this._lastLine,a=0;a<r;a++){var u=e[1+a],f=s?s[a]:0,l=a>i?t[a-n]:0,c=a>i&&s?s[a-n]:0,h=o(l,f,c);t[a]=u+h}},s.prototype._reverseFilterLine=function(e){var t,n=e[0],i=this._images[this._imageIndex],o=i.byteWidth;if(0===n)t=e.slice(1,o+1);else switch(t=new r(o),n){case 1:this._unFilterType1(e,t,o);break;case 2:this._unFilterType2(e,t,o);break;case 3:this._unFilterType3(e,t,o);break;case 4:this._unFilterType4(e,t,o);break;default:throw new Error("Unrecognised filter type - "+n)}this.write(t),i.lineIndex++,i.lineIndex>=i.height?(this._lastLine=null,this._imageIndex++,i=this._images[this._imageIndex]):this._lastLine=t,i?this.read(i.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}}).call(this,e("buffer").Buffer)},{"./interlace":117,"./paeth-predictor":121,buffer:18}],116:[function(e,t,r){(function(e){"use strict";function r(e,t,r,n,i){for(var o=0,s=0;s<n;s++)for(var a=0;a<r;a++){var u=i[e[o]];if(!u)throw new Error("index "+e[o]+" not in palette");for(var f=0;f<4;f++)t[o+f]=u[f];o+=4}}function n(e,t,r,n,i){for(var o=0,s=0;s<n;s++)for(var a=0;a<r;a++){var u=!1;if(1===i.length?i[0]===e[o]&&(u=!0):i[0]===e[o]&&i[1]===e[o+1]&&i[2]===e[o+2]&&(u=!0),u)for(var f=0;f<4;f++)t[o+f]=0;o+=4}}function i(e,t,r,n,i){for(var o=Math.pow(2,i)-1,s=0,a=0;a<n;a++)for(var u=0;u<r;u++){for(var f=0;f<4;f++)t[s+f]=Math.floor(255*e[s+f]/o+.5);s+=4}}t.exports=function(t,o){var s=o.depth,a=o.width,u=o.height,f=o.colorType,l=o.transColor,c=o.palette,h=t;return 3===f?r(t,h,a,u,c):(l&&n(t,h,a,u,l),8!==s&&(16===s&&(h=new e(a*u*4)),i(t,h,a,u,s))),h}}).call(this,e("buffer").Buffer)},{buffer:18}],117:[function(e,t,r){"use strict";var n=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];r.getImagePasses=function(e,t){for(var r=[],i=e%8,o=t%8,s=(e-i)/8,a=(t-o)/8,u=0;u<n.length;u++){for(var f=n[u],l=s*f.x.length,c=a*f.y.length,h=0;h<f.x.length&&f.x[h]<i;h++)l++;for(h=0;h<f.y.length&&f.y[h]<o;h++)c++;l>0&&c>0&&r.push({width:l,height:c,index:u})}return r},r.getInterlaceIterator=function(e){return function(t,r,i){var o=t%n[i].x.length,s=(t-o)/n[i].x.length*8+n[i].x[o],a=r%n[i].y.length;return 4*s+((r-a)/n[i].y.length*8+n[i].y[a])*e*4}}},{}],118:[function(e,t,r){(function(r){"use strict";var n=e("util"),i=e("stream"),o=e("./constants"),s=e("./packer"),a=t.exports=function(e){i.call(this);var t=e||{};this._packer=new s(t),this._deflate=this._packer.createDeflate(),this.readable=!0};n.inherits(a,i),a.prototype.pack=function(e,t,n,i){this.emit("data",new r(o.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(t,n)),i&&this.emit("data",this._packer.packGAMA(i));var s=this._packer.filterData(e,t,n);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",function(e){this.emit("data",this._packer.packIDAT(e))}.bind(this)),this._deflate.on("end",function(){this.emit("data",this._packer.packIEND()),this.emit("end")}.bind(this)),this._deflate.end(s)}}).call(this,e("buffer").Buffer)},{"./constants":110,"./packer":120,buffer:18,stream:148,util:156}],119:[function(e,t,r){(function(r){"use strict";var n=e("zlib"),i=e("./constants"),o=e("./packer");t.exports=function(e,t){var s=new o(t||{}),a=[];a.push(new r(i.PNG_SIGNATURE)),a.push(s.packIHDR(e.width,e.height)),e.gamma&&a.push(s.packGAMA(e.gamma));var u=s.filterData(e.data,e.width,e.height),f=n.deflateSync(u,s.getDeflateOptions());if(u=null,!f||!f.length)throw new Error("bad png - invalid compressed data response");return a.push(s.packIDAT(f)),a.push(s.packIEND()),r.concat(a)}}).call(this,e("buffer").Buffer)},{"./constants":110,"./packer":120,buffer:18,zlib:17}],120:[function(e,t,r){(function(r){"use strict";var n=e("./constants"),i=e("./crc"),o=e("./bitpacker"),s=e("./filter-pack"),a=e("zlib"),u=t.exports=function(e){if(this._options=e,e.deflateChunkSize=e.deflateChunkSize||32768,e.deflateLevel=null!=e.deflateLevel?e.deflateLevel:9,e.deflateStrategy=null!=e.deflateStrategy?e.deflateStrategy:3,e.inputHasAlpha=null==e.inputHasAlpha||e.inputHasAlpha,e.deflateFactory=e.deflateFactory||a.createDeflate,e.bitDepth=e.bitDepth||8,e.colorType="number"==typeof e.colorType?e.colorType:n.COLORTYPE_COLOR_ALPHA,e.inputColorType="number"==typeof e.inputColorType?e.inputColorType:n.COLORTYPE_COLOR_ALPHA,-1===[n.COLORTYPE_GRAYSCALE,n.COLORTYPE_COLOR,n.COLORTYPE_COLOR_ALPHA,n.COLORTYPE_ALPHA].indexOf(e.colorType))throw new Error("option color type:"+e.colorType+" is not supported at present");if(-1===[n.COLORTYPE_GRAYSCALE,n.COLORTYPE_COLOR,n.COLORTYPE_COLOR_ALPHA,n.COLORTYPE_ALPHA].indexOf(e.inputColorType))throw new Error("option input color type:"+e.inputColorType+" is not supported at present");if(8!==e.bitDepth&&16!==e.bitDepth)throw new Error("option bit depth:"+e.bitDepth+" is not supported at present")};u.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}},u.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())},u.prototype.filterData=function(e,t,r){var i=o(e,t,r,this._options),a=n.COLORTYPE_TO_BPP_MAP[this._options.colorType];return s(i,t,r,this._options,a)},u.prototype._packChunk=function(e,t){var n=t?t.length:0,o=new r(n+12);return o.writeUInt32BE(n,0),o.writeUInt32BE(e,4),t&&t.copy(o,8),o.writeInt32BE(i.crc32(o.slice(4,o.length-4)),o.length-4),o},u.prototype.packGAMA=function(e){var t=new r(4);return t.writeUInt32BE(Math.floor(e*n.GAMMA_DIVISION),0),this._packChunk(n.TYPE_gAMA,t)},u.prototype.packIHDR=function(e,t){var i=new r(13);return i.writeUInt32BE(e,0),i.writeUInt32BE(t,4),i[8]=this._options.bitDepth,i[9]=this._options.colorType,i[10]=0,i[11]=0,i[12]=0,this._packChunk(n.TYPE_IHDR,i)},u.prototype.packIDAT=function(e){return this._packChunk(n.TYPE_IDAT,e)},u.prototype.packIEND=function(){return this._packChunk(n.TYPE_IEND,null)}}).call(this,e("buffer").Buffer)},{"./bitpacker":108,"./constants":110,"./crc":111,"./filter-pack":112,buffer:18,zlib:17}],121:[function(e,t,r){"use strict";t.exports=function(e,t,r){var n=e+t-r,i=Math.abs(n-e),o=Math.abs(n-t),s=Math.abs(n-r);return i<=o&&i<=s?e:o<=s?t:r}},{}],122:[function(e,t,r){"use strict";var n=e("util"),i=e("zlib"),o=e("./chunkstream"),s=e("./filter-parse-async"),a=e("./parser"),u=e("./bitmapper"),f=e("./format-normaliser"),l=t.exports=function(e){o.call(this),this._parser=new a(e,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this)}),this._options=e,this.writable=!0,this._parser.start()};n.inherits(l,o),l.prototype._handleError=function(e){this.emit("error",e),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this.errord=!0},l.prototype._inflateData=function(e){if(!this._inflate)if(this._bitmapInfo.interlace)this._inflate=i.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter);else{var t=(1+(this._bitmapInfo.width*this._bitmapInfo.bpp*this._bitmapInfo.depth+7>>3))*this._bitmapInfo.height,r=Math.max(t,i.Z_MIN_CHUNK);this._inflate=i.createInflate({chunkSize:r});var n=t,o=this.emit.bind(this,"error");this._inflate.on("error",function(e){n&&o(e)}),this._filter.on("complete",this._complete.bind(this));var s=this._filter.write.bind(this._filter);this._inflate.on("data",function(e){n&&(e.length>n&&(e=e.slice(0,n)),n-=e.length,s(e))}),this._inflate.on("end",this._filter.end.bind(this._filter))}this._inflate.write(e)},l.prototype._handleMetaData=function(e){this.emit("metadata",e),this._bitmapInfo=Object.create(e),this._filter=new s(this._bitmapInfo)},l.prototype._handleTransColor=function(e){this._bitmapInfo.transColor=e},l.prototype._handlePalette=function(e){this._bitmapInfo.palette=e},l.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"),this.destroySoon())},l.prototype._complete=function(e){if(!this.errord){try{var t=u.dataToBitMap(e,this._bitmapInfo),r=f(t,this._bitmapInfo);t=null}catch(e){return void this._handleError(e)}this.emit("parsed",r)}}},{"./bitmapper":107,"./chunkstream":109,"./filter-parse-async":113,"./format-normaliser":116,"./parser":124,util:156,zlib:17}],123:[function(e,t,r){(function(r){"use strict";var n=e("zlib"),i=e("./sync-inflate"),o=e("./sync-reader"),s=e("./filter-parse-sync"),a=e("./parser"),u=e("./bitmapper"),f=e("./format-normaliser");t.exports=function(e,t){var l,c,h,d=[],p=new o(e);if(new a(t,{read:p.read.bind(p),error:function(e){l=e},metadata:function(e){c=e},gamma:function(e){h=e},palette:function(e){c.palette=e},transColor:function(e){c.transColor=e},inflateData:function(e){d.push(e)}}).start(),p.process(),l)throw l;var g=r.concat(d);d.length=0;var b;if(c.interlace)b=n.inflateSync(g);else{var _=(1+(c.width*c.bpp*c.depth+7>>3))*c.height;b=i(g,{chunkSize:_,maxLength:_})}if(g=null,!b||!b.length)throw new Error("bad png - invalid inflate data response");var y=s.process(b,c);g=null;var m=u.dataToBitMap(y,c);y=null;var v=f(m,c);return c.data=v,c.gamma=h||0,c}}).call(this,e("buffer").Buffer)},{"./bitmapper":107,"./filter-parse-sync":114,"./format-normaliser":116,"./parser":124,"./sync-inflate":127,"./sync-reader":128,buffer:18,zlib:17}],124:[function(e,t,r){(function(r){"use strict";var n=e("./constants"),i=e("./crc"),o=t.exports=function(e,t){this._options=e,e.checkCRC=!1!==e.checkCRC,this._hasIHDR=!1,this._hasIEND=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[n.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[n.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[n.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[n.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[n.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[n.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=t.read,this.error=t.error,this.metadata=t.metadata,this.gamma=t.gamma,this.transColor=t.transColor,this.palette=t.palette,this.parsed=t.parsed,this.inflateData=t.inflateData,this.finished=t.finished};o.prototype.start=function(){this.read(n.PNG_SIGNATURE.length,this._parseSignature.bind(this))},o.prototype._parseSignature=function(e){for(var t=n.PNG_SIGNATURE,r=0;r<t.length;r++)if(e[r]!==t[r])return void this.error(new Error("Invalid file signature"));this.read(8,this._parseChunkBegin.bind(this))},o.prototype._parseChunkBegin=function(e){for(var t=e.readUInt32BE(0),o=e.readUInt32BE(4),s="",a=4;a<8;a++)s+=String.fromCharCode(e[a]);var u=Boolean(32&e[4]);if(this._hasIHDR||o===n.TYPE_IHDR){if(this._crc=new i,this._crc.write(new r(s)),this._chunks[o])return this._chunks[o](t);u?this.read(t+4,this._skipChunk.bind(this)):this.error(new Error("Unsupported critical chunk type "+s))}else this.error(new Error("Expected IHDR on beggining"))},o.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))},o.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))},o.prototype._parseChunkEnd=function(e){var t=e.readInt32BE(0),r=this._crc.crc32();this._options.checkCRC&&r!==t?this.error(new Error("Crc error - "+t+" - "+r)):this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))},o.prototype._handleIHDR=function(e){this.read(e,this._parseIHDR.bind(this))},o.prototype._parseIHDR=function(e){this._crc.write(e);var t=e.readUInt32BE(0),r=e.readUInt32BE(4),i=e[8],o=e[9],s=e[10],a=e[11],u=e[12];if(8===i||4===i||2===i||1===i||16===i)if(o in n.COLORTYPE_TO_BPP_MAP)if(0===s)if(0===a)if(0===u||1===u){this._colorType=o;var f=n.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:t,height:r,depth:i,interlace:Boolean(u),palette:Boolean(o&n.COLORTYPE_PALETTE),color:Boolean(o&n.COLORTYPE_COLOR),alpha:Boolean(o&n.COLORTYPE_ALPHA),bpp:f,colorType:o}),this._handleChunkEnd()}else this.error(new Error("Unsupported interlace method"));else this.error(new Error("Unsupported filter method"));else this.error(new Error("Unsupported compression method"));else this.error(new Error("Unsupported color type"));else this.error(new Error("Unsupported bit depth "+i))},o.prototype._handlePLTE=function(e){this.read(e,this._parsePLTE.bind(this))},o.prototype._parsePLTE=function(e){this._crc.write(e);for(var t=Math.floor(e.length/3),r=0;r<t;r++)this._palette.push([e[3*r],e[3*r+1],e[3*r+2],255]);this.palette(this._palette),this._handleChunkEnd()},o.prototype._handleTRNS=function(e){this.read(e,this._parseTRNS.bind(this))},o.prototype._parseTRNS=function(e){if(this._crc.write(e),this._colorType===n.COLORTYPE_PALETTE_COLOR){if(0===this._palette.length)return void this.error(new Error("Transparency chunk must be after palette"));if(e.length>this._palette.length)return void this.error(new Error("More transparent colors than palette size"));for(var t=0;t<e.length;t++)this._palette[t][3]=e[t];this.palette(this._palette)}this._colorType===n.COLORTYPE_GRAYSCALE&&this.transColor([e.readUInt16BE(0)]),this._colorType===n.COLORTYPE_COLOR&&this.transColor([e.readUInt16BE(0),e.readUInt16BE(2),e.readUInt16BE(4)]),this._handleChunkEnd()},o.prototype._handleGAMA=function(e){this.read(e,this._parseGAMA.bind(this))},o.prototype._parseGAMA=function(e){this._crc.write(e),this.gamma(e.readUInt32BE(0)/n.GAMMA_DIVISION),this._handleChunkEnd()},o.prototype._handleIDAT=function(e){this.read(-e,this._parseIDAT.bind(this,e))},o.prototype._parseIDAT=function(e,t){if(this._crc.write(t),this._colorType===n.COLORTYPE_PALETTE_COLOR&&0===this._palette.length)throw new Error("Expected palette not found");this.inflateData(t);var r=e-t.length;r>0?this._handleIDAT(r):this._handleChunkEnd()},o.prototype._handleIEND=function(e){this.read(e,this._parseIEND.bind(this))},o.prototype._parseIEND=function(e){this._crc.write(e),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}}).call(this,e("buffer").Buffer)},{"./constants":110,"./crc":111,buffer:18}],125:[function(e,t,r){"use strict";var n=e("./parser-sync"),i=e("./packer-sync");r.read=function(e,t){return n(e,t||{})},r.write=function(e,t){return i(e,t)}},{"./packer-sync":119,"./parser-sync":123}],126:[function(e,t,r){(function(t,n){"use strict";var i=e("util"),o=e("stream"),s=e("./parser-async"),a=e("./packer-async"),u=e("./png-sync"),f=r.PNG=function(e){o.call(this),e=e||{},this.width=0|e.width,this.height=0|e.height,this.data=this.width>0&&this.height>0?new n(4*this.width*this.height):null,e.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new s(e),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",function(e){this.data=e,this.emit("parsed",e)}.bind(this)),this._packer=new a(e),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};i.inherits(f,o),f.sync=u,f.prototype.pack=function(){return this.data&&this.data.length?(t.nextTick(function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}.bind(this)),this):(this.emit("error","No data provided"),this)},f.prototype.parse=function(e,t){if(t){var r,n;r=function(e){this.removeListener("error",n),this.data=e,t(null,this)}.bind(this),n=function(e){this.removeListener("parsed",r),t(e,null)}.bind(this),this.once("parsed",r),this.once("error",n)}return this.end(e),this},f.prototype.write=function(e){return this._parser.write(e),!0},f.prototype.end=function(e){this._parser.end(e)},f.prototype._metadata=function(e){this.width=e.width,this.height=e.height,this.emit("metadata",e)},f.prototype._gamma=function(e){this.gamma=e},f.prototype._handleClose=function(){this._parser.writable||this._packer.readable||this.emit("close")},f.bitblt=function(e,t,r,n,i,o,s,a){if(r|=0,n|=0,i|=0,o|=0,s|=0,a|=0,r>e.width||n>e.height||r+i>e.width||n+o>e.height)throw new Error("bitblt reading outside image");if(s>t.width||a>t.height||s+i>t.width||a+o>t.height)throw new Error("bitblt writing outside image");for(var u=0;u<o;u++)e.data.copy(t.data,(a+u)*t.width+s<<2,(n+u)*e.width+r<<2,(n+u)*e.width+r+i<<2)},f.prototype.bitblt=function(e,t,r,n,i,o,s){return f.bitblt(this,e,t,r,n,i,o,s),this},f.adjustGamma=function(e){if(e.gamma){for(var t=0;t<e.height;t++)for(var r=0;r<e.width;r++)for(var n=e.width*t+r<<2,i=0;i<3;i++){var o=e.data[n+i]/255;o=Math.pow(o,1/2.2/e.gamma),e.data[n+i]=Math.round(255*o)}e.gamma=0}},f.prototype.adjustGamma=function(){f.adjustGamma(this)}}).call(this,e("_process"),e("buffer").Buffer)},{"./packer-async":118,"./parser-async":122,"./png-sync":125,_process:130,buffer:18,stream:148,util:156}],127:[function(e,t,r){(function(n,i){"use strict";function o(e){if(!(this instanceof o))return new o(e);e&&e.chunkSize<l.Z_MIN_CHUNK&&(e.chunkSize=l.Z_MIN_CHUNK),l.Inflate.call(this,e),e&&null!=e.maxLength&&(this._maxLength=e.maxLength)}function s(e,t){t&&n.nextTick(t),e._handle&&(e._handle.close(),e._handle=null)}function a(e,t){if("string"==typeof t&&(t=i.from(t)),!(t instanceof i))throw new TypeError("Not a string or buffer");var r=e._finishFlushFlag;return null==r&&(r=l.Z_FINISH),e._processChunk(t,r)}function u(e,t){return a(new o(t),e)}var f=e("assert").ok,l=e("zlib"),c=e("util"),h=e("buffer").kMaxLength;o.prototype._processChunk=function(e,t,r){if("function"==typeof r)return l.Inflate._processChunk.call(this,e,t,r);var n,o=this,a=e&&e.length,u=this._chunkSize-this._offset,c=this._maxLength,d=0,p=[],g=0;this.on("error",function(e){n=e}),f(this._handle,"zlib binding closed");do{var b=this._handle.writeSync(t,e,d,a,this._buffer,this._offset,u)}while(!this._hadError&&function(e,t){if(!o._hadError){var r=u-t;if(f(r>=0,"have should not go down"),r>0){var n=o._buffer.slice(o._offset,o._offset+r);if(o._offset+=r,n.length>c&&(n=n.slice(0,c)),p.push(n),g+=n.length,0==(c-=n.length))return!1}return(0===t||o._offset>=o._chunkSize)&&(u=o._chunkSize,o._offset=0,o._buffer=i.allocUnsafe(o._chunkSize)),0===t&&(d+=a-e,a=e,!0)}}(b[0],b[1]));if(this._hadError)throw n;if(g>=h)throw s(this),new RangeError("Cannot create final Buffer. It would be larger than 0x"+h.toString(16)+" bytes");var _=i.concat(p,g);return s(this),_},c.inherits(o,l.Inflate),t.exports=r=u,r.Inflate=o,r.createInflate=function(e){return new o(e)},r.inflateSync=u}).call(this,e("_process"),e("buffer").Buffer)},{_process:130,assert:5,buffer:18,util:156,zlib:17}],128:[function(e,t,r){"use strict";var n=t.exports=function(e){this._buffer=e,this._reads=[]};n.prototype.read=function(e,t){this._reads.push({length:Math.abs(e),allowLess:e<0,func:t})},n.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){var e=this._reads[0];if(!this._buffer.length||!(this._buffer.length>=e.length||e.allowLess))break;this._reads.shift();var t=this._buffer;this._buffer=t.slice(e.length),e.func.call(this,t.slice(0,e.length))}return this._reads.length>0?new Error("There are some read requests waitng on finished stream"):this._buffer.length>0?new Error("unrecognised content at end of stream"):void 0}},{}],129:[function(e,t,r){(function(e){"use strict";!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=function(t,r,n,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,r)});case 3:return e.nextTick(function(){t.call(null,r,n)});case 4:return e.nextTick(function(){t.call(null,r,n,i)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}:t.exports=e.nextTick}).call(this,e("_process"))},{_process:130}],130:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function s(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{return h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}function a(){b&&p&&(b=!1,p.length?g=p.concat(g):_=-1,g.length&&u())}function u(){if(!b){var e=o(a);b=!0;for(var t=g.length;t;){for(p=g,g=[];++_<t;)p&&p[_].run();_=-1,t=g.length}p=null,b=!1,s(e)}}function f(e,t){this.fun=e,this.array=t}function l(){}var c,h,d=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var p,g=[],b=!1,_=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];g.push(new f(e,t)),1!==g.length||b||o(u)},f.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],131:[function(e,t,r){!function(e,r,n){void 0!==t&&t.exports?t.exports=n():r.prr=n()}(0,this,function(){var e="function"==typeof Object.defineProperty?function(e,t,r){return Object.defineProperty(e,t,r),e}:function(e,t,r){return e[t]=r.value,e},t=function(e,t){var r="object"==typeof t,n=!r&&"string"==typeof t,i=function(e){return r?!!t[e]:!!n&&t.indexOf(e[0])>-1};return{enumerable:i("enumerable"),configurable:i("configurable"),writable:i("writable"),value:e}};return function(r,n,i,o){var s;if(o=t(i,o),"object"==typeof n){for(s in n)Object.hasOwnProperty.call(n,s)&&(o.value=n[s],e(r,s,o));return r}return e(r,n,o)}})},{}],132:[function(e,t,r){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":133}],133:[function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);f.call(this,e),l.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||s(o,this)}function o(e){e.end()}var s=e("process-nextick-args"),a=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=n;var u=e("core-util-is");u.inherits=e("inherits");var f=e("./_stream_readable"),l=e("./_stream_writable");u.inherits(n,f);for(var c=a(l.prototype),h=0;h<c.length;h++){var d=c[h];n.prototype[d]||(n.prototype[d]=l.prototype[d])}Object.defineProperty(n.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),n.prototype._destroy=function(e,t){this.push(null),this.end(),s(t,e)}},{"./_stream_readable":135,"./_stream_writable":137,"core-util-is":21,inherits:39,"process-nextick-args":129}],134:[function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);i.call(this,e)}t.exports=n;var i=e("./_stream_transform"),o=e("core-util-is");o.inherits=e("inherits"),o.inherits(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":136,"core-util-is":21,inherits:39}],135:[function(e,t,r){(function(r,n){"use strict";function i(e){return M.from(e)}function o(e){return M.isBuffer(e)||e instanceof P}function s(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?j(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function a(t,r){N=N||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof N&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new W,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Z||(Z=e("string_decoder/").StringDecoder),this.decoder=new Z(t.encoding),this.encoding=t.encoding)}function u(t){if(N=N||e("./_stream_duplex"),!(this instanceof u))return new u(t);this._readableState=new a(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),C.call(this)}function f(e,t,r,n,o){var s=e._readableState;if(null===t)s.reading=!1,g(e,s);else{var a;o||(a=c(s,t)),a?e.emit("error",a):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===M.prototype||(t=i(t)),n?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):l(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?l(e,s,t,!1):y(e,s)):l(e,s,t,!1))):n||(s.reading=!1)}return h(s)}function l(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&b(e)),y(e,t)}function c(e,t){var r;return o(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function h(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function d(e){return e>=q?e=q:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function p(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=d(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function g(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,b(e)}}function b(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(F("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?B(_,e):_(e))}function _(e){F("emit readable"),e.emit("readable"),x(e)}function y(e,t){t.readingMore||(t.readingMore=!0,B(m,e,t))}function m(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(F("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function v(e){return function(){var t=e._readableState;F("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&D(e,"data")&&(t.flowing=!0,x(e))}}function w(e){F("readable nexttick read 0"),e.read(0)}function E(e,t){t.resumeScheduled||(t.resumeScheduled=!0,B(k,e,t))}function k(e,t){t.reading||(F("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),x(e),t.flowing&&!t.reading&&e.read(0)}function x(e){var t=e._readableState;for(F("flow",t.flowing);t.flowing&&null!==e.read(););}function S(e,t){if(0===t.length)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=T(e,t.buffer,t.decoder),r}function T(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?A(e,t):R(e,t),n}function A(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(s===o.length?i+=o:i+=o.slice(0,e),0===(e-=s)){s===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(s));break}++n}return t.length-=n,i}function R(e,t){var r=M.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,s),0===(e-=s)){s===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(s));break}++i}return t.length-=i,r}function I(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,B(O,t,e))}function O(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function L(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}var B=e("process-nextick-args");t.exports=u;var N,j=e("isarray");u.ReadableState=a;e("events").EventEmitter;var D=function(e,t){return e.listeners(t).length},C=e("./internal/streams/stream"),M=e("safe-buffer").Buffer,P=n.Uint8Array||function(){},U=e("core-util-is");U.inherits=e("inherits");var z=e("util"),F=void 0;F=z&&z.debuglog?z.debuglog("stream"):function(){};var Z,W=e("./internal/streams/BufferList"),H=e("./internal/streams/destroy");U.inherits(u,C);var Y=["error","close","destroy","pause","resume"];Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),u.prototype.destroy=H.destroy,u.prototype._undestroy=H.undestroy,u.prototype._destroy=function(e,t){this.push(null),t(e)},u.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=M.from(e,t),t=""),r=!0),f(this,e,t,!1,r)},u.prototype.unshift=function(e){return f(this,e,null,!0,!1)},u.prototype.isPaused=function(){return!1===this._readableState.flowing},u.prototype.setEncoding=function(t){return Z||(Z=e("string_decoder/").StringDecoder),this._readableState.decoder=new Z(t),this._readableState.encoding=t,this};var q=8388608;u.prototype.read=function(e){F("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return F("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?I(this):b(this),null;if(0===(e=p(e,t))&&t.ended)return 0===t.length&&I(this),null;var n=t.needReadable;F("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&F("length less than watermark",n=!0),t.ended||t.reading?F("reading or ended",n=!1):n&&(F("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=p(r,t)));var i;return null===(i=e>0?S(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&I(this)),null!==i&&this.emit("data",i),i},u.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},u.prototype.pipe=function(e,t){function n(e,t){F("onunpipe"),e===h&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,o())}function i(){F("onend"),e.end()}function o(){F("cleanup"),e.removeListener("close",f),e.removeListener("finish",l),e.removeListener("drain",g),e.removeListener("error",u),e.removeListener("unpipe",n),h.removeListener("end",i),h.removeListener("end",c),h.removeListener("data",a),b=!0,!d.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function a(t){F("ondata"),_=!1,!1!==e.write(t)||_||((1===d.pipesCount&&d.pipes===e||d.pipesCount>1&&-1!==L(d.pipes,e))&&!b&&(F("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,_=!0),h.pause())}function u(t){F("onerror",t),c(),e.removeListener("error",u),0===D(e,"error")&&e.emit("error",t)}function f(){e.removeListener("finish",l),c()}function l(){F("onfinish"),e.removeListener("close",f),c()}function c(){F("unpipe"),h.unpipe(e)}var h=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=e;break;case 1:d.pipes=[d.pipes,e];break;default:d.pipes.push(e)}d.pipesCount+=1,F("pipe count=%d opts=%j",d.pipesCount,t);var p=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?i:c;d.endEmitted?B(p):h.once("end",p),e.on("unpipe",n);var g=v(h);e.on("drain",g);var b=!1,_=!1;return h.on("data",a),s(e,"error",u),e.once("close",f),e.once("finish",l),e.emit("pipe",h),d.flowing||(F("pipe resume"),h.resume()),e},u.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var s=L(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},u.prototype.on=function(e,t){var r=C.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&b(this):B(w,this))}return r},u.prototype.addListener=u.prototype.on,u.prototype.resume=function(){var e=this._readableState;return e.flowing||(F("resume"),e.flowing=!0,E(this,e)),this},u.prototype.pause=function(){return F("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(F("pause"),this._readableState.flowing=!1,this.emit("pause")),this},u.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(F("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){F("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)&&(n.push(i)||(r=!0,e.pause()))});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<Y.length;o++)e.on(Y[o],n.emit.bind(n,Y[o]));return n._read=function(t){F("wrapped _read",t),r&&(r=!1,e.resume())},n},u._fromList=S}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":133,"./internal/streams/BufferList":138,"./internal/streams/destroy":139,"./internal/streams/stream":140,_process:130,"core-util-is":21,events:26,inherits:39,isarray:141,"process-nextick-args":129,"safe-buffer":147,"string_decoder/":142,util:14}],136:[function(e,t,r){"use strict";function n(e){this.afterTransform=function(t,r){return i(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);a.call(this,e),this._transformState=new n(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,r){s(t,e,r)}):s(t)})}function s(e,t,r){if(t)return e.emit("error",t);null!==r&&void 0!==r&&e.push(r);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=o;var a=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(o,a),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,a.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var r=this;a.prototype._destroy.call(this,e,function(e){t(e),r.emit("close")})}},{"./_stream_duplex":133,"core-util-is":21,inherits:39}],137:[function(e,t,r){(function(r,n){"use strict";function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){T(t,e)}}function o(e){return N.from(e)}function s(e){return N.isBuffer(e)||e instanceof j}function a(){}function u(t,r){R=R||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof R&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){_(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function f(t){if(R=R||e("./_stream_duplex"),!(C.call(f,this)||this instanceof R))return new f(t);this._writableState=new u(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),B.call(this)}function l(e,t){var r=new Error("write after end");e.emit("error",r),A(t,r)}function c(e,t,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),A(n,o),i=!1),i}function h(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=N.from(t,r)),t}function d(e,t,r,n,i,o){if(!r){var s=h(t,n,i);n!==s&&(r=!0,i="buffer",n=s)}var a=t.objectMode?1:n.length;t.length+=a;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var f=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},f?f.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else p(e,t,!1,a,n,i,o);return u}function p(e,t,r,n,i,o,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function g(e,t,r,n,i){--t.pendingcb,r?(A(i,n),A(x,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),x(e,t))}function b(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function _(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(b(r),t)g(e,r,n,t,i);else{var o=w(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||v(e,r),n?I(y,e,r,o,i):y(e,r,o,i)}}function y(e,t,r,n){r||m(e,t),t.pendingcb--,n(),x(e,t)}function m(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function v(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,o=new Array(n),s=t.corkedRequestsFree;s.entry=r;for(var a=0,u=!0;r;)o[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;o.allBuffers=u,p(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t)}else{for(;r;){var f=r.chunk,l=r.encoding,c=r.callback;if(p(e,t,!1,t.objectMode?1:f.length,f,l,c),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function E(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),x(e,t)})}function k(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,A(E,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function x(e,t){var r=w(t);return r&&(k(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}function S(e,t,r){t.ending=!0,x(e,t),r&&(t.finished?A(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function T(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var A=e("process-nextick-args");t.exports=f;var R,I=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?setImmediate:A;f.WritableState=u;var O=e("core-util-is");O.inherits=e("inherits");var L={deprecate:e("util-deprecate")},B=e("./internal/streams/stream"),N=e("safe-buffer").Buffer,j=n.Uint8Array||function(){},D=e("./internal/streams/destroy");O.inherits(f,B),u.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(u.prototype,"buffer",{get:L.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var C;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(C=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(e){return!!C.call(this,e)||e&&e._writableState instanceof u}})):C=function(e){return e instanceof this},f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},f.prototype.write=function(e,t,r){var n=this._writableState,i=!1,u=s(e)&&!n.objectMode;return u&&!N.isBuffer(e)&&(e=o(e)),"function"==typeof t&&(r=t,t=null),u?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=a),n.ended?l(this,r):(u||c(this,n,e,r))&&(n.pendingcb++,i=d(this,n,u,e,t,r)),i},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||v(this,e))},f.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},f.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},f.prototype._writev=null,f.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||S(this,n,r)},Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),f.prototype.destroy=D.destroy,f.prototype._undestroy=D.undestroy,f.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":133,"./internal/streams/destroy":139,"./internal/streams/stream":140,_process:130,"core-util-is":21,inherits:39,"process-nextick-args":129,"safe-buffer":147,"util-deprecate":153}],138:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,r){e.copy(t,r)}var o=e("safe-buffer").Buffer;t.exports=function(){function e(){n(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var t=o.allocUnsafe(e>>>0),r=this.head,n=0;r;)i(r.data,t,n),n+=r.data.length,r=r.next;return t},e}()},{"safe-buffer":147}],139:[function(e,t,r){"use strict";function n(e,t){e.emit("error",t)}var i=e("process-nextick-args");t.exports={destroy:function(e,t){var r=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;o||s?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i(n,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(i(n,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},{"process-nextick-args":129}],140:[function(e,t,r){t.exports=e("events").EventEmitter},{events:26}],141:[function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],142:[function(e,t,r){"use strict";function n(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function i(e){var t=n(e);if("string"!=typeof t&&(b.isEncoding===_||!_(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){this.encoding=i(e);var t;switch(this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=f,t=4;break;case"base64":this.text=h,this.end=d,t=3;break;default:return this.write=p,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=b.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function a(e,t,r){var n=t.length-1;if(n<r)return 0;var i=s(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r?0:(i=s(t[n]))>=0?(i>0&&(e.lastNeed=i-2),i):--n<r?0:(i=s(t[n]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}function u(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"".repeat(r);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"".repeat(r+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"".repeat(r+2)}}function f(e){var t=this.lastTotal-this.lastNeed,r=u(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function h(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function g(e){return e&&e.length?this.write(e):""}var b=e("safe-buffer").Buffer,_=b.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};r.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"".repeat(this.lastTotal-this.lastNeed):t},o.prototype.text=function(e,t){var r=a(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":147}],143:[function(e,t,r){t.exports=e("./readable").PassThrough},{"./readable":144}],144:[function(e,t,r){(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":133,"./lib/_stream_passthrough.js":134,"./lib/_stream_readable.js":135,"./lib/_stream_transform.js":136,"./lib/_stream_writable.js":137}],145:[function(e,t,r){t.exports=e("./readable").Transform},{"./readable":144}],146:[function(e,t,r){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":137}],147:[function(e,t,r){function n(e,t){for(var r in e)t[r]=e[r]}function i(e,t,r){return s(e,t,r)}var o=e("buffer"),s=o.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?t.exports=o:(n(o,r),r.Buffer=i),n(s,i),i.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return s(e,t,r)},i.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=s(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return s(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},{buffer:18}],148:[function(e,t,r){function n(){i.call(this)}t.exports=n;var i=e("events").EventEmitter;e("inherits")(n,i),n.Readable=e("readable-stream/readable.js"),n.Writable=e("readable-stream/writable.js"),n.Duplex=e("readable-stream/duplex.js"),n.Transform=e("readable-stream/transform.js"),n.PassThrough=e("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(e,t){function r(t){e.writable&&!1===e.write(t)&&f.pause&&f.pause()}function n(){f.readable&&f.resume&&f.resume()}function o(){l||(l=!0,e.end())}function s(){l||(l=!0,"function"==typeof e.destroy&&e.destroy())}function a(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){f.removeListener("data",r),e.removeListener("drain",n),f.removeListener("end",o),f.removeListener("close",s),f.removeListener("error",a),e.removeListener("error",a),f.removeListener("end",u),f.removeListener("close",u),e.removeListener("close",u)}var f=this;f.on("data",r),e.on("drain",n),e._isStdio||t&&!1===t.end||(f.on("end",o),f.on("close",s));var l=!1;return f.on("error",a),e.on("error",a),f.on("end",u),f.on("close",u),e.on("close",u),e.emit("pipe",f),e}},{events:26,inherits:39,"readable-stream/duplex.js":132,"readable-stream/passthrough.js":143,"readable-stream/readable.js":144,"readable-stream/transform.js":145,"readable-stream/writable.js":146}],149:[function(e,t,r){var n=r.range=function(e){return null==e?{}:"string"==typeof n?{min:n,max:n+""}:e},i=(r.prefix=function(e,t,n){e=r.range(e);var i={};return n=n||"",e instanceof RegExp||"function"==typeof e?(i.min=t,i.max=t+n,i.inner=function(r){var n=r.substring(t.length);return e.test?e.test(n):e(n)}):"object"==typeof e&&(i.min=t+(e.min||e.start||""),i.max=t+(e.max||e.end||n||"~"),i.reverse=!!e.reverse),i},r.checker=function(e){return e||(e={}),"string"==typeof e?function(t){return 0==t.indexOf(e)}:e instanceof RegExp?function(t){return e.test(t)}:"object"==typeof e?function(t){var r=e.min||e.start,n=e.max||e.end;return t=String(t),(!r||t>=r)&&(!n||t<=n)&&(!e.inner||(e.inner.test?e.inner.test(t):e.inner(t)))}:"function"==typeof e?e:void 0});r.satisfies=function(e,t){return i(t)(e)}},{}],150:[function(e,t,r){function n(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function s(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var a=e("buffer").Buffer,u=a.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},f=r.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),n(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};f.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(e=e.slice(r,e.length),!((i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,n),n-=this.charReceived);var n=(t+=e.toString(this.encoding,0,n)).length-1,i=t.charCodeAt(n);if(i>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,n)}return t},f.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},f.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t}},{buffer:18}],151:[function(e,t,r){(function(e){t.exports=function(t){return"function"==typeof e._augment&&e.TYPED_ARRAY_SUPPORT?e._augment(t):new e(t)}}).call(this,e("buffer").Buffer)},{buffer:18}],152:[function(e,t,r){function n(e){if(M&&T){var t,r=M(e);for(t=0;t<r.length;t+=1)T(e,r[t],{value:e[r[t]],writable:!1,enumerable:!1,configurable:!1})}}function i(e){if(T){if(e.length>R)throw new RangeError("Array too large for polyfill");var t;for(t=0;t<e.length;t+=1)!function(t){T(e,t,{get:function(){return e._getter(t)},set:function(r){e._setter(t,r)},enumerable:!0,configurable:!1})}(t)}}function o(e,t){var r=32-t;return e<<r>>r}function s(e,t){var r=32-t;return e<<r>>>r}function a(e){return[255&e]}function u(e){return o(e[0],8)}function f(e){return[255&e]}function l(e){return s(e[0],8)}function c(e){return e=C(Number(e)),[e<0?0:e>255?255:255&e]}function h(e){return[e>>8&255,255&e]}function d(e){return o(e[0]<<8|e[1],16)}function p(e){return[e>>8&255,255&e]}function g(e){return s(e[0]<<8|e[1],16)}function b(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}function _(e){return o(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function y(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]}function m(e){return s(e[0]<<24|e[1]<<16|e[2]<<8|e[3],32)}function v(e,t,r){function n(e){var t=B(e),r=e-t;return r<.5?t:r>.5?t+1:t%2?t+1:t}var i,o,s,a,u,f,l,c=(1<<t-1)-1;for(e!==e?(o=(1<<t)-1,s=D(2,r-1),i=0):e===1/0||e===-1/0?(o=(1<<t)-1,s=0,i=e<0?1:0):0===e?(o=0,s=0,i=1/e==-1/0?1:0):(i=e<0,(e=L(e))>=D(2,1-c)?(o=j(B(N(e)/O),1023),(s=n(e/D(2,o)*D(2,r)))/D(2,r)>=2&&(o+=1,s=1),o>c?(o=(1<<t)-1,s=0):(o+=c,s-=D(2,r))):(o=0,s=n(e/D(2,1-c-r)))),u=[],a=r;a;a-=1)u.push(s%2?1:0),s=B(s/2);for(a=t;a;a-=1)u.push(o%2?1:0),o=B(o/2);for(u.push(i?1:0),u.reverse(),f=u.join(""),l=[];f.length;)l.push(parseInt(f.substring(0,8),2)),f=f.substring(8);return l}function w(e,t,r){var n,i,o,s,a,u,f,l,c=[];for(n=e.length;n;n-=1)for(o=e[n-1],i=8;i;i-=1)c.push(o%2?1:0),o>>=1;return c.reverse(),s=c.join(""),a=(1<<t-1)-1,u=parseInt(s.substring(0,1),2)?-1:1,f=parseInt(s.substring(1,1+t),2),l=parseInt(s.substring(1+t),2),f===(1<<t)-1?0!==l?NaN:u*(1/0):f>0?u*D(2,f-a)*(1+l/D(2,r)):0!==l?u*D(2,-(a-1))*(l/D(2,r)):u<0?-0:0}function E(e){return w(e,11,52)}function k(e){return v(e,11,52)}function x(e){return w(e,8,23)}function S(e){return v(e,8,23)}var T,A=void 0,R=1e5,I=function(){var e=Object.prototype.toString,t=Object.prototype.hasOwnProperty;return{Class:function(t){return e.call(t).replace(/^\[object *|\]$/g,"")},HasProperty:function(e,t){return t in e},HasOwnProperty:function(e,r){return t.call(e,r)},IsCallable:function(e){return"function"==typeof e},ToInt32:function(e){return e>>0},ToUint32:function(e){return e>>>0}}}(),O=Math.LN2,L=Math.abs,B=Math.floor,N=Math.log,j=Math.min,D=Math.pow,C=Math.round;T=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}()?Object.defineProperty:function(e,t,r){if(!e===Object(e))throw new TypeError("Object.defineProperty called on non-object");return I.HasProperty(r,"get")&&Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__.call(e,t,r.get),I.HasProperty(r,"set")&&Object.prototype.__defineSetter__&&Object.prototype.__defineSetter__.call(e,t,r.set),I.HasProperty(r,"value")&&(e[t]=r.value),e};var M=Object.getOwnPropertyNames||function(e){if(e!==Object(e))throw new TypeError("Object.getOwnPropertyNames called on non-object");var t,r=[];for(t in e)I.HasOwnProperty(e,t)&&r.push(t);return r};!function(){function e(e,r,s){var a;return a=function(e,r,o){var s,u,f,l;if(arguments.length&&"number"!=typeof arguments[0])if("object"==typeof arguments[0]&&arguments[0].constructor===a)for(s=arguments[0],this.length=s.length,this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new t(this.byteLength),this.byteOffset=0,f=0;f<this.length;f+=1)this._setter(f,s._getter(f));else if("object"!=typeof arguments[0]||(arguments[0]instanceof t||"ArrayBuffer"===I.Class(arguments[0]))){if("object"!=typeof arguments[0]||!(arguments[0]instanceof t||"ArrayBuffer"===I.Class(arguments[0])))throw new TypeError("Unexpected argument type(s)");if(this.buffer=e,this.byteOffset=I.ToUint32(r),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(this.byteOffset%this.BYTES_PER_ELEMENT)throw new RangeError("ArrayBuffer length minus the byteOffset is not a multiple of the element size.");if(arguments.length<3){if(this.byteLength=this.buffer.byteLength-this.byteOffset,this.byteLength%this.BYTES_PER_ELEMENT)throw new RangeError("length of buffer minus byteOffset not a multiple of the element size");this.length=this.byteLength/this.BYTES_PER_ELEMENT}else this.length=I.ToUint32(o),this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer")}else for(u=arguments[0],this.length=I.ToUint32(u.length),this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new t(this.byteLength),this.byteOffset=0,f=0;f<this.length;f+=1)l=u[f],this._setter(f,Number(l));else{if(this.length=I.ToInt32(arguments[0]),o<0)throw new RangeError("ArrayBufferView size is not a small enough positive integer");this.byteLength=this.length*this.BYTES_PER_ELEMENT,this.buffer=new t(this.byteLength),this.byteOffset=0}this.constructor=a,n(this),i(this)},a.prototype=new o,a.prototype.BYTES_PER_ELEMENT=e,a.prototype._pack=r,a.prototype._unpack=s,a.BYTES_PER_ELEMENT=e,a.prototype._getter=function(e){if(arguments.length<1)throw new SyntaxError("Not enough arguments");if((e=I.ToUint32(e))>=this.length)return A;var t,r,n=[];for(t=0,r=this.byteOffset+e*this.BYTES_PER_ELEMENT;t<this.BYTES_PER_ELEMENT;t+=1,r+=1)n.push(this.buffer._bytes[r]);return this._unpack(n)},a.prototype.get=a.prototype._getter,a.prototype._setter=function(e,t){if(arguments.length<2)throw new SyntaxError("Not enough arguments");if((e=I.ToUint32(e))>=this.length)return A;var r,n,i=this._pack(t);for(r=0,n=this.byteOffset+e*this.BYTES_PER_ELEMENT;r<this.BYTES_PER_ELEMENT;r+=1,n+=1)this.buffer._bytes[n]=i[r]},a.prototype.set=function(e,t){if(arguments.length<1)throw new SyntaxError("Not enough arguments");var r,n,i,o,s,a,u,f,l,c;if("object"==typeof arguments[0]&&arguments[0].constructor===this.constructor){if(r=arguments[0],(i=I.ToUint32(arguments[1]))+r.length>this.length)throw new RangeError("Offset plus length of array is out of range");if(f=this.byteOffset+i*this.BYTES_PER_ELEMENT,l=r.length*this.BYTES_PER_ELEMENT,r.buffer===this.buffer){for(c=[],s=0,a=r.byteOffset;s<l;s+=1,a+=1)c[s]=r.buffer._bytes[a];for(s=0,u=f;s<l;s+=1,u+=1)this.buffer._bytes[u]=c[s]}else for(s=0,a=r.byteOffset,u=f;s<l;s+=1,a+=1,u+=1)this.buffer._bytes[u]=r.buffer._bytes[a]}else{if("object"!=typeof arguments[0]||void 0===arguments[0].length)throw new TypeError("Unexpected argument type(s)");if(n=arguments[0],o=I.ToUint32(n.length),(i=I.ToUint32(arguments[1]))+o>this.length)throw new RangeError("Offset plus length of array is out of range");for(s=0;s<o;s+=1)a=n[s],this._setter(i+s,Number(a))}},a.prototype.subarray=function(e,t){function r(e,t,r){return e<t?t:e>r?r:e}e=I.ToInt32(e),t=I.ToInt32(t),arguments.length<1&&(e=0),arguments.length<2&&(t=this.length),e<0&&(e=this.length+e),t<0&&(t=this.length+t),e=r(e,0,this.length);var n=(t=r(t,0,this.length))-e;return n<0&&(n=0),new this.constructor(this.buffer,this.byteOffset+e*this.BYTES_PER_ELEMENT,n)},a}var t=function(e){if((e=I.ToInt32(e))<0)throw new RangeError("ArrayBuffer size is not a small enough positive integer");this.byteLength=e,this._bytes=[],this._bytes.length=e;var t;for(t=0;t<this.byteLength;t+=1)this._bytes[t]=0;n(this)};r.ArrayBuffer=r.ArrayBuffer||t;var o=function(){},s=e(1,a,u),v=e(1,f,l),w=e(1,c,l),T=e(2,h,d),R=e(2,p,g),O=e(4,b,_),L=e(4,y,m),B=e(4,S,x),N=e(8,k,E);r.Int8Array=r.Int8Array||s,r.Uint8Array=r.Uint8Array||v,r.Uint8ClampedArray=r.Uint8ClampedArray||w,r.Int16Array=r.Int16Array||T,r.Uint16Array=r.Uint16Array||R,r.Int32Array=r.Int32Array||O,r.Uint32Array=r.Uint32Array||L,r.Float32Array=r.Float32Array||B,r.Float64Array=r.Float64Array||N}(),function(){function e(e,t){return I.IsCallable(e.get)?e.get(t):e[t]}function t(t){return function(n,i){if((n=I.ToUint32(n))+t.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");n+=this.byteOffset;var s,a=new r.Uint8Array(this.buffer,n,t.BYTES_PER_ELEMENT),u=[];for(s=0;s<t.BYTES_PER_ELEMENT;s+=1)u.push(e(a,s));return Boolean(i)===Boolean(o)&&u.reverse(),e(new t(new r.Uint8Array(u).buffer),0)}}function i(t){return function(n,i,s){if((n=I.ToUint32(n))+t.BYTES_PER_ELEMENT>this.byteLength)throw new RangeError("Array index out of range");var a,u=new t([i]),f=new r.Uint8Array(u.buffer),l=[];for(a=0;a<t.BYTES_PER_ELEMENT;a+=1)l.push(e(f,a));Boolean(s)===Boolean(o)&&l.reverse(),new r.Uint8Array(this.buffer,n,t.BYTES_PER_ELEMENT).set(l)}}var o=function(){var t=new r.Uint16Array([4660]);return 18===e(new r.Uint8Array(t.buffer),0)}(),s=function(e,t,i){if(0===arguments.length)e=new r.ArrayBuffer(0);else if(!(e instanceof r.ArrayBuffer||"ArrayBuffer"===I.Class(e)))throw new TypeError("TypeError");if(this.buffer=e||new r.ArrayBuffer(0),this.byteOffset=I.ToUint32(t),this.byteOffset>this.buffer.byteLength)throw new RangeError("byteOffset out of range");if(arguments.length<3?this.byteLength=this.buffer.byteLength-this.byteOffset:this.byteLength=I.ToUint32(i),this.byteOffset+this.byteLength>this.buffer.byteLength)throw new RangeError("byteOffset and length reference an area beyond the end of the buffer");n(this)};s.prototype.getUint8=t(r.Uint8Array),s.prototype.getInt8=t(r.Int8Array),s.prototype.getUint16=t(r.Uint16Array),s.prototype.getInt16=t(r.Int16Array),s.prototype.getUint32=t(r.Uint32Array),s.prototype.getInt32=t(r.Int32Array),s.prototype.getFloat32=t(r.Float32Array),s.prototype.getFloat64=t(r.Float64Array),s.prototype.setUint8=i(r.Uint8Array),s.prototype.setInt8=i(r.Int8Array),s.prototype.setUint16=i(r.Uint16Array),s.prototype.setInt16=i(r.Int16Array),s.prototype.setUint32=i(r.Uint32Array),s.prototype.setInt32=i(r.Int32Array),s.prototype.setFloat32=i(r.Float32Array),s.prototype.setFloat64=i(r.Float64Array),r.DataView=r.DataView||s}()},{}],153:[function(e,t,r){(function(e){function r(t){try{if(!e.localStorage)return!1}catch(e){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],154:[function(e,t,r){arguments[4][39][0].apply(r,arguments)},{dup:39}],155:[function(e,t,r){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],156:[function(e,t,r){(function(t,n){function i(e,t){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(t)?n.showHidden=t:t&&r._extend(n,t),m(n.showHidden)&&(n.showHidden=!1),m(n.depth)&&(n.depth=2),m(n.colors)&&(n.colors=!1),m(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,e,n.depth)}function o(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function s(e,t){return e}function a(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function u(e,t,n){if(e.customInspect&&t&&x(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return y(i)||(i=u(e,i,n)),i}var o=f(e,t);if(o)return o;var s=Object.keys(t),g=a(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),k(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(t);if(0===s.length){if(x(t)){var b=t.name?": "+t.name:"";return e.stylize("[Function"+b+"]","special")}if(v(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(E(t))return e.stylize(Date.prototype.toString.call(t),"date");if(k(t))return l(t)}var _="",m=!1,w=["{","}"];if(p(t)&&(m=!0,w=["[","]"]),x(t)&&(_=" [Function"+(t.name?": "+t.name:"")+"]"),v(t)&&(_=" "+RegExp.prototype.toString.call(t)),E(t)&&(_=" "+Date.prototype.toUTCString.call(t)),k(t)&&(_=" "+l(t)),0===s.length&&(!m||0==t.length))return w[0]+_+w[1];if(n<0)return v(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var S;return S=m?c(e,t,n,g,s):s.map(function(r){return h(e,t,n,g,r,m)}),e.seen.pop(),d(S,_,w)}function f(e,t){if(m(t))return e.stylize("undefined","undefined");if(y(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return _(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):b(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function c(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)R(t,String(s))?o.push(h(e,t,r,n,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,r,n,i,!0))}),o}function h(e,t,r,n,i,o){var s,a,f;if((f=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?a=f.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):f.set&&(a=e.stylize("[Setter]","special")),R(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(f.value)<0?(a=b(r)?u(e,f.value,null):u(e,f.value,r-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),m(s)){if(o&&i.match(/^\d+$/))return a;(s=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function d(e,t,r){var n=0;return e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function p(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function b(e){return null===e}function _(e){return"number"==typeof e}function y(e){return"string"==typeof e}function m(e){return void 0===e}function v(e){return w(e)&&"[object RegExp]"===S(e)}function w(e){return"object"==typeof e&&null!==e}function E(e){return w(e)&&"[object Date]"===S(e)}function k(e){return w(e)&&("[object Error]"===S(e)||e instanceof Error)}function x(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}function T(e){return e<10?"0"+e.toString(10):e.toString(10)}function A(){var e=new Date,t=[T(e.getHours()),T(e.getMinutes()),T(e.getSeconds())].join(":");return[e.getDate(),B[e.getMonth()],t].join(" ")}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var I=/%[sdj%]/g;r.format=function(e){if(!y(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,o=n.length,s=String(e).replace(I,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),a=n[r];r<o;a=n[++r])b(a)||!w(a)?s+=" "+a:s+=" "+i(a);return s},r.deprecate=function(e,i){if(m(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(!0===t.noDeprecation)return e;var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),o=!0}return e.apply(this,arguments)}};var O,L={};r.debuglog=function(e){if(m(O)&&(O=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!L[e])if(new RegExp("\\b"+e+"\\b","i").test(O)){var n=t.pid;L[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else L[e]=function(){};return L[e]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=p,r.isBoolean=g,r.isNull=b,r.isNullOrUndefined=function(e){return null==e},r.isNumber=_,r.isString=y,r.isSymbol=function(e){return"symbol"==typeof e},r.isUndefined=m,r.isRegExp=v,r.isObject=w,r.isDate=E,r.isError=k,r.isFunction=x,r.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},r.isBuffer=e("./support/isBuffer");var B=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",A(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!w(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":155,_process:130,inherits:154}],157:[function(e,t,r){function n(e,t){function r(){for(var t=new Array(arguments.length),r=0;r<t.length;r++)t[r]=arguments[r];var n=e.apply(this,t),i=t[t.length-1];return"function"==typeof n&&n!==i&&Object.keys(i).forEach(function(e){n[e]=i[e]}),n}if(e&&t)return n(e)(t);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(t){r[t]=e[t]}),r}t.exports=n},{}],158:[function(e,t,r){(function(r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e("downloadjs"),s=e("pngjs").PNG,a=e("browserify-fs"),u=function(){function e(t,r,i,o){n(this,e),this.renderer=t,this.scene=r,this.camera=i,this.onStart=o?o.onStart:void 0,this.onBeforeRender=o?o.onBeforeRender:void 0,this.onAfterRender=o?o.onAfterRender:void 0,this.onExit=o?o.onExit:void 0,this.default={width:2048,height:2048},this.state={mode:"normal",maxFactor:1,originalWidth:null,originalHeight:null,width:null,height:null,factor:null,busy:!1};var s=this.renderer.capabilities.maxTextureSize,a=Math.floor(s/this.default.width);this.set("maxTextureSize",s),this.set("maxFactor",a),this.initUI()}return i(e,[{key:"set",value:function(e,t){this.state[e]=t}},{key:"get",value:function(e){return this.state[e]}},{key:"initUI",value:function(){this.initDom(),this.initStyles(),this.onResize(!0)}},{key:"activateUI",value:function(){if(!this.state.activeUI){this.set("activeUI",!0),this.hideAllMessages(),document.getElementById(this.domId+"").classList.add("show"),document.getElementById(this.domId+"-message").classList.add("show");var e=this.get("mode"),t=document.getElementById(this.domId+"-normal-mode-title"),r=document.getElementById(this.domId+"-depth-mode-title");"normal"===e?(t.classList.add("show"),r.classList.remove("show")):(t.classList.remove("show"),r.classList.add("show")),window.addEventListener("resize",this.onResize.bind(this))}}},{key:"deactivateUI",value:function(){this.set("activeUI",!1),this.hideAllMessages(),document.getElementById(this.domId).classList.remove("show"),document.getElementById(this.domId+"-message").classList.add("show"),window.removeEventListener("resize",this.onResize.bind(this))}},{key:"enable",value:function(){document.body.addEventListener("keyup",this.keyHandler.bind(this),!1)}},{key:"disable",value:function(){document.body.removeEventListener("keyup",this.keyHandler.bind(this))}},{key:"setupKeyEvents",value:function(){document.body.addEventListener("keyup",this.keyHandler.bind(this))}},{key:"keyHandler",value:function(e){var t=this;if(!this.state.busy){var r=function(){t.activateUI(),t.onStart&&t.onStart()};if("-"===e.key&&(this.set("mode","depth"),r()),"+"===e.key&&(this.set("mode","normal"),r()),27===e.keyCode&&(this.deactivateUI(),this.onExit&&this.onExit()),e.key.match(/^\d+$/)){if(!this.state.activeUI)return;this.onBeforeRender&&this.onBeforeRender();var n=Math.min(parseInt(e.key),this.state.maxFactor);this.set("factor",n),this.showLoader(),this.set("startTime",Date.now()),setTimeout(function(){t.request(n).then(function(e){t.hideAllMessages(),t.set("endTime",Date.now());var r=t.get("endTime")-t.get("startTime");r=(r/1e3).toFixed(2),document.getElementById(t.domId+"-filename").innerHTML=e,document.getElementById(t.domId+"-duration").innerHTML=r+" seconds",document.getElementById(t.domId+"-complete").classList.add("show")})},250)}}}},{key:"showLoader",value:function(){var e=this.default.width*this.state.factor,t=this.default.height*this.state.factor;e=e||this.state.originalWidth,t=t||this.state.originalHeight,this.hideAllMessages(),document.getElementById(this.domId+"-width").innerHTML=e,document.getElementById(this.domId+"-height").innerHTML=t,document.getElementById(this.domId+"-dpi").innerHTML=Math.floor(e/300)+" x "+Math.floor(t/300),document.getElementById(this.domId+"-loader").classList.add("show")}},{key:"request",value:function(e){var t=this;return this.state.busy?Promise.resolve():(this.onResize(!0),new window.Promise(function(r,n){var i=void 0,o=void 0,s=void 0;0===e?(i=t.get("originalWidth"),o=t.get("originalHeight"),s=1):(i=t.default.width,o=t.default.height,s=e),t.set("width",i),t.set("height",o),t.set("factor",s),t.set("busy",!0),t.onRendered=function(e){return r(e)},t.onError=function(){return n()},t.render()}))}},{key:"setupHighresRenderer",value:function(){this.camera.aspect=this.state.width/this.state.height,this.camera.updateProjectionMatrix(),this.renderer.setPixelRatio(this.state.factor),this.renderer.setSize(this.state.width,this.state.height)}},{key:"render",value:function(){this.setupHighresRenderer();var e=this.renderer.getDrawingBufferSize(),t=e.width*e.height*4,r=new Uint8Array(t);"normal"===this.get("mode")?this.renderNormal(r,e):this.renderDepth(r,e)}},{key:"renderNormal",value:function(e,t){this.rt=new THREE.WebGLRenderTarget(t.width,t.height),this.renderer.render(this.scene,this.camera,this.rt),this.finishRender(e,t)}},{key:"renderDepth",value:function(e,t){this.rt=new THREE.WebGLRenderTarget(t.width,t.height);var r=new THREE.WebGLRenderTarget(t.width,t.height);r.texture.format=THREE.RGBFormat,r.texture.minFilter=THREE.NearestFilter,r.texture.magFilter=THREE.NearestFilter,r.texture.generateMipmaps=!1,r.stencilBuffer=!1,r.depthBuffer=!0,r.depthTexture=new THREE.DepthTexture,r.depthTexture.type=THREE.UnsignedShortType;var n=new THREE.OrthographicCamera(-1,1,1,-1,0,1),i=new THREE.ShaderMaterial({vertexShader:"\n        varying vec2 vUv;\n              void main() {\n                  vUv = uv;\n                  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n              }",fragmentShader:"\n        #include <packing>\n              varying vec2 vUv;\n              uniform sampler2D tDiffuse;\n              uniform sampler2D tDepth;\n              uniform float cameraNear;\n              uniform float cameraFar;\n              float readDepth (sampler2D depthSampler, vec2 coord) {\n                  float fragCoordZ = texture2D(depthSampler, coord).x;\n                  float viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n                  return viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n              }\n              void main() {\n                  vec3 diffuse = texture2D(tDiffuse, vUv).rgb;\n                  float depth = readDepth(tDepth, vUv);\n                  gl_FragColor.rgb = vec3(depth);\n                  gl_FragColor.a = 1.0;\n              }",uniforms:{cameraNear:{value:this.camera.near},cameraFar:{value:this.camera.far},tDiffuse:{value:r.texture},tDepth:{value:r.depthTexture}}}),o=new THREE.PlaneBufferGeometry(2,2),s=new THREE.Mesh(o,i),a=new THREE.Scene;a.add(s),this.renderer.render(this.scene,this.camera,r),this.renderer.render(a,n,this.rt),this.finishRender(e,t)}},{key:"finishRender",value:function(e,t){this.renderer.readRenderTargetPixels(this.rt,0,0,t.width,t.height,e);var r=this.convertArrayToPNG(e,t);this.downloadPNG(r)}},{key:"convertArrayToPNG",value:function(e,t){for(var r=new s({width:t.width,height:t.height}),n=void 0,i=void 0,o=0;o<t.width;o++)for(var a=0;a<t.height;a++)n=t.width*a+o<<2,i=t.width*(t.height-a)+o<<2,r.data[n]=e[i],r.data[n+1]=e[i+1],r.data[n+2]=e[i+2],r.data[n+3]=e[i+3];return r}},{key:"downloadPNG",value:function(e){var t=this;try{e.pack().pipe(a.createWriteStream("newfile.png")).on("finish",function(e){a.readFile("newfile.png",function(e,r){if(e)t.manageError(e);else{var n=new window.Blob([r],{type:"image/png"}),i="hr-"+t.state.width*t.state.factor+"x"+t.state.height*t.state.factor+"-"+Date.now();o(n,i,"image/png"),t.restorePreviousState(),t.onRendered(i+".png")}})})}catch(e){this.manageError(e)}}},{key:"manageError",value:function(e){this.hideAllMessages(),document.getElementById(this.domId+"-error").classList.add("show"),this.onError(e),this.restorePreviousState()}},{key:"restorePreviousState",value:function(){this.set("busy",!1),this.set("activeUI",!1),this.rt.dispose(),this.onResize(),this.onAfterRender&&this.onAfterRender()}},{key:"onResize",value:function(e){if(!this.state.busy){var t=window.innerWidth,r=window.innerHeight;this.set("originalWidth",t),this.set("originalHeight",r),this.resizeCaptureArea(),e||(this.camera.aspect=t/r,this.camera.updateProjectionMatrix(),this.renderer.setPixelRatio(window.devicePixelRatio||1),this.renderer.setSize(t,r,!0))}}},{key:"resizeCaptureArea",value:function(){var e=document.getElementById(this.domId+"-capture-area"),t=this.get("originalHeight"),r=t*(this.default.width/this.default.height),n=t;e.style.width=r+"px",e.style.height=n+"px"}},{key:"initDom",value:function(){this.domId="high-res";var e=function(e){return document.getElementById(e)},t=this.domId+"-msg-box";this.dom("div",this.domId,document.body),this.dom("div",this.domId+"-capture-area",e(this.domId)),this.dom("div",this.domId+"-modal-wrapper",e(this.domId)),this.dom("div",this.domId+"-modal",e(this.domId+"-modal-wrapper")),this.dom("div",this.domId+"-message",e(this.domId+"-modal"),"show "+t),this.dom("div",this.domId+"-loader",e(this.domId+"-modal"),t),this.dom("div",this.domId+"-complete",e(this.domId+"-modal"),t),this.dom("div",this.domId+"-error",e(this.domId+"-modal"),t);var r=this.default.width,n=this.default.height,i=2+Math.round(Math.random()*(this.state.maxFactor-2)),o=r*i,s=n*i,a=Math.floor(o/300),u=Math.floor(s/300),f=this.state.maxTextureSize,l=this.state.maxFactor,c=Math.floor(f/300);this.html('<div class="title mode" id="'+this.domId+'-normal-mode-title">High resolution rendering</div>\n          \n          <div class="title mode" id="'+this.domId+'-depth-mode-title">Depth rendering</div>\n        <br><br>\n        WARNING: <i>This can take time. The browser tab will be busy for a few seconds (or more).</i>\n        <ul>\n          <li>\n              To start rendering press a number from <strong>0 to '+l+"</strong>.  \n              This value will be used as a factor of "+r+" x "+n+" and the result will be the size of the final PNG image (0 will result in a screenshot of the scene at your current resolution).\n          </li>\n          <li>\n              Your GPU supports "+f+" x "+f+" textures ("+c+" x "+c+" inches at 300 dpi), so the maximum factor you can use is <strong>"+l+"</strong>.\n          </li>\n          <li>\n              The rectangle shows the area that will be captured (it can be larger than the viewport).\n          </li>\n        </ul>\n        \n        <strong>Example:</strong>\n        <br>\n        If you select <strong>"+i+"</strong> you will get a "+i+"*"+r+" x "+i+"*"+n+" image = <strong>"+o+" x "+s+"</strong>.\n        <br>\n        That is a nice <strong>"+a+" x "+u+" inches</strong> print at <strong>300 dpi</strong>.\n        <br><br>\n        Press ESC to exit.\n        ",this.domId+"-message"),this.html('<div class="title">Rendering</div>\n      <br><br>\n      Sit back and relax. A beautiful <span id="'+this.domId+'-width"></span> x <span id="'+this.domId+'-height"></span> \n      image (<span id="'+this.domId+'-dpi"></span> inches at 300 dpi) is on the way<span id="loader-dots">...</span>\n      <br><br>\n      The scene may resize and look distorted for a few seconds.\n      ',this.domId+"-loader"),this.html('<div class="title">Rendering completed</div>\n      <br><br>\n      It took <strong id="'+this.domId+'-duration"></strong>. \n      The file <strong id="'+this.domId+'-filename"></strong> is ready.\n      <br><br>\n      Press ESC to exit. Press + or - to start again.\n      ',this.domId+"-complete"),this.html('<div class="title">Erm...</div>\n      <br><br>\n      There was an error.\n      <br><br>\n      Press ESC to exit or reload the page.\n      ',this.domId+"-error")}},{key:"dom",value:function(e,t,r,n){var i=document.createElement(e);i.setAttribute("id",t||""),i.className=n||"",r.appendChild(i)}},{key:"html",value:function(e,t){document.getElementById(t).innerHTML=e}},{key:"hideAllMessages",value:function(){for(var e=document.getElementsByClassName(this.domId+"-msg-box"),t=0;t<e.length;t++)e[t].classList.remove("show")}},{key:"initStyles",value:function(){var e="#"+this.domId+" {\n        position: fixed;\n        pointer-events: none;\n        z-index: 9999;\n        width: 100%;\n        height: 100%;\n        top: 0;\n        left: 0;\n        display: none;\n        font-family: Helvetica, Arial, sans-serif;\n        font-size: 12px;\n      }\n  \n      #"+this.domId+".show {\n        display: block;\n      }\n      \n      #"+this.domId+"-modal-wrapper {\n        position: absolute;\n        width: 37.5%;\n        min-width: 400px;\n        bottom: 20px;\n        left: 50%;\n        transform: translateX(-50%);\n      }\n  \n      #"+this.domId+"-modal {\n        position: relative;\n        width: 100%;\n        background-color: #FFF;\n        box-shadow: 0px 0px 30px 0px rgba(0,0,0,0.2);\n        padding: 20px;\n        color: #333;\n        font-size: 12px;\n        border-radius: 5px;\n        box-sizing: border-box;\n      }\n  \n      #"+this.domId+"-message {\n        \n      }\n  \n      ."+this.domId+"-msg-box {\n        display: none;\n      }\n      ."+this.domId+"-msg-box.show {\n        display: block;\n      }\n  \n      .title {\n        font-size: 14px;\n        font-weight: bold;\n      }\n  \n      .mode {\n        display: none;\n      }\n  \n      .mode.show {\n        display: block;\n      }\n  \n      #"+this.domId+"-loader {\n        \n      }\n  \n      #"+this.domId+"-complete {\n      }\n  \n      #"+this.domId+"-capture-area {\n        position: absolute;\n        box-sizing: content-box;\n        border: 1px solid #FFF;\n        // box-shadow:inset 0 0 20px 0 rgba(0,0,0,0.3);\n        box-shadow: 0 0 40px 0 rgba(0,0,0,0.5);\n        background-color: transparent;\n        left: 50%;\n        top: 50%;\n        transform: translateX(-50%) translateY(-50%);\n      }\n      ";this.appendStyle(e)}},{key:"appendStyle",value:function(e){var t=window.document.head||window.document.getElementsByTagName("head")[0],r=window.document.createElement("style");r.type="text/css",r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e)),t.appendChild(r)}}]),e}();r.Highres=u,t.exports=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"browserify-fs":15,downloadjs:23,pngjs:126}]},{},[158])(158)});